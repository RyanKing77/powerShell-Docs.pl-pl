---
ms.date: 07/10/2019
keywords: jea, programu powershell, zabezpieczeń
title: Możliwości roli usługi JEA
ms.openlocfilehash: 7191b90e198ffb539da6870a8ddc3e449ad9e8ae
ms.sourcegitcommit: 46bebe692689ebedfe65ff2c828fe666b443198d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/10/2019
ms.locfileid: "67726612"
---
# <a name="jea-role-capabilities"></a><span data-ttu-id="2a026-103">Możliwości roli usługi JEA</span><span class="sxs-lookup"><span data-stu-id="2a026-103">JEA Role Capabilities</span></span>

<span data-ttu-id="2a026-104">Podczas tworzenia punktu końcowego JEA, należy zdefiniować jedną lub kilkoma funkcjami roli, które opisują ktoś czynności w ramach sesji usługi JEA.</span><span class="sxs-lookup"><span data-stu-id="2a026-104">When creating a JEA endpoint, you need to define one or more role capabilities that describe what someone can do in a JEA session.</span></span> <span data-ttu-id="2a026-105">Funkcja roli jest plikiem danych programu PowerShell przy użyciu `.psrc` rozszerzenia, które wyświetla listę wszystkich poleceń cmdlet, funkcji, dostawców i zewnętrznych programów, które są dostępne do procesu łączenia użytkowników.</span><span class="sxs-lookup"><span data-stu-id="2a026-105">A role capability is a PowerShell data file with the `.psrc` extension that lists all the cmdlets, functions, providers, and external programs that are made available to connecting users.</span></span>

## <a name="determine-which-commands-to-allow"></a><span data-ttu-id="2a026-106">Określić, jakie polecenia, aby umożliwić</span><span class="sxs-lookup"><span data-stu-id="2a026-106">Determine which commands to allow</span></span>

<span data-ttu-id="2a026-107">Pierwszym krokiem w tworzeniu plik możliwości roli jest należy wziąć pod uwagę, jakie użytkownicy muszą mieć dostęp do.</span><span class="sxs-lookup"><span data-stu-id="2a026-107">The first step in creating a role capability file is to consider what the users need access to.</span></span> <span data-ttu-id="2a026-108">Wymagania procesu zbierania może wymagać trochę czasu, ale jest procesem ważne.</span><span class="sxs-lookup"><span data-stu-id="2a026-108">The requirements gathering process can take a while, but it's an important process.</span></span> <span data-ttu-id="2a026-109">Zapewniając użytkownikom dostęp do zbyt małej liczby poleceń cmdlet i funkcji może uniemożliwić ich wprowadzenie ich pracę.</span><span class="sxs-lookup"><span data-stu-id="2a026-109">Giving users access to too few cmdlets and functions can prevent them from getting their job done.</span></span> <span data-ttu-id="2a026-110">Zezwalanie na dostęp do zbyt wielu poleceń cmdlet i funkcji można zezwolić użytkownikom na więcej niż planowano co obniżać Twoje wystąpienie zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="2a026-110">Allowing access to too many cmdlets and functions can allow users to do more than you intended and weaken your security stance.</span></span>

<span data-ttu-id="2a026-111">Jak obniżyć informacji na temat tego procesu zależy od tego, organizacji i cele.</span><span class="sxs-lookup"><span data-stu-id="2a026-111">How you go about this process depends on your organization and goals.</span></span> <span data-ttu-id="2a026-112">Poniższe porady mogą pomóc upewnić się, że jesteś na prawidłową ścieżkę.</span><span class="sxs-lookup"><span data-stu-id="2a026-112">The following tips can help ensure you're on the right path.</span></span>

1. <span data-ttu-id="2a026-113">**Identyfikowanie** korzystają użytkownicy polecenia do wykonywania ich zadań.</span><span class="sxs-lookup"><span data-stu-id="2a026-113">**Identify** the commands users are using to get their jobs done.</span></span> <span data-ttu-id="2a026-114">Może to obejmować badanie informatykami, sprawdzanie skryptów automatyzacji lub analizowanie dzienników i zapisy sesji programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="2a026-114">This may involve surveying IT staff, checking automation scripts, or analyzing PowerShell session transcripts and logs.</span></span>
2. <span data-ttu-id="2a026-115">**Aktualizacja** użycie narzędzi wiersza polecenia będące odpowiednikami programu PowerShell, gdzie to możliwe, najlepiej inspekcji i JEA dostosowywania środowiska.</span><span class="sxs-lookup"><span data-stu-id="2a026-115">**Update** use of command-line tools to PowerShell equivalents, where possible, for the best auditing and JEA customization experience.</span></span> <span data-ttu-id="2a026-116">Nie można ograniczyć zewnętrznych programów jako dokładnością jako natywnych poleceń cmdlet programu PowerShell i funkcji jea.</span><span class="sxs-lookup"><span data-stu-id="2a026-116">External programs can't be constrained as granularly as native PowerShell cmdlets and functions in JEA.</span></span>
3. <span data-ttu-id="2a026-117">**Ogranicz** zakresu poleceń cmdlet, aby zezwalać tylko na określonych parametrów lub wartości parametrów.</span><span class="sxs-lookup"><span data-stu-id="2a026-117">**Restrict** the scope of the cmdlets to only allow specific parameters or parameter values.</span></span> <span data-ttu-id="2a026-118">Jest to szczególnie ważne w przypadku użytkowników należy zarządzać tylko części systemu.</span><span class="sxs-lookup"><span data-stu-id="2a026-118">This is especially important if users should manage only part of a system.</span></span>
4. <span data-ttu-id="2a026-119">**Utwórz** funkcji niestandardowych w celu zastąpienia polecenia złożonych lub polecenia, które są trudne do ograniczenia jea.</span><span class="sxs-lookup"><span data-stu-id="2a026-119">**Create** custom functions to replace complex commands or commands that are difficult to constrain in JEA.</span></span> <span data-ttu-id="2a026-120">Prostej funkcji, która opakowuje złożone polecenia lub stosuje logikę dodatkowe sprawdzenie poprawności oferują dodatkową kontrolę dla uproszczenia administratorów i użytkowników końcowych.</span><span class="sxs-lookup"><span data-stu-id="2a026-120">A simple function that wraps a complex command or applies additional validation logic can offer additional control for admins and end-user simplicity.</span></span>
5. <span data-ttu-id="2a026-121">**Test** o określonym zakresie listę dopuszczalny rozmiar poleceń Twoje użytkownika lub grupy usługi automation i dostosowanie wedle potrzeb.</span><span class="sxs-lookup"><span data-stu-id="2a026-121">**Test** the scoped list of allowable commands with your users or automation services, and adjust as necessary.</span></span>

### <a name="examples-of-potentially-dangerous-commands"></a><span data-ttu-id="2a026-122">Przykłady poleceń potencjalnie niebezpiecznych</span><span class="sxs-lookup"><span data-stu-id="2a026-122">Examples of potentially dangerous commands</span></span>

<span data-ttu-id="2a026-123">Staranne wybieranie polecenia ważne jest, aby upewnić się, że punkt końcowy usługi JEA nie zezwala użytkownikowi na podniesienie poziomu uprawnień.</span><span class="sxs-lookup"><span data-stu-id="2a026-123">Careful selection of commands is important to ensure the JEA endpoint doesn't allow the user to elevate their permissions.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="2a026-124">Podstawowe informacje wymagane do successCommands użytkownika w ramach sesji usługi JEA często są uruchamiane z podwyższonym poziomem uprawnień.</span><span class="sxs-lookup"><span data-stu-id="2a026-124">Essential information required for user successCommands in a JEA session are often run with elevated privileges.</span></span>

<span data-ttu-id="2a026-125">Poniższa tabela zawiera przykłady poleceń, które mogą służyć złośliwie Jeśli jest to dozwolone w stanie nieograniczone.</span><span class="sxs-lookup"><span data-stu-id="2a026-125">The following table contains examples of commands that can be used maliciously if allowed in an unconstrained state.</span></span> <span data-ttu-id="2a026-126">To nie jest kompletną listą i powinna służyć wyłącznie jako punktu wyjścia ostrzegawcze.</span><span class="sxs-lookup"><span data-stu-id="2a026-126">This isn't an exhaustive list and should only be used as a cautionary starting point.</span></span>

|                                            <span data-ttu-id="2a026-127">Ryzyko</span><span class="sxs-lookup"><span data-stu-id="2a026-127">Risk</span></span>                                            |                                <span data-ttu-id="2a026-128">Przykład</span><span class="sxs-lookup"><span data-stu-id="2a026-128">Example</span></span>                                |                                                                              <span data-ttu-id="2a026-129">Powiązane polecenia</span><span class="sxs-lookup"><span data-stu-id="2a026-129">Related commands</span></span>                                                                              |
| ------------------------------------------------------------------------------------------ | --------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <span data-ttu-id="2a026-130">Udzielanie użytkownik nawiązujący połączenie z uprawnieniami administratora w celu OBEJŚCIE usługi JEA</span><span class="sxs-lookup"><span data-stu-id="2a026-130">Granting the connecting user admin privileges to bypass JEA</span></span>                                | `Add-LocalGroupMember -Member 'CONTOSO\jdoe' -Group 'Administrators'` | <span data-ttu-id="2a026-131">`Add-ADGroupMember`, `Add-LocalGroupMember`, `net.exe`, `dsadd.exe`</span><span class="sxs-lookup"><span data-stu-id="2a026-131">`Add-ADGroupMember`, `Add-LocalGroupMember`, `net.exe`, `dsadd.exe`</span></span>                                                                                                        |
| <span data-ttu-id="2a026-132">Uruchamiania dowolnego kodu, takich jak złośliwe oprogramowanie luki w zabezpieczeniach i niestandardowe skrypty do obejścia zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="2a026-132">Running arbitrary code, such as malware, exploits, or custom scripts to bypass protections</span></span> | `Start-Process -FilePath '\\san\share\malware.exe'`                   | <span data-ttu-id="2a026-133">`Start-Process`, `New-Service`, `Invoke-Item`, `Invoke-WmiMethod`, `Invoke-CimMethod`, `Invoke-Expression`, `Invoke-Command`, `New-ScheduledTask`, `Register-ScheduledJob`</span><span class="sxs-lookup"><span data-stu-id="2a026-133">`Start-Process`, `New-Service`, `Invoke-Item`, `Invoke-WmiMethod`, `Invoke-CimMethod`, `Invoke-Expression`, `Invoke-Command`, `New-ScheduledTask`, `Register-ScheduledJob`</span></span> |

## <a name="create-a-role-capability-file"></a><span data-ttu-id="2a026-134">Utwórz plik możliwości roli</span><span class="sxs-lookup"><span data-stu-id="2a026-134">Create a role capability file</span></span>

<span data-ttu-id="2a026-135">Można utworzyć nowy plik możliwości roli programu PowerShell przy użyciu [New PSRoleCapabilityFile](/powershell/module/microsoft.powershell.core/new-psrolecapabilityfile?view=powershell-6) polecenia cmdlet.</span><span class="sxs-lookup"><span data-stu-id="2a026-135">You can create a new PowerShell role capability file with the [New-PSRoleCapabilityFile](/powershell/module/microsoft.powershell.core/new-psrolecapabilityfile?view=powershell-6) cmdlet.</span></span>

```powershell
New-PSRoleCapabilityFile -Path .\MyFirstJEARole.psrc
```

<span data-ttu-id="2a026-136">Wynikowy plik możliwości roli należy zmodyfikować w taki sposób, aby zezwalać na polecenia wymaganych dla danej roli.</span><span class="sxs-lookup"><span data-stu-id="2a026-136">The resulting role capability file should be edited to allow the commands required for the role.</span></span> <span data-ttu-id="2a026-137">Dokumentacja pomocy programu PowerShell zawiera kilka przykładów sposobu konfigurowania pliku.</span><span class="sxs-lookup"><span data-stu-id="2a026-137">The PowerShell help documentation contains several examples of how you can configure the file.</span></span>

### <a name="allowing-powershell-cmdlets-and-functions"></a><span data-ttu-id="2a026-138">Polecenia cmdlet programu PowerShell i funkcji</span><span class="sxs-lookup"><span data-stu-id="2a026-138">Allowing PowerShell cmdlets and functions</span></span>

<span data-ttu-id="2a026-139">Aby autoryzować użytkowników o uruchomienie polecenia cmdlet programu PowerShell lub funkcje, należy dodać nazwę polecenia cmdlet lub funkcji do VisibleCmdlets lub VisibleFunctions pól.</span><span class="sxs-lookup"><span data-stu-id="2a026-139">To authorize users to run PowerShell cmdlets or functions, add the cmdlet or function name to the VisibleCmdlets or VisibleFunctions fields.</span></span> <span data-ttu-id="2a026-140">Jeśli nie masz pewności, czy polecenie jest polecenie cmdlet lub funkcji, możesz uruchomić `Get-Command <name>` i sprawdź **CommandType** właściwość w danych wyjściowych.</span><span class="sxs-lookup"><span data-stu-id="2a026-140">If you aren't sure whether a command is a cmdlet or function, you can run `Get-Command <name>` and check the **CommandType** property in the output.</span></span>

```powershell
VisibleCmdlets = 'Restart-Computer', 'Get-NetIPAddress'
```

<span data-ttu-id="2a026-141">Czasami zakresu określonego polecenia cmdlet lub funkcji jest zbyt ogólnym, na potrzeby użytkowników.</span><span class="sxs-lookup"><span data-stu-id="2a026-141">Sometimes the scope of a specific cmdlet or function is too broad for your users' needs.</span></span> <span data-ttu-id="2a026-142">Administrator systemu DNS, na przykład wymaga jedynie prawdopodobnie uzyskać dostęp do ponownego uruchomienia usługi DNS.</span><span class="sxs-lookup"><span data-stu-id="2a026-142">A DNS admin, for example, probably only needs access to restart the DNS service.</span></span> <span data-ttu-id="2a026-143">W środowiskach wielodostępnych dzierżawcy mają dostęp do narzędzia do samoobsługowego zarządzania.</span><span class="sxs-lookup"><span data-stu-id="2a026-143">In multi-tenant environments, tenants have access to self-service management tools.</span></span> <span data-ttu-id="2a026-144">Dzierżawcy powinny być ograniczone do zarządzania własnych zasobów.</span><span class="sxs-lookup"><span data-stu-id="2a026-144">Tenants should be limited to managing their own resources.</span></span> <span data-ttu-id="2a026-145">W takich przypadkach można ograniczyć, które parametry są udostępniane z polecenia cmdlet lub funkcji.</span><span class="sxs-lookup"><span data-stu-id="2a026-145">For these cases, you can restrict which parameters are exposed from the cmdlet or function.</span></span>

```powershell
VisibleCmdlets = @{ Name = 'Restart-Computer'; Parameters = @{ Name = 'Name' }}
```

<span data-ttu-id="2a026-146">W bardziej zaawansowanych scenariuszach może być również konieczne ograniczenie wartości, które użytkownik może używać z następującymi parametrami.</span><span class="sxs-lookup"><span data-stu-id="2a026-146">In more advanced scenarios, you may also need to restrict the values a user may use with these parameters.</span></span> <span data-ttu-id="2a026-147">Możliwości roli pozwalają zdefiniować zestaw wartości lub wzorzec wyrażenia regularnego, które określają, jakie dane wejściowe jest dozwolone.</span><span class="sxs-lookup"><span data-stu-id="2a026-147">Role capabilities let you define a set of values or a regular expression pattern that determine what input is allowed.</span></span>

```powershell
VisibleCmdlets = @{ Name = 'Restart-Service'; Parameters = @{ Name = 'Name'; ValidateSet = 'Dns', 'Spooler' }},
                 @{ Name = 'Start-Website'; Parameters = @{ Name = 'Name'; ValidatePattern = 'HR_*' }}
```

> [!NOTE]
> <span data-ttu-id="2a026-148">[Typowe parametry programu PowerShell](/powershell/module/microsoft.powershell.core/about/about_commonparameters) zawsze dozwolone, nawet wtedy, gdy ograniczenia dostępnych parametrów.</span><span class="sxs-lookup"><span data-stu-id="2a026-148">The [common PowerShell parameters](/powershell/module/microsoft.powershell.core/about/about_commonparameters) are always allowed, even if you restrict the available parameters.</span></span>
> <span data-ttu-id="2a026-149">Należy nie jawnie ich listę w polu Parametry.</span><span class="sxs-lookup"><span data-stu-id="2a026-149">You should not explicitly list them in the Parameters field.</span></span>

<span data-ttu-id="2a026-150">W poniższej tabeli opisano różne sposoby, które można dostosować widoczne polecenia cmdlet lub funkcji.</span><span class="sxs-lookup"><span data-stu-id="2a026-150">The table below describes the various ways you can customize a visible cmdlet or function.</span></span>
<span data-ttu-id="2a026-151">Możesz mieszać i dopasowywać znajdujących się poniżej w **VisibleCmdlets** pola.</span><span class="sxs-lookup"><span data-stu-id="2a026-151">You can mix and match any of the below in the **VisibleCmdlets** field.</span></span>

|                                           <span data-ttu-id="2a026-152">Przykład</span><span class="sxs-lookup"><span data-stu-id="2a026-152">Example</span></span>                                           |                                                             <span data-ttu-id="2a026-153">Przypadek użycia</span><span class="sxs-lookup"><span data-stu-id="2a026-153">Use case</span></span>                                                              |
| ------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------- |
| <span data-ttu-id="2a026-154">`'My-Func'` lub `@{ Name = 'My-Func' }`</span><span class="sxs-lookup"><span data-stu-id="2a026-154">`'My-Func'` or `@{ Name = 'My-Func' }`</span></span>                                                      | <span data-ttu-id="2a026-155">Zezwala użytkownikowi na uruchamianie `My-Func` bez żadnych ograniczeń na parametry.</span><span class="sxs-lookup"><span data-stu-id="2a026-155">Allows the user to run `My-Func` without any restrictions on the parameters.</span></span>                                                      |
| `'MyModule\My-Func'`                                                                        | <span data-ttu-id="2a026-156">Zezwala użytkownikowi na uruchamianie `My-Func` z modułu `MyModule` bez żadnych ograniczeń na parametry.</span><span class="sxs-lookup"><span data-stu-id="2a026-156">Allows the user to run `My-Func` from the module `MyModule` without any restrictions on the parameters.</span></span>                           |
| `'My-*'`                                                                                    | <span data-ttu-id="2a026-157">Zezwala użytkownikowi na uruchamianie dowolnego polecenia cmdlet lub funkcji za pomocą zlecenie `My`.</span><span class="sxs-lookup"><span data-stu-id="2a026-157">Allows the user to run any cmdlet or function with the verb `My`.</span></span>                                                                 |
| `'*-Func'`                                                                                  | <span data-ttu-id="2a026-158">Zezwala użytkownikowi na uruchamianie dowolnego polecenia cmdlet lub funkcji z rzeczownikiem `Func`.</span><span class="sxs-lookup"><span data-stu-id="2a026-158">Allows the user to run any cmdlet or function with the noun `Func`.</span></span>                                                               |
| `@{ Name = 'My-Func'; Parameters = @{ Name = 'Param1'}, @{ Name = 'Param2' }}`              | <span data-ttu-id="2a026-159">Zezwala użytkownikowi na uruchamianie `My-Func` z `Param1` i `Param2` parametrów.</span><span class="sxs-lookup"><span data-stu-id="2a026-159">Allows the user to run `My-Func` with the `Param1` and `Param2` parameters.</span></span> <span data-ttu-id="2a026-160">Dowolna wartość mogą być dostarczane do parametrów.</span><span class="sxs-lookup"><span data-stu-id="2a026-160">Any value can be supplied to the parameters.</span></span>          |
| `@{ Name = 'My-Func'; Parameters = @{ Name = 'Param1'; ValidateSet = 'Value1', 'Value2' }}` | <span data-ttu-id="2a026-161">Zezwala użytkownikowi na uruchamianie `My-Func` z `Param1` parametru.</span><span class="sxs-lookup"><span data-stu-id="2a026-161">Allows the user to run `My-Func` with the `Param1` parameter.</span></span> <span data-ttu-id="2a026-162">Tylko "Wartość1" i "Wartość2" mogą być dostarczane do parametru.</span><span class="sxs-lookup"><span data-stu-id="2a026-162">Only "Value1" and "Value2" can be supplied to the parameter.</span></span>        |
| `@{ Name = 'My-Func'; Parameters = @{ Name = 'Param1'; ValidatePattern = 'contoso.*' }}`    | <span data-ttu-id="2a026-163">Zezwala użytkownikowi na uruchamianie `My-Func` z `Param1` parametru.</span><span class="sxs-lookup"><span data-stu-id="2a026-163">Allows the user to run `My-Func` with the `Param1` parameter.</span></span> <span data-ttu-id="2a026-164">Żadnej wartości, zaczynając od "contoso" mogą być dostarczane do parametru.</span><span class="sxs-lookup"><span data-stu-id="2a026-164">Any value starting with "contoso" can be supplied to the parameter.</span></span> |

> [!WARNING]
> <span data-ttu-id="2a026-165">Aby uzyskać najlepsze rozwiązania w zakresie zabezpieczeń nie zaleca się używać symboli wieloznacznych, podczas definiowania widoczne dla poleceń cmdlet lub funkcji.</span><span class="sxs-lookup"><span data-stu-id="2a026-165">For best security practices, it is not recommended to use wildcards when defining visible cmdlets or functions.</span></span> <span data-ttu-id="2a026-166">Zamiast tego należy jawnie listę każdego zaufanych polecenia, aby upewnić się, że żadne polecenia, które współużytkują ten sam schemat nazewnictwa przypadkowo uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="2a026-166">Instead, you should explicitly list each trusted command to ensure no other commands that share the same naming scheme are unintentionally authorized.</span></span>

<span data-ttu-id="2a026-167">Nie można zastosować zarówno **ValidatePattern** i **ValidateSet** do tego samego polecenia cmdlet lub funkcji.</span><span class="sxs-lookup"><span data-stu-id="2a026-167">You can't apply both a **ValidatePattern** and **ValidateSet** to the same cmdlet or function.</span></span>

<span data-ttu-id="2a026-168">Jeśli to zrobisz, **ValidatePattern** zastępuje **ValidateSet**.</span><span class="sxs-lookup"><span data-stu-id="2a026-168">If you do, the **ValidatePattern** overrides the **ValidateSet**.</span></span>

<span data-ttu-id="2a026-169">Aby uzyskać więcej informacji na temat **ValidatePattern**, zapoznaj się z [to *Hey, Scripting Guy!* wpis](https://devblogs.microsoft.com/scripting/validate-powershell-parameters-before-running-the-script/) i [wyrażeń regularnych w programie PowerShell](/powershell/module/microsoft.powershell.core/about/about_regular_expressions)odwoływać się do zawartości.</span><span class="sxs-lookup"><span data-stu-id="2a026-169">For more information about **ValidatePattern**, check out [this *Hey, Scripting Guy!* post](https://devblogs.microsoft.com/scripting/validate-powershell-parameters-before-running-the-script/) and the [PowerShell Regular Expressions](/powershell/module/microsoft.powershell.core/about/about_regular_expressions) reference content.</span></span>

### <a name="allowing-external-commands-and-powershell-scripts"></a><span data-ttu-id="2a026-170">Dzięki niemu agencje poleceń zewnętrznych i skryptów programu PowerShell</span><span class="sxs-lookup"><span data-stu-id="2a026-170">Allowing external commands and PowerShell scripts</span></span>

<span data-ttu-id="2a026-171">Aby zezwolić użytkownikom na uruchamianie plików wykonywalnych i skryptów programu PowerShell (.ps1) w ramach sesji usługi JEA, trzeba dodać pełną ścieżkę do każdego programu w **VisibleExternalCommands** pola.</span><span class="sxs-lookup"><span data-stu-id="2a026-171">To allow users to run executables and PowerShell scripts (.ps1) in a JEA session, you have to add the full path to each program in the **VisibleExternalCommands** field.</span></span>

```powershell
VisibleExternalCommands = 'C:\Windows\System32\whoami.exe', 'C:\Program Files\Contoso\Scripts\UpdateITSoftware.ps1'
```

<span data-ttu-id="2a026-172">Jeśli to możliwe, polecenia cmdlet lub funkcja odpowiedników dla zewnętrznych plików wykonywalnych, autoryzowane od momentu przy użyciu programu PowerShell mają kontrolę nad parametry są niedozwolone przy użyciu poleceń cmdlet programu PowerShell i funkcji.</span><span class="sxs-lookup"><span data-stu-id="2a026-172">Where possible, to use PowerShell cmdlet or function equivalents for any external executables you authorize since you have control over the parameters allowed with PowerShell cmdlets and functions.</span></span>

<span data-ttu-id="2a026-173">Wiele plików wykonywalnych pozwala na odczyt bieżącego stanu, a następnie zmienić je, podając różne parametry.</span><span class="sxs-lookup"><span data-stu-id="2a026-173">Many executables allow you to read the current state and then change it by providing different parameters.</span></span>

<span data-ttu-id="2a026-174">Rozważmy na przykład rola Administrator serwera plików, który zarządza udziałów sieciowych hostowanych w systemie.</span><span class="sxs-lookup"><span data-stu-id="2a026-174">For example, consider the role of a file server admin that manages network shares hosted on a system.</span></span> <span data-ttu-id="2a026-175">Jednym ze sposobów zarządzania udziałami jest użycie `net share`.</span><span class="sxs-lookup"><span data-stu-id="2a026-175">One way of managing shares is to use `net share`.</span></span> <span data-ttu-id="2a026-176">Jednakże, dzięki czemu **net.exe** jest niebezpieczne, ponieważ użytkownik może uzyskać uprawnienia administratora, przy użyciu za pomocą polecenia `net group Administrators unprivilegedjeauser /add`.</span><span class="sxs-lookup"><span data-stu-id="2a026-176">However, allowing **net.exe** is dangerous because the user could use the command to gain admin privileges with `net group Administrators unprivilegedjeauser /add`.</span></span> <span data-ttu-id="2a026-177">Opcja bardziej bezpieczna jest umożliwienie [Get-SmbShare](/powershell/module/smbshare/get-smbshare), która osiąga ten sam wynik, ale ma bardzo bardziej ograniczony zakres.</span><span class="sxs-lookup"><span data-stu-id="2a026-177">A more secure option is to allow [Get-SmbShare](/powershell/module/smbshare/get-smbshare), which achieves the same result but has a much more limited scope.</span></span>

<span data-ttu-id="2a026-178">Podczas wprowadzania poleceń zewnętrznych dostępnych dla użytkowników w ramach sesji usługi JEA, zawsze należy określić pełną ścieżkę do pliku wykonywalnego.</span><span class="sxs-lookup"><span data-stu-id="2a026-178">When making external commands available to users in a JEA session, always specify the complete path to the executable.</span></span> <span data-ttu-id="2a026-179">Zapobiega to wykonywanie podobnie nazwanych i potencjalnie złośliwych programów znajdujących się w innym miejscu w systemie.</span><span class="sxs-lookup"><span data-stu-id="2a026-179">This prevents the execution of similarly named and potentially malicious programs located elsewhere on the system.</span></span>

### <a name="allowing-access-to-powershell-providers"></a><span data-ttu-id="2a026-180">Zezwalanie na dostęp do dostawcy programu PowerShell</span><span class="sxs-lookup"><span data-stu-id="2a026-180">Allowing access to PowerShell providers</span></span>

<span data-ttu-id="2a026-181">Domyślnie żaden dostawca programu PowerShell są dostępne w sesji JEA.</span><span class="sxs-lookup"><span data-stu-id="2a026-181">By default, no PowerShell providers are available in JEA sessions.</span></span> <span data-ttu-id="2a026-182">Zmniejsza to ryzyko poufnych informacji i ustawienia konfiguracji zostały ujawnione użytkownik nawiązujący połączenie.</span><span class="sxs-lookup"><span data-stu-id="2a026-182">This reduces the risk of sensitive information and configuration settings being disclosed to the connecting user.</span></span>

<span data-ttu-id="2a026-183">Gdy jest to konieczne, można zezwolić na dostęp do dostawcy programu PowerShell przy użyciu `VisibleProviders` polecenia.</span><span class="sxs-lookup"><span data-stu-id="2a026-183">When necessary, you can allow access to the PowerShell providers using the `VisibleProviders` command.</span></span> <span data-ttu-id="2a026-184">Aby uzyskać pełną listę dostawców, uruchamianie `Get-PSProvider`.</span><span class="sxs-lookup"><span data-stu-id="2a026-184">For a full list of providers, run `Get-PSProvider`.</span></span>

```powershell
VisibleProviders = 'Registry'
```

<span data-ttu-id="2a026-185">Proste zadania, które wymagają dostępu do systemu plików, rejestru, magazynu certyfikatów lub innych dostawców poufne należy wziąć pod uwagę pisanie niestandardowej funkcji, która współpracuje z dostawcą w imieniu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="2a026-185">For simple tasks that require access to the file system, registry, certificate store, or other sensitive providers, consider writing a custom function that works with the provider on the user's behalf.</span></span> <span data-ttu-id="2a026-186">Funkcje, poleceń cmdlet i zewnętrznych programów dostępnych w ramach sesji usługi JEA nie są z zastrzeżeniem tych samych ograniczeń, jak JEA.</span><span class="sxs-lookup"><span data-stu-id="2a026-186">The functions, cmdlets, and external programs available in a JEA session aren't subject to the same constraints as JEA.</span></span> <span data-ttu-id="2a026-187">Domyślnie, ich dostęp z dowolnego dostawcy.</span><span class="sxs-lookup"><span data-stu-id="2a026-187">They can access any provider by default.</span></span> <span data-ttu-id="2a026-188">Również należy rozważyć użycie [dysku użytkownika](session-configurations.md#user-drive) podczas kopiowania plików do / z punktu końcowego JEA jest wymagana.</span><span class="sxs-lookup"><span data-stu-id="2a026-188">Also consider using the [user drive](session-configurations.md#user-drive) when copying files to or from a JEA endpoint is required.</span></span>

### <a name="creating-custom-functions"></a><span data-ttu-id="2a026-189">Tworzenie funkcji niestandardowych</span><span class="sxs-lookup"><span data-stu-id="2a026-189">Creating custom functions</span></span>

<span data-ttu-id="2a026-190">Można tworzyć niestandardowe funkcje w pliku możliwości roli, aby uprościć złożone zadania dla użytkowników końcowych.</span><span class="sxs-lookup"><span data-stu-id="2a026-190">You can author custom functions in a role capability file to simplify complex tasks for your end users.</span></span> <span data-ttu-id="2a026-191">Funkcje niestandardowe są również przydatne, gdy potrzebujesz logikę weryfikacji zaawansowane o wprowadzenie wartości parametrów polecenia cmdlet.</span><span class="sxs-lookup"><span data-stu-id="2a026-191">Custom functions are also useful when you require advanced validation logic for cmdlet parameter values.</span></span> <span data-ttu-id="2a026-192">Możesz pisać proste funkcje **FunctionDefinitions** pola:</span><span class="sxs-lookup"><span data-stu-id="2a026-192">You can write simple functions in the **FunctionDefinitions** field:</span></span>

```powershell
VisibleFunctions = 'Get-TopProcess'

FunctionDefinitions = @{
    Name = 'Get-TopProcess'

    ScriptBlock = {
        param($Count = 10)

        Get-Process | Sort-Object -Property CPU -Descending |
            Microsoft.PowerShell.Utility\Select-Object -First $Count
    }
}
```

> [!IMPORTANT]
> <span data-ttu-id="2a026-193">Nie zapomnij dodać nazwę Twojej funkcji niestandardowych do **VisibleFunctions** pola, aby mogły być uruchamiane przez użytkowników usługi JEA.</span><span class="sxs-lookup"><span data-stu-id="2a026-193">Don't forget to add the name of your custom functions to the **VisibleFunctions** field so they can be run by the JEA users.</span></span>

<span data-ttu-id="2a026-194">Treść funkcji niestandardowych (blok skryptu) działa w trybie język domyślny dla systemu, a nie jest podlegających ograniczeniom języka firmy JEA.</span><span class="sxs-lookup"><span data-stu-id="2a026-194">The body (script block) of custom functions runs in the default language mode for the system and isn't subject to JEA's language constraints.</span></span> <span data-ttu-id="2a026-195">Oznacza to, że funkcje można uzyskiwać dostęp do systemu plików i rejestru i uruchamiania poleceń, które nie były widoczne w pliku możliwości roli.</span><span class="sxs-lookup"><span data-stu-id="2a026-195">This means that functions can access the file system and registry, and run commands that weren't made visible in the role capability file.</span></span> <span data-ttu-id="2a026-196">Należy zadbać, aby uniknąć uruchamiania dowolnego kodu, korzystając z parametrów.</span><span class="sxs-lookup"><span data-stu-id="2a026-196">Take care to avoid running arbitrary code when using parameters.</span></span> <span data-ttu-id="2a026-197">Dane wejściowe użytkownika potokowanie bezpośrednio do polecenia cmdlet, takich jak uniknąć `Invoke-Expression`.</span><span class="sxs-lookup"><span data-stu-id="2a026-197">Avoid piping user input directly into cmdlets like `Invoke-Expression`.</span></span>

<span data-ttu-id="2a026-198">W powyższym przykładzie należy zauważyć, że nazwa FQDN modułu (FQMN) `Microsoft.PowerShell.Utility\Select-Object` był używany zamiast skrót `Select-Object`.</span><span class="sxs-lookup"><span data-stu-id="2a026-198">In the above example, notice that the fully qualified module name (FQMN) `Microsoft.PowerShell.Utility\Select-Object` was used instead of the shorthand `Select-Object`.</span></span>
<span data-ttu-id="2a026-199">Funkcje zdefiniowane w plikach możliwości roli są nadal podlega procesowi zakresu sesji JEA, który zawiera funkcje serwera proxy usługi JEA tworzy ograniczenie istniejące polecenia.</span><span class="sxs-lookup"><span data-stu-id="2a026-199">Functions defined in role capability files are still subject to the scope of JEA sessions, which includes the proxy functions JEA creates to constrain existing commands.</span></span>

<span data-ttu-id="2a026-200">Domyślnie `Select-Object` jest poleceniem cmdlet ograniczone we wszystkich sesjach JEA, który nie zezwala na wybór dowolne właściwości obiektów.</span><span class="sxs-lookup"><span data-stu-id="2a026-200">By default, `Select-Object` is a constrained cmdlet in all JEA sessions that doesn't allow the selection of arbitrary properties on objects.</span></span> <span data-ttu-id="2a026-201">Aby używać nieograniczonego `Select-Object` w funkcjach, należy jawnie zażądać pełnego wdrożenia przy użyciu FQMN.</span><span class="sxs-lookup"><span data-stu-id="2a026-201">To use the unconstrained `Select-Object` in functions, you must explicitly request the full implementation using the FQMN.</span></span> <span data-ttu-id="2a026-202">Wszelkie ograniczone polecenie cmdlet w sesji JEA ma tych samych ograniczeń po wywołaniu przez funkcję.</span><span class="sxs-lookup"><span data-stu-id="2a026-202">Any constrained cmdlet in a JEA session has the same constraints when invoked from a function.</span></span> <span data-ttu-id="2a026-203">Aby uzyskać więcej informacji, zobacz [about_Command_Precedence](/powershell/module/microsoft.powershell.core/about/about_command_precedence).</span><span class="sxs-lookup"><span data-stu-id="2a026-203">For more information, see [about_Command_Precedence](/powershell/module/microsoft.powershell.core/about/about_command_precedence).</span></span>

<span data-ttu-id="2a026-204">Jeśli piszesz kilka niestandardowych funkcji jest bardziej wygodne i umieść je w module skryptów programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="2a026-204">If you're writing several custom functions, it's more convenient to put them in a PowerShell script module.</span></span> <span data-ttu-id="2a026-205">Możesz uwidocznić te funkcje przy użyciu sesji JEA **VisibleFunctions** pola, jak w przypadku modułów wbudowanych oraz innych firm.</span><span class="sxs-lookup"><span data-stu-id="2a026-205">You make those functions visible in the JEA session using the **VisibleFunctions** field like you would with built-in and third-party modules.</span></span>

<span data-ttu-id="2a026-206">Karta zakończenia ma działać prawidłowo w sesjach JEA możesz musi zawierać wbudowanej funkcji `tabexpansion2` w **VisibleFunctions** listy.</span><span class="sxs-lookup"><span data-stu-id="2a026-206">For tab completion to work properly in JEA sessions you must include the built-in function `tabexpansion2` in the **VisibleFunctions** list.</span></span>

## <a name="place-role-capabilities-in-a-module"></a><span data-ttu-id="2a026-207">W module umieścić możliwości roli</span><span class="sxs-lookup"><span data-stu-id="2a026-207">Place role capabilities in a module</span></span>

<span data-ttu-id="2a026-208">Aby dla programu PowerShell, aby znaleźć plik możliwości roli, muszą być przechowywane w **RoleCapabilities** folderu modułu programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="2a026-208">In order for PowerShell to find a role capability file, it must be stored in a **RoleCapabilities** folder in a PowerShell module.</span></span> <span data-ttu-id="2a026-209">Moduł mogą być przechowywane w dowolnym folderze zawarte w `$env:PSModulePath` zmiennej środowiskowej, jednak użytkownik nie należy umieścić go w System32 lub folderu gdzie niezaufanych, łączenie użytkowników można zmodyfikować pliki.</span><span class="sxs-lookup"><span data-stu-id="2a026-209">The module can be stored in any folder included in the `$env:PSModulePath` environment variable, however you shouldn't place it in System32 or a folder where the untrusted, connecting users could modify the files.</span></span> <span data-ttu-id="2a026-210">Poniżej znajduje się przykład tworzenia podstawowych moduł skrypt programu PowerShell o nazwie **ContosoJEA** w `$env:ProgramFiles` ścieżki.</span><span class="sxs-lookup"><span data-stu-id="2a026-210">Below is an example of creating a basic PowerShell script module called **ContosoJEA** in the `$env:ProgramFiles` path.</span></span>

```powershell
# Create a folder for the module
$modulePath = Join-Path $env:ProgramFiles "WindowsPowerShell\Modules\ContosoJEA"
New-Item -ItemType Directory -Path $modulePath

# Create an empty script module and module manifest.
# At least one file in the module folder must have the same name as the folder itself.
New-Item -ItemType File -Path (Join-Path $modulePath "ContosoJEAFunctions.psm1")
New-ModuleManifest -Path (Join-Path $modulePath "ContosoJEA.psd1") -RootModule "ContosoJEAFunctions.psm1"

# Create the RoleCapabilities folder and copy in the PSRC file
$rcFolder = Join-Path $modulePath "RoleCapabilities"
New-Item -ItemType Directory $rcFolder
Copy-Item -Path .\MyFirstJEARole.psrc -Destination $rcFolder
```

<span data-ttu-id="2a026-211">Aby uzyskać więcej informacji na temat modułów programu PowerShell, zobacz [opis modułu programu PowerShell](/powershell/developer/windows-powershell).</span><span class="sxs-lookup"><span data-stu-id="2a026-211">For more information about PowerShell modules, see [Understanding a PowerShell Module](/powershell/developer/windows-powershell).</span></span>

## <a name="updating-role-capabilities"></a><span data-ttu-id="2a026-212">Aktualizowanie możliwości roli</span><span class="sxs-lookup"><span data-stu-id="2a026-212">Updating role capabilities</span></span>

<span data-ttu-id="2a026-213">Możesz edytować plik możliwości roli, aby zaktualizować ustawienia w dowolnym momencie.</span><span class="sxs-lookup"><span data-stu-id="2a026-213">You can edit a role capability file to update the settings at any time.</span></span> <span data-ttu-id="2a026-214">Wszystkie nowe sesje JEA pracę po zaktualizowaniu możliwości roli będą odzwierciedlać poprawione możliwości.</span><span class="sxs-lookup"><span data-stu-id="2a026-214">Any new JEA sessions started after the role capability has been updated will reflect the revised capabilities.</span></span>

<span data-ttu-id="2a026-215">Jest to, dlaczego kontrola dostępu do folderu możliwości roli jest tak ważny.</span><span class="sxs-lookup"><span data-stu-id="2a026-215">This is why controlling access to the role capabilities folder is so important.</span></span> <span data-ttu-id="2a026-216">Tylko wysoce zaufanych administratorów powinny mieć możliwość zmiany plików możliwości roli.</span><span class="sxs-lookup"><span data-stu-id="2a026-216">Only highly trusted administrators should be allowed to change role capability files.</span></span> <span data-ttu-id="2a026-217">Niezaufanego użytkownika mogą zmieniać pliki możliwości roli, łatwo udzielenie się dostępu do poleceń cmdlet, które pozwalają do podniesienia swoich uprawnień.</span><span class="sxs-lookup"><span data-stu-id="2a026-217">If an untrusted user can change role capability files, they can easily give themselves access to cmdlets that allow them to elevate their privileges.</span></span>

<span data-ttu-id="2a026-218">Dla administratorów chcących blokowanie dostępu do możliwości roli upewnij się, że System lokalny ma dostęp do odczytu do plików funkcji roli i zawierającego moduły.</span><span class="sxs-lookup"><span data-stu-id="2a026-218">For administrators looking to lock down access to the role capabilities, ensure Local System has read access to the role capability files and containing modules.</span></span>

## <a name="how-role-capabilities-are-merged"></a><span data-ttu-id="2a026-219">Jak są scalane możliwości roli</span><span class="sxs-lookup"><span data-stu-id="2a026-219">How role capabilities are merged</span></span>

<span data-ttu-id="2a026-220">Użytkownicy uzyskują dostęp do wszystkich zgodnych funkcji ról w [plik konfiguracji sesji](session-configurations.md) po użytkownik podał sesji JEA.</span><span class="sxs-lookup"><span data-stu-id="2a026-220">Users are granted access to all matching role capabilities in the [session configuration file](session-configurations.md) when they enter a JEA session.</span></span> <span data-ttu-id="2a026-221">JEA próbuje przyznać użytkownikowi restrykcyjny zestaw poleceń dozwolone przez żaden z tych ról.</span><span class="sxs-lookup"><span data-stu-id="2a026-221">JEA tries to give the user the most permissive set of commands allowed by any of the roles.</span></span>

### <a name="visiblecmdlets-and-visiblefunctions"></a><span data-ttu-id="2a026-222">VisibleCmdlets i VisibleFunctions</span><span class="sxs-lookup"><span data-stu-id="2a026-222">VisibleCmdlets and VisibleFunctions</span></span>

<span data-ttu-id="2a026-223">Najbardziej złożoną logikę scalanie wpływa na poleceń cmdlet i funkcje, które mogą mieć ich parametrów i wartości parametrów ograniczone jea.</span><span class="sxs-lookup"><span data-stu-id="2a026-223">The most complex merge logic affects cmdlets and functions, which can have their parameters and parameter values limited in JEA.</span></span>

<span data-ttu-id="2a026-224">Dostępne są następujące reguły:</span><span class="sxs-lookup"><span data-stu-id="2a026-224">The rules are as follows:</span></span>

1. <span data-ttu-id="2a026-225">Jeśli polecenie cmdlet jest dostępne tylko widoczne w jedną rolę, jest widoczny dla użytkownika o wszelkich ograniczeń odpowiednich parametrów.</span><span class="sxs-lookup"><span data-stu-id="2a026-225">If a cmdlet is only made visible in one role, it is visible to the user with any applicable parameter constraints.</span></span>
2. <span data-ttu-id="2a026-226">Jeśli polecenie cmdlet jest widoczny w więcej niż jednej roli, a każda rola ma ograniczenia tego samego polecenia cmdlet, polecenie cmdlet jest widoczna dla użytkownika przy użyciu tych ograniczeń.</span><span class="sxs-lookup"><span data-stu-id="2a026-226">If a cmdlet is made visible in more than one role, and each role has the same constraints on the cmdlet, the cmdlet is visible to the user with those constraints.</span></span>
3. <span data-ttu-id="2a026-227">Jeśli polecenie cmdlet jest widoczny w więcej niż jednej roli, a każda rola umożliwia inny zbiór parametrów, polecenia cmdlet i wszystkie parametry, które są zdefiniowane dla każdej roli są widoczne dla użytkownika.</span><span class="sxs-lookup"><span data-stu-id="2a026-227">If a cmdlet is made visible in more than one role, and each role allows a different set of parameters, the cmdlet and all the parameters defined across every role are visible to the user.</span></span>
   <span data-ttu-id="2a026-228">Jeśli jedna rola nie ma ograniczenia dotyczące parametrów, wszystkie parametry są dozwolone.</span><span class="sxs-lookup"><span data-stu-id="2a026-228">If one role doesn't have constraints on the parameters, all parameters are allowed.</span></span>
4. <span data-ttu-id="2a026-229">Jeśli jedna rola definiuje zestaw sprawdzania poprawności lub wzorca weryfikacji dla parametru polecenia cmdlet, a także innych ról pozwala parametru, ale nie ogranicza wartości parametrów, sprawdzanie poprawności zestawu lub wzorzec jest ignorowany.</span><span class="sxs-lookup"><span data-stu-id="2a026-229">If one role defines a validate set or validate pattern for a cmdlet parameter, and the other role allows the parameter but does not constrain the parameter values, the validate set or pattern is ignored.</span></span>
5. <span data-ttu-id="2a026-230">Jeśli zestaw sprawdzania poprawności jest zdefiniowany dla tego samego parametru polecenia cmdlet w więcej niż jednej roli, wszystkie wartości z wszystkich zestawów sprawdzania poprawności są dozwolone.</span><span class="sxs-lookup"><span data-stu-id="2a026-230">If a validate set is defined for the same cmdlet parameter in more than one role, all values from all validate sets are allowed.</span></span>
6. <span data-ttu-id="2a026-231">Jeśli wzorzec sprawdzania poprawności jest zdefiniowany dla tego samego parametru polecenia cmdlet w więcej niż jednej roli, wszelkie wartości, które pasuje do żadnego z wzorców są dozwolone.</span><span class="sxs-lookup"><span data-stu-id="2a026-231">If a validate pattern is defined for the same cmdlet parameter in more than one role, any values that match any of the patterns are allowed.</span></span>
7. <span data-ttu-id="2a026-232">Jeśli zestaw sprawdzania poprawności jest zdefiniowany w co najmniej jedną rolę, a wzorzec sprawdzania poprawności jest zdefiniowany w innej roli dla tego samego parametru polecenia cmdlet, zestaw sprawdzania poprawności jest ignorowana, a do pozostałych wzorców sprawdzania poprawności zostanie zastosowana reguła (6).</span><span class="sxs-lookup"><span data-stu-id="2a026-232">If a validate set is defined in one or more roles, and a validate pattern is defined in another role for the same cmdlet parameter, the validate set is ignored and rule (6) applies to the remaining validate patterns.</span></span>

<span data-ttu-id="2a026-233">Poniżej przedstawiono przykładowy sposób role są łączone zgodnie z tymi zasadami:</span><span class="sxs-lookup"><span data-stu-id="2a026-233">Below is an example of how roles are merged according to these rules:</span></span>

```powershell
# Role A Visible Cmdlets
$roleA = @{
    VisibleCmdlets = 'Get-Service',
                     @{ Name = 'Restart-Service';
                        Parameters = @{ Name = 'DisplayName'; ValidateSet = 'DNS Client' } }
}

# Role B Visible Cmdlets
$roleB = @{
    VisibleCmdlets = @{ Name = 'Get-Service';
                        Parameters = @{ Name = 'DisplayName'; ValidatePattern = 'DNS.*' } },
                     @{ Name = 'Restart-Service';
                        Parameters = @{ Name = 'DisplayName'; ValidateSet = 'DNS Server' } }
}

# Resulting permissions for a user who belongs to both role A and B
# - The constraint in role B for the DisplayName parameter on Get-Service
#   is ignored because of rule #4
# - The ValidateSets for Restart-Service are merged because both roles use
#   ValidateSet on the same parameter per rule #5
$mergedAandB = @{
    VisibleCmdlets = 'Get-Service',
                     @{ Name = 'Restart-Service';
                        Parameters = @{ Name = 'DisplayName'; ValidateSet = 'DNS Client', 'DNS Server' } }
}
```

### <a name="visibleexternalcommands-visiblealiases-visibleproviders-scriptstoprocess"></a><span data-ttu-id="2a026-234">VisibleExternalCommands, VisibleAliases, VisibleProviders, ScriptsToProcess</span><span class="sxs-lookup"><span data-stu-id="2a026-234">VisibleExternalCommands, VisibleAliases, VisibleProviders, ScriptsToProcess</span></span>

<span data-ttu-id="2a026-235">Wszystkie pola w pliku możliwości roli są dodawane do zbiorczego zestawu poleceń zewnętrznych dopuszczalny rozmiar, aliasy, dostawców i skrypty uruchamiania.</span><span class="sxs-lookup"><span data-stu-id="2a026-235">All other fields in the role capability file are added to a cumulative set of allowable external commands, aliases, providers, and startup scripts.</span></span> <span data-ttu-id="2a026-236">Polecenia, alias, dostawca lub skryptu w jedną rolę możliwości jest dostępna dla użytkownika JEA.</span><span class="sxs-lookup"><span data-stu-id="2a026-236">Any command, alias, provider, or script available in one role capability is available to the JEA user.</span></span>

<span data-ttu-id="2a026-237">Uważaj upewnić się, że połączony zestaw dostawców z jednej roli funkcji i poleceń cmdlet/funkcje/poleceń z innego nie zezwalaj użytkownikom niezamierzonego dostępu do zasobów systemowych.</span><span class="sxs-lookup"><span data-stu-id="2a026-237">Be careful to ensure that the combined set of providers from one role capability and cmdlets/functions/commands from another don't allow users unintentional access to system resources.</span></span>
<span data-ttu-id="2a026-238">Na przykład, jeśli zezwala na jedną rolę `Remove-Item` polecenia cmdlet, a drugi umożliwia `FileSystem` dostawcy, są narażeni użytkownika JEA usuwanie dowolnych plików na komputerze.</span><span class="sxs-lookup"><span data-stu-id="2a026-238">For example, if one role allows the `Remove-Item` cmdlet and another allows the `FileSystem` provider, you are at risk of a JEA user deleting arbitrary files on your computer.</span></span> <span data-ttu-id="2a026-239">Dodatkowe informacje na temat identyfikowania czynnych uprawnień użytkowników można znaleźć w [inspekcji JEA](audit-and-report.md) artykułu.</span><span class="sxs-lookup"><span data-stu-id="2a026-239">Additional information about identifying users' effective permissions can be found in the [auditing JEA](audit-and-report.md) article.</span></span>

## <a name="next-steps"></a><span data-ttu-id="2a026-240">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="2a026-240">Next steps</span></span>

[<span data-ttu-id="2a026-241">Utwórz plik konfiguracji sesji</span><span class="sxs-lookup"><span data-stu-id="2a026-241">Create a session configuration file</span></span>](session-configurations.md)

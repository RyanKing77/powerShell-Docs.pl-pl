---
ms.date: 07/10/2019
keywords: jea, programu powershell, zabezpieczeń
title: Zagadnienia dotyczące zabezpieczeń usługi JEA
ms.openlocfilehash: befc24fec368c4f6d60477daf63bf17e9431133e
ms.sourcegitcommit: 46bebe692689ebedfe65ff2c828fe666b443198d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/10/2019
ms.locfileid: "67726583"
---
# <a name="jea-security-considerations"></a><span data-ttu-id="6865a-103">Zagadnienia dotyczące zabezpieczeń usługi JEA</span><span class="sxs-lookup"><span data-stu-id="6865a-103">JEA Security Considerations</span></span>

<span data-ttu-id="6865a-104">JEA pomaga zwiększyć poziom bezpieczeństwa dzięki zmniejszeniu liczby administratorów trwałych na maszynach.</span><span class="sxs-lookup"><span data-stu-id="6865a-104">JEA helps you improve your security posture by reducing the number of permanent administrators on your machines.</span></span> <span data-ttu-id="6865a-105">JEA używa konfiguracji sesji programu PowerShell, aby utworzyć nowy punkt wejścia dla użytkowników do zarządzania systemem.</span><span class="sxs-lookup"><span data-stu-id="6865a-105">JEA uses a PowerShell session configuration to create a new entry point for users to manage the system.</span></span> <span data-ttu-id="6865a-106">Użytkownicy, którzy muszą z podwyższonym poziomem uprawnień, ale nie nieograniczony dostęp do maszyny, aby wykonywać zadania administracyjne można udzielić dostępu do punktu końcowego JEA.</span><span class="sxs-lookup"><span data-stu-id="6865a-106">Users who need elevated, but not unlimited, access to the machine to do administrative tasks can be granted access to the JEA endpoint.</span></span> <span data-ttu-id="6865a-107">Ponieważ JEA umożliwia Ci użytkownicy uruchamiać polecenia administratora bez dostępu administratora pełnego, możesz usunąć tych użytkowników z grup zabezpieczeń o wysokim poziomie uprawnień.</span><span class="sxs-lookup"><span data-stu-id="6865a-107">Since JEA allows these users to run admin commands without having full admin access, you can then remove those users from highly privileged security groups.</span></span>

## <a name="run-as-account"></a><span data-ttu-id="6865a-108">Konto Uruchom jako</span><span class="sxs-lookup"><span data-stu-id="6865a-108">Run-As account</span></span>

<span data-ttu-id="6865a-109">Każdy punkt końcowy usługi JEA ma wyznaczonych **Uruchom jako** konta.</span><span class="sxs-lookup"><span data-stu-id="6865a-109">Each JEA endpoint has a designated **run-as** account.</span></span> <span data-ttu-id="6865a-110">To jest konto w ramach której użytkownik nawiązujący połączenie akcje są wykonywane.</span><span class="sxs-lookup"><span data-stu-id="6865a-110">This is the account under which the connecting user's actions are executed.</span></span> <span data-ttu-id="6865a-111">To konto jest konfigurowane w [plik konfiguracji sesji](session-configurations.md), i konta, możesz wybrać ma istotny wpływ na zabezpieczenia punktu końcowego usługi.</span><span class="sxs-lookup"><span data-stu-id="6865a-111">This account is configurable in the [session configuration file](session-configurations.md), and the account you choose has a significant bearing on the security of your endpoint.</span></span>

<span data-ttu-id="6865a-112">**Kont wirtualnych** to zalecany sposób konfigurowania **Uruchom jako** konta.</span><span class="sxs-lookup"><span data-stu-id="6865a-112">**Virtual accounts** are the recommended way of configuring the **run-as** account.</span></span> <span data-ttu-id="6865a-113">Kont wirtualnych są jednorazowe, tymczasowy kont lokalnych, które są tworzone dla użytkownik nawiązujący połączenie do użycia w czasie trwania sesji JEA.</span><span class="sxs-lookup"><span data-stu-id="6865a-113">Virtual accounts are one-time, temporary local accounts that are created for the connecting user to use during the duration of their JEA session.</span></span> <span data-ttu-id="6865a-114">Zaraz po ich sesja została przerwana, wirtualne konto zostanie zniszczony i nie można już używać.</span><span class="sxs-lookup"><span data-stu-id="6865a-114">As soon as their session is terminated, the virtual account is destroyed and can't be used anymore.</span></span> <span data-ttu-id="6865a-115">Użytkownik nawiązujący połączenie nie może ustalić poświadczenia dla konta wirtualnego.</span><span class="sxs-lookup"><span data-stu-id="6865a-115">The connecting user doesn't know the credentials for the virtual account.</span></span> <span data-ttu-id="6865a-116">Konta wirtualnego nie można uzyskać dostępu do systemu za pomocą innych metod, takich jak pulpitu zdalnego lub nieograniczonego punktu końcowego programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="6865a-116">The virtual account can't be used to access the system via other means like Remote Desktop or an unconstrained PowerShell endpoint.</span></span>

<span data-ttu-id="6865a-117">Domyślnie kont wirtualnych należeć do lokalnej **Administratorzy** grupy na komputerze.</span><span class="sxs-lookup"><span data-stu-id="6865a-117">By default, virtual accounts belong to the local **Administrators** group on the machine.</span></span> <span data-ttu-id="6865a-118">To daje im pełne prawa do niczego w systemie zarządzania, ale żadnych praw do zarządzania zasobami w sieci.</span><span class="sxs-lookup"><span data-stu-id="6865a-118">This gives them full rights to manage anything on the system, but no rights to manage resources on the network.</span></span>
<span data-ttu-id="6865a-119">Podczas uwierzytelniania z innymi maszynami, kontekst użytkownika jest konto komputera lokalnego konta wirtualnego.</span><span class="sxs-lookup"><span data-stu-id="6865a-119">When authenticating with other machines, the user context is that of the local computer account, not the virtual account.</span></span>

<span data-ttu-id="6865a-120">Kontrolery domeny są szczególny przypadek, ponieważ nie istnieje lokalnie **Administratorzy** grupy.</span><span class="sxs-lookup"><span data-stu-id="6865a-120">Domain controllers are a special case since there isn't a local **Administrators** group.</span></span> <span data-ttu-id="6865a-121">Zamiast tego konta wirtualne należą do **Administratorzy domeny** i może zarządzać usługi katalogowe na kontrolerze domeny.</span><span class="sxs-lookup"><span data-stu-id="6865a-121">Instead, virtual accounts belong to **Domain Admins** and can manage the directory services on the domain controller.</span></span> <span data-ttu-id="6865a-122">Tożsamość domeny jest nadal może być używana na kontrolerze domeny, w której utworzono wystąpienie sesji JEA.</span><span class="sxs-lookup"><span data-stu-id="6865a-122">The domain identity is still restricted for use on the domain controller where the JEA session was instantiated.</span></span> <span data-ttu-id="6865a-123">Pojawia się, że dostęp do dowolnej sieci pochodzą z obiektu komputera kontrolera domeny, zamiast tego.</span><span class="sxs-lookup"><span data-stu-id="6865a-123">Any network access appears to come from the domain controller computer object instead.</span></span>

<span data-ttu-id="6865a-124">W obu przypadkach może być jawnie zdefiniować wirtualnego konto należy do grupy zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="6865a-124">In both cases, you may explicitly define which security groups the virtual account belongs to.</span></span> <span data-ttu-id="6865a-125">Jest dobrą praktyką, gdy zadanie może odbywać się bez uprawnień administratora lokalnego lub domeny.</span><span class="sxs-lookup"><span data-stu-id="6865a-125">This is a good practice when the task can be done without local or domain admin privileges.</span></span> <span data-ttu-id="6865a-126">Jeśli masz już grupę zabezpieczeń zdefiniowane dla administratorów, należy udzielić członkostwa wirtualnego konta do tej grupy.</span><span class="sxs-lookup"><span data-stu-id="6865a-126">If you already have a security group defined for your admins, grant the virtual account membership to that group.</span></span> <span data-ttu-id="6865a-127">Członkostwo w grupie kont wirtualnych jest ograniczona do lokalnych grup zabezpieczeń na stacji roboczej i elementów członkowskich serwerach.</span><span class="sxs-lookup"><span data-stu-id="6865a-127">Virtual account group membership is limited to local security groups on workstation and member servers.</span></span> <span data-ttu-id="6865a-128">Na kontrolerach domeny kont wirtualnych musi być członkami grupy zabezpieczeń domeny.</span><span class="sxs-lookup"><span data-stu-id="6865a-128">On domain controllers, virtual accounts must be members of domain security groups.</span></span>
<span data-ttu-id="6865a-129">Po dodaniu co najmniej jedną grupę zabezpieczeń konta wirtualnego nie jest już należy do grup domyślnych (lokalnego lub domeny Administratorzy).</span><span class="sxs-lookup"><span data-stu-id="6865a-129">Once the virtual account has been added to one or more security groups, it no longer belongs to the default groups (local or domain admins).</span></span>

<span data-ttu-id="6865a-130">Poniższa tabela zawiera podsumowanie możliwych opcji konfiguracji i wynikowy uprawnienia dla kont wirtualnych:</span><span class="sxs-lookup"><span data-stu-id="6865a-130">The following table summarizes the possible configuration options and resulting permissions for virtual accounts:</span></span>

|        <span data-ttu-id="6865a-131">Typ komputera</span><span class="sxs-lookup"><span data-stu-id="6865a-131">Computer type</span></span>         | <span data-ttu-id="6865a-132">Konfiguracja grupy konta wirtualnego</span><span class="sxs-lookup"><span data-stu-id="6865a-132">Virtual account group configuration</span></span> |                   <span data-ttu-id="6865a-133">Kontekst użytkownika lokalnego</span><span class="sxs-lookup"><span data-stu-id="6865a-133">Local user context</span></span>                    | <span data-ttu-id="6865a-134">Kontekst użytkownika sieci</span><span class="sxs-lookup"><span data-stu-id="6865a-134">Network user context</span></span> |
| ---------------------------- | ----------------------------------- | ------------------------------------------------------- | -------------------- |
| <span data-ttu-id="6865a-135">Kontroler domeny</span><span class="sxs-lookup"><span data-stu-id="6865a-135">Domain controller</span></span>            | <span data-ttu-id="6865a-136">Wartość domyślna</span><span class="sxs-lookup"><span data-stu-id="6865a-136">Default</span></span>                             | <span data-ttu-id="6865a-137">Użytkownik domeny, członek "*domeny*\Domain</span><span class="sxs-lookup"><span data-stu-id="6865a-137">Domain user, member of '*DOMAIN*\Domain Admins'</span></span>         | <span data-ttu-id="6865a-138">Konto komputera</span><span class="sxs-lookup"><span data-stu-id="6865a-138">Computer account</span></span>     |
| <span data-ttu-id="6865a-139">Kontroler domeny</span><span class="sxs-lookup"><span data-stu-id="6865a-139">Domain controller</span></span>            | <span data-ttu-id="6865a-140">Grupy w domenie A i B</span><span class="sxs-lookup"><span data-stu-id="6865a-140">Domain groups A and B</span></span>               | <span data-ttu-id="6865a-141">Użytkownik domeny, członek "*domeny*\A","*domeny*\B"</span><span class="sxs-lookup"><span data-stu-id="6865a-141">Domain user, member of '*DOMAIN*\A', '*DOMAIN*\B'</span></span>       | <span data-ttu-id="6865a-142">Konto komputera</span><span class="sxs-lookup"><span data-stu-id="6865a-142">Computer account</span></span>     |
| <span data-ttu-id="6865a-143">Serwera członkowskiego lub stacji roboczej</span><span class="sxs-lookup"><span data-stu-id="6865a-143">Member server or workstation</span></span> | <span data-ttu-id="6865a-144">Wartość domyślna</span><span class="sxs-lookup"><span data-stu-id="6865a-144">Default</span></span>                             | <span data-ttu-id="6865a-145">Użytkownik lokalny, członek "*BUILTIN*\Administrators</span><span class="sxs-lookup"><span data-stu-id="6865a-145">Local user, member of '*BUILTIN*\Administrators'</span></span>        | <span data-ttu-id="6865a-146">Konto komputera</span><span class="sxs-lookup"><span data-stu-id="6865a-146">Computer account</span></span>     |
| <span data-ttu-id="6865a-147">Serwera członkowskiego lub stacji roboczej</span><span class="sxs-lookup"><span data-stu-id="6865a-147">Member server or workstation</span></span> | <span data-ttu-id="6865a-148">Grupy lokalne, C i D</span><span class="sxs-lookup"><span data-stu-id="6865a-148">Local groups C and D</span></span>                | <span data-ttu-id="6865a-149">Użytkownik lokalny, członek "*komputera*\C" i "*komputera*\D"</span><span class="sxs-lookup"><span data-stu-id="6865a-149">Local user, member of '*COMPUTER*\C' and '*COMPUTER*\D'</span></span> | <span data-ttu-id="6865a-150">Konto komputera</span><span class="sxs-lookup"><span data-stu-id="6865a-150">Computer account</span></span>     |

<span data-ttu-id="6865a-151">Przyjrzyj się zdarzeń inspekcji zabezpieczeń i dzienniki zdarzeń aplikacji, zobacz, że każda sesja użytkownika JEA ma unikatowe konto wirtualne.</span><span class="sxs-lookup"><span data-stu-id="6865a-151">When you look at security audit events and application event logs, you see that each JEA user session has a unique virtual account.</span></span> <span data-ttu-id="6865a-152">Unikatowe konto ułatwia śledzenie działań użytkownika w punktu końcowego JEA dla oryginalnego użytkownika, który uruchomił polecenie.</span><span class="sxs-lookup"><span data-stu-id="6865a-152">This unique account helps you track user actions in a JEA endpoint back to the original user who ran the command.</span></span> <span data-ttu-id="6865a-153">Konta wirtualnej nazwy zgodne z formatem `WinRM Virtual Users\WinRM_VA_<ACCOUNTNUMBER>_<DOMAIN>_<sAMAccountName>` na przykład, jeśli użytkownik **Alicja** w domenie **Contoso** powoduje ponowne uruchomienie usługi JEA punkt końcowy, nazwę użytkownika skojarzoną z dowolnym Menedżera sterowania usługami zdarzenia będą `WinRM Virtual Users\WinRM_VA_1_contoso_alice`.</span><span class="sxs-lookup"><span data-stu-id="6865a-153">Virtual account names follow the format `WinRM Virtual Users\WinRM_VA_<ACCOUNTNUMBER>_<DOMAIN>_<sAMAccountName>` For example, if user **Alice** in domain **Contoso** restarts a service in a JEA endpoint, the username associated with any service control manager events would be `WinRM Virtual Users\WinRM_VA_1_contoso_alice`.</span></span>

<span data-ttu-id="6865a-154">**Konta usług zarządzane przez grupę (konta Gmsa)** są przydatne, gdy serwer członkowski musi mieć dostęp do zasobów sieciowych w sesji JEA.</span><span class="sxs-lookup"><span data-stu-id="6865a-154">**Group-managed service accounts (gMSAs)** are useful when a member server needs to have access to network resources in the JEA session.</span></span> <span data-ttu-id="6865a-155">Na przykład, gdy punktu końcowego JEA służy do kontrolowania dostępu do interfejsu API REST usługi hostowanej na innym komputerze.</span><span class="sxs-lookup"><span data-stu-id="6865a-155">For example, when a JEA endpoint is used to control access to a REST API service hosted on a different machine.</span></span> <span data-ttu-id="6865a-156">Ułatwia pisanie funkcji do wywołania interfejsów API REST, ale należy tożsamości sieciowej, do uwierzytelniania za pomocą interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="6865a-156">It's easy to write functions to invoke the REST APIs, but you need a network identity to authenticate with the API.</span></span> <span data-ttu-id="6865a-157">Używane konto usługi zarządzane przez grupę pozwala drugiego przeskoku przy jednoczesnym zachowaniu kontroli nad tym, którzy komputery można używać tego konta.</span><span class="sxs-lookup"><span data-stu-id="6865a-157">Using a group-managed service account makes the second hop possible while maintaining control over which computers can use the account.</span></span> <span data-ttu-id="6865a-158">Czynne uprawnienia opcją gMSA są definiowane przez grupy zabezpieczeń (lokalnego lub domeny) do którego należy dane konta gMSA.</span><span class="sxs-lookup"><span data-stu-id="6865a-158">The effective permissions of the gMSA are defined by the security groups (local or domain) to which the gMSA account belongs.</span></span>

<span data-ttu-id="6865a-159">Gdy punkt końcowy usługi JEA jest skonfigurowany do używania gMSA, akcje wszystkich użytkowników usługi JEA pojawią się pochodzić z tej samej gMSA.</span><span class="sxs-lookup"><span data-stu-id="6865a-159">When a JEA endpoint is configured to use a gMSA, the actions of all JEA users appear to come from the same gMSA.</span></span> <span data-ttu-id="6865a-160">Jest to jedyny sposób działania śledzenia do określonego użytkownika do identyfikowania zestawów polecenia uruchamiane w wykazie sesji programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="6865a-160">The only way to trace actions back to a specific user is to identify the set of commands run in a PowerShell session transcript.</span></span>

<span data-ttu-id="6865a-161">**Poświadczenia — dostęp próbny do** są używane, jeśli nie określisz **Uruchom jako** konta.</span><span class="sxs-lookup"><span data-stu-id="6865a-161">**Pass-thru credentials** are used when you don't specify a **run-as** account.</span></span> <span data-ttu-id="6865a-162">Program PowerShell używa poświadczeń użytkownik nawiązujący połączenie, aby uruchamiać polecenia na serwerze zdalnym.</span><span class="sxs-lookup"><span data-stu-id="6865a-162">PowerShell uses the connecting user's credential to run commands on the remote server.</span></span> <span data-ttu-id="6865a-163">Wymaga to przyznania łączące bezpośredni dostęp użytkowników do grup uprzywilejowanych zarządzania.</span><span class="sxs-lookup"><span data-stu-id="6865a-163">This requires you to grant the connecting user direct access to privileged management groups.</span></span> <span data-ttu-id="6865a-164">Ta konfiguracja jest **nie** zalecane w przypadku technologii JEA.</span><span class="sxs-lookup"><span data-stu-id="6865a-164">This configuration is **not** recommended for JEA.</span></span> <span data-ttu-id="6865a-165">Jeśli użytkownik nawiązujący połączenie ma już uprawnienia administratora, mogą uniknąć JEA i zarządzania systemem za pośrednictwem oznacza, że inne, nieograniczone.</span><span class="sxs-lookup"><span data-stu-id="6865a-165">If the connecting user already has admin privileges, they can avoid JEA and manage the system via other, unconstrained means.</span></span> <span data-ttu-id="6865a-166">Aby uzyskać więcej informacji, zobacz sekcję poniżej na temat [JEA nie chroni przed Administratorzy](#jea-doesnt-protect-against-admins).</span><span class="sxs-lookup"><span data-stu-id="6865a-166">For more information, see the section below on how [JEA doesn't protect against admins](#jea-doesnt-protect-against-admins).</span></span>

<span data-ttu-id="6865a-167">**Standardowe konta Uruchom jako** pozwalają na określenie dowolnego konta użytkownika, na którym działa podczas całej sesji programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="6865a-167">**Standard run-as accounts** allow you to specify any user account under which the entire PowerShell session runs.</span></span> <span data-ttu-id="6865a-168">Konfiguracje sesji przy użyciu stałej **Uruchom jako** konta (za pomocą `-RunAsCredential` parametr) nie jestes świadomy JEA.</span><span class="sxs-lookup"><span data-stu-id="6865a-168">Session configurations using fixed **run-as** accounts (with the `-RunAsCredential` parameter) aren't JEA-aware.</span></span> <span data-ttu-id="6865a-169">Definicje ról nie będą działać zgodnie z oczekiwaniami.</span><span class="sxs-lookup"><span data-stu-id="6865a-169">Role definitions no longer function as expected.</span></span> <span data-ttu-id="6865a-170">Każdy użytkownik autoryzowany do dostępu do punktu końcowego przypisano tę samą rolę.</span><span class="sxs-lookup"><span data-stu-id="6865a-170">Every user authorized to access the endpoint is assigned the same role.</span></span>

<span data-ttu-id="6865a-171">Nie używaj **RunAsCredential** w punkcie końcowym usługi JEA jest trudne do śledzenia działania do określonych użytkowników nie ma Obsługa i mapowanie użytkowników do ról.</span><span class="sxs-lookup"><span data-stu-id="6865a-171">You shouldn't use a **RunAsCredential** on a JEA endpoint because it's difficult to trace actions back to specific users and lacks support for mapping users to roles.</span></span>

## <a name="winrm-endpoint-acl"></a><span data-ttu-id="6865a-172">Listy ACL punktów końcowych usługi WinRM</span><span class="sxs-lookup"><span data-stu-id="6865a-172">WinRM Endpoint ACL</span></span>

<span data-ttu-id="6865a-173">Za pomocą regularnego punkty końcowe komunikacji zdalnej programu PowerShell, każdego punktu końcowego JEA ma oddzielne listy kontroli dostępu (ACL), który kontroluje kto może uwierzytelniać przy użyciu punktu końcowego JEA.</span><span class="sxs-lookup"><span data-stu-id="6865a-173">As with regular PowerShell remoting endpoints, each JEA endpoint has a separate access control list (ACL) that controls who can authenticate with the JEA endpoint.</span></span> <span data-ttu-id="6865a-174">Jeśli skonfigurowana niepoprawnie, Zaufani użytkownicy może nie być mogli korzystać z punktu końcowego JEA i niezaufanych użytkownicy mogą uzyskiwać dostęp.</span><span class="sxs-lookup"><span data-stu-id="6865a-174">If improperly configured, trusted users may not be able to access the JEA endpoint and untrusted users may have access.</span></span> <span data-ttu-id="6865a-175">Listy ACL usługi WinRM nie ma wpływu na mapowanie użytkowników do ról usługi JEA.</span><span class="sxs-lookup"><span data-stu-id="6865a-175">The WinRM ACL doesn't affect the mapping of users to JEA roles.</span></span> <span data-ttu-id="6865a-176">Mapowanie jest kontrolowana przez **RoleDefinitions** pole w pliku konfiguracji sesji używane do zarejestrowania punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="6865a-176">Mapping is controlled by the **RoleDefinitions** field in the session configuration file used to register the endpoint.</span></span>

<span data-ttu-id="6865a-177">Domyślnie gdy punkt końcowy usługi JEA ma wiele możliwości roli, listy ACL usługi WinRM jest skonfigurowany do Zezwalaj na dostęp do wszystkich zamapowanych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="6865a-177">By default, when a JEA endpoint has multiple role capabilities, the WinRM ACL is configured to allow access to all mapped users.</span></span> <span data-ttu-id="6865a-178">Na przykład sesję JEA skonfigurowany przy użyciu następujących poleceń przyznaje pełny dostęp do `CONTOSO\JEA_Lev1` i `CONTOSO\JEA_Lev2`.</span><span class="sxs-lookup"><span data-stu-id="6865a-178">For example, a JEA session configured using the following commands grants full access to `CONTOSO\JEA_Lev1` and `CONTOSO\JEA_Lev2`.</span></span>

```powershell
$roles = @{ 'CONTOSO\JEA_Lev1' = 'Lev1Role'; 'CONTOSO\JEA_Lev2' = 'Lev2Role' }
New-PSSessionConfigurationFile -Path '.\jea.pssc' -SessionType RestrictedRemoteServer -RoleDefinitions $roles -RunAsVirtualAccount
Register-PSSessionConfiguration -Path '.\jea.pssc' -Name 'MyJEAEndpoint'
```

<span data-ttu-id="6865a-179">Można przeprowadzać ich inspekcje uprawnień użytkownika za pomocą [Get-PSSessionConfiguration](/powershell/module/microsoft.powershell.core/get-pssessionconfiguration) polecenia cmdlet.</span><span class="sxs-lookup"><span data-stu-id="6865a-179">You can audit user permissions with the [Get-PSSessionConfiguration](/powershell/module/microsoft.powershell.core/get-pssessionconfiguration) cmdlet.</span></span>

```powershell
Get-PSSessionConfiguration -Name 'MyJEAEndpoint' | Select-Object Permission
```

```Output
Permission
----------
CONTOSO\JEA_Lev1 AccessAllowed
CONTOSO\JEA_Lev2 AccessAllowed
```

<span data-ttu-id="6865a-180">Aby zmienić, którzy użytkownicy mają dostęp, uruchom `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` dla monitu interakcyjnego lub `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` można zaktualizować uprawnień.</span><span class="sxs-lookup"><span data-stu-id="6865a-180">To change which users have access, run either `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` for an interactive prompt or `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` to update the permissions.</span></span> <span data-ttu-id="6865a-181">Użytkownicy muszą się przynajmniej *Invoke* praw dostępu do punktu końcowego JEA.</span><span class="sxs-lookup"><span data-stu-id="6865a-181">Users need at least *Invoke* rights to access the JEA endpoint.</span></span>

<span data-ttu-id="6865a-182">Istnieje możliwość tworzenia punktu końcowego JEA, który nie jest mapowany zdefiniowanej roli każdemu użytkownikowi, który ma dostęp.</span><span class="sxs-lookup"><span data-stu-id="6865a-182">It's possible to create a JEA endpoint that doesn't map a defined role to every user that has access.</span></span> <span data-ttu-id="6865a-183">Tacy użytkownicy można rozpocząć sesję JEA, ale tylko mają dostęp do poleceń cmdlet domyślne.</span><span class="sxs-lookup"><span data-stu-id="6865a-183">These users can start a JEA session, but only have access to the default cmdlets.</span></span> <span data-ttu-id="6865a-184">Można przeprowadzać ich inspekcje uprawnienia użytkownika w punkcie końcowym usługi JEA, uruchamiając `Get-PSSessionCapability`.</span><span class="sxs-lookup"><span data-stu-id="6865a-184">You can audit user permissions in a JEA endpoint by running `Get-PSSessionCapability`.</span></span> <span data-ttu-id="6865a-185">Aby uzyskać więcej informacji, zobacz [inspekcji i raporty dotyczące technologii JEA](audit-and-report.md).</span><span class="sxs-lookup"><span data-stu-id="6865a-185">For more information, see [Auditing and Reporting on JEA](audit-and-report.md).</span></span>

## <a name="least-privilege-roles"></a><span data-ttu-id="6865a-186">Co najmniej role uprawnień</span><span class="sxs-lookup"><span data-stu-id="6865a-186">Least privilege roles</span></span>

<span data-ttu-id="6865a-187">Podczas projektowania technologii JEA ról, to należy pamiętać, że konta wirtualne zarządzane przez grupę usługi uruchomione w tle mogą mają nieograniczony dostęp do komputera lokalnego.</span><span class="sxs-lookup"><span data-stu-id="6865a-187">When designing JEA roles, it's important to remember that the virtual and group-managed service accounts running behind the scenes can have unrestricted access to the local machine.</span></span> <span data-ttu-id="6865a-188">Możliwości roli JEA ograniczyć polecenia i aplikacje, które mogą być uruchamiane w tym kontekście uprzywilejowanych.</span><span class="sxs-lookup"><span data-stu-id="6865a-188">JEA role capabilities help limit the commands and applications that can be run in that privileged context.</span></span>
<span data-ttu-id="6865a-189">Nieprawidłowo zaprojektowane role można zezwolić na poleceń niebezpiecznych, które może zezwolić użytkownikowi zerwać granice JEA lub uzyskać dostępu do poufnych informacji.</span><span class="sxs-lookup"><span data-stu-id="6865a-189">Improperly designed roles can allow dangerous commands that may permit a user to break out of the JEA boundaries or obtain access to sensitive information.</span></span>

<span data-ttu-id="6865a-190">Na przykład rozważmy następujący wpis możliwości roli:</span><span class="sxs-lookup"><span data-stu-id="6865a-190">For example, consider the following role capability entry:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\*-Process'
}
```

<span data-ttu-id="6865a-191">Ta funkcja roli umożliwia użytkownikom uruchamianie każdego polecenia cmdlet programu PowerShell z rzeczownikiem **procesu** z **Microsoft.PowerShell.Management** modułu.</span><span class="sxs-lookup"><span data-stu-id="6865a-191">This role capability allows users to run any PowerShell cmdlet with the noun **Process** from the **Microsoft.PowerShell.Management** module.</span></span> <span data-ttu-id="6865a-192">Użytkownicy może być konieczne dostęp do poleceń cmdlet, takich jak `Get-Process` co aplikacje są uruchomione w systemie i `Stop-Process` do zatrzymania aplikacji, które nie odpowiada.</span><span class="sxs-lookup"><span data-stu-id="6865a-192">Users may need to access cmdlets like `Get-Process` to see what applications are running on the system and `Stop-Process` to kill applications that aren't responding.</span></span> <span data-ttu-id="6865a-193">Jednak ten wpis umożliwia także `Start-Process`, który może służyć do uruchamiania dowolnego programu z uprawnieniami administrator o pełnych uprawnieniach.</span><span class="sxs-lookup"><span data-stu-id="6865a-193">However, this entry also allows `Start-Process`, which can be used to start up an arbitrary program with full administrator permissions.</span></span> <span data-ttu-id="6865a-194">Program nie musi być zainstalowana lokalnie w systemie.</span><span class="sxs-lookup"><span data-stu-id="6865a-194">The program doesn't need to be installed locally on the system.</span></span> <span data-ttu-id="6865a-195">Program można uruchomić połączonego użytkownika z udziału plików, która przyznaje użytkownikowi uprawnienia administratora lokalnego, uruchamia złośliwego oprogramowania i innych.</span><span class="sxs-lookup"><span data-stu-id="6865a-195">A connected user could start a program from a file share that gives the user local admin privileges, runs malware, and more.</span></span>

<span data-ttu-id="6865a-196">Bardziej bezpieczna wersja ta sama funkcja roli będzie wyglądać:</span><span class="sxs-lookup"><span data-stu-id="6865a-196">A more secure version of this same role capability would look like:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\Get-Process', 'Microsoft.PowerShell.Management\Stop-Process'
}
```

<span data-ttu-id="6865a-197">Należy unikać używania symboli wieloznacznych w możliwości roli.</span><span class="sxs-lookup"><span data-stu-id="6865a-197">Avoid using wildcards in role capabilities.</span></span> <span data-ttu-id="6865a-198">Pamiętaj, aby regularnie [inspekcji uprawnienia obowiązująca nazwa użytkownika](audit-and-report.md#check-effective-rights-for-a-specific-user) zrozumieć, jakie polecenia są dostępne dla użytkownika.</span><span class="sxs-lookup"><span data-stu-id="6865a-198">Be sure to regularly [audit effective user permissions](audit-and-report.md#check-effective-rights-for-a-specific-user) to understand which commands are accessible to the user.</span></span>

## <a name="jea-doesnt-protect-against-admins"></a><span data-ttu-id="6865a-199">JEA nie chroni przed administratorów</span><span class="sxs-lookup"><span data-stu-id="6865a-199">JEA doesn't protect against admins</span></span>

<span data-ttu-id="6865a-200">Jedną z podstawowych zasad JEA jest możliwość użytkowników innych niż administratorzy w celu niektórych zadań administracyjnych.</span><span class="sxs-lookup"><span data-stu-id="6865a-200">One of the core principles of JEA is that it allows non-admins to do some admin tasks.</span></span> <span data-ttu-id="6865a-201">JEA nie chroni przed użytkownikami, którzy już mają uprawnienia administratora.</span><span class="sxs-lookup"><span data-stu-id="6865a-201">JEA doesn't protect against users who already have administrator privileges.</span></span> <span data-ttu-id="6865a-202">Użytkownicy, którzy należą **Administratorzy domeny**lokalny **Administratorzy**, lub inne wysoce uprzywilejowanych grup mogą omijać zabezpieczenia JEA firmy za pomocą innych metod.</span><span class="sxs-lookup"><span data-stu-id="6865a-202">Users who belong **Domain Admins**, local **Administrators**, or other highly privileged groups can circumvent JEA's protections via another means.</span></span> <span data-ttu-id="6865a-203">Na przykład ich można zalogować się przy użyciu protokołu RDP, użyj zdalnych konsol programu MMC lub nawiązać połączenie z użyciem środowiska PowerShell punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="6865a-203">For example, they could sign in with RDP, use remote MMC consoles, or connect to unconstrained PowerShell endpoints.</span></span> <span data-ttu-id="6865a-204">Ponadto administratorzy lokalni w systemie można zmodyfikować JEA konfiguracje, aby umożliwić dodatkowych użytkowników lub zmienić możliwości roli, aby rozszerzyć zakres co użytkownik może zrobić w ich sesji usługi JEA.</span><span class="sxs-lookup"><span data-stu-id="6865a-204">Also, local admins on a system can modify JEA configurations to allow additional users or change a role capability to extend the scope of what a user can do in their JEA session.</span></span> <span data-ttu-id="6865a-205">Należy ocenić użytkowników usługi JEA rozszerzone uprawnienia, aby zobaczyć, czy istnieją inne sposoby na uzyskanie uprzywilejowanego dostępu do systemu.</span><span class="sxs-lookup"><span data-stu-id="6865a-205">It's important to evaluate your JEA users' extended permissions to see if there are other ways to gain privileged access to the system.</span></span>

<span data-ttu-id="6865a-206">Powszechną praktyką jest JEA na użytek codziennej konserwacji i just-in-time, rozwiązanie do zarządzania dostępem uprzywilejowanym, które umożliwia użytkownikom tymczasowo stają się administratorami lokalnymi w sytuacjach awaryjnych.</span><span class="sxs-lookup"><span data-stu-id="6865a-206">A common practice is to use JEA for regular day-to-day maintenance and have a just-in-time, privileged access management solution that allows users to temporarily become local admins in emergency situations.</span></span> <span data-ttu-id="6865a-207">Dzięki temu użytkownicy nie są trwałe Administratorzy w systemie, ale można uzyskać te prawa, jeśli i tylko wtedy, gdy ich zakończeniu przepływu pracy, która dokumentuje ich użycie tych uprawnień.</span><span class="sxs-lookup"><span data-stu-id="6865a-207">This helps ensure users aren't permanent admins on the system, but can get those rights if, and only when, they complete a workflow that documents their use of those permissions.</span></span>

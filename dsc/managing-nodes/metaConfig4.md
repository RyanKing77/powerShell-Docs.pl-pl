---
ms.date: 12/12/2018
keywords: DSC, powershell, konfiguracja, ustawienia
title: Konfigurowanie programu LCM w programie PowerShell 4.0
ms.openlocfilehash: a7d8a1d8dea5ca4c2cdf53b8c02e498be20dab60
ms.sourcegitcommit: 46bebe692689ebedfe65ff2c828fe666b443198d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/10/2019
ms.locfileid: "67734626"
---
# <a name="configuring-the-lcm-in-powershell-40"></a><span data-ttu-id="65255-103">Konfigurowanie programu LCM w programie PowerShell 4.0</span><span class="sxs-lookup"><span data-stu-id="65255-103">Configuring the LCM in PowerShell 4.0</span></span>

><span data-ttu-id="65255-104">Dotyczy: Windows PowerShell 4.0</span><span class="sxs-lookup"><span data-stu-id="65255-104">Applies To: Windows PowerShell 4.0</span></span>

<span data-ttu-id="65255-105">**Aby uzyskać informacje dotyczące programu Windows PowerShell 5.0 lub nowszego, zobacz [Konfigurowanie programu Local Configuration Manager](metaConfig.md).**</span><span class="sxs-lookup"><span data-stu-id="65255-105">**For information related to Windows PowerShell 5.0 and later, see [Configuring the Local Configuration Manager](metaConfig.md).**</span></span>

<span data-ttu-id="65255-106">Local Configuration Manager jest aparatu programu Windows PowerShell Desired State Configuration (DSC).</span><span class="sxs-lookup"><span data-stu-id="65255-106">Local Configuration Manager is the Windows PowerShell Desired State Configuration (DSC) engine.</span></span>
<span data-ttu-id="65255-107">Działa we wszystkich węzłach docelowy i odpowiada za wywołanie zasoby konfiguracji, które są objęte skryptu konfiguracji DSC.</span><span class="sxs-lookup"><span data-stu-id="65255-107">It runs on all target nodes, and it is responsible for calling the configuration resources that are included in a DSC configuration script.</span></span>
<span data-ttu-id="65255-108">Ten temat zawiera listę właściwości programu Local Configuration Manager i w tym artykule opisano, jak można zmodyfikować ustawienia Local Configuration Manager na węzeł docelowy.</span><span class="sxs-lookup"><span data-stu-id="65255-108">This topic lists the properties of Local Configuration Manager and describes how you can modify the Local Configuration Manager settings on a target node.</span></span>

## <a name="local-configuration-manager-properties"></a><span data-ttu-id="65255-109">Właściwości Local Configuration Manager</span><span class="sxs-lookup"><span data-stu-id="65255-109">Local Configuration Manager properties</span></span>

<span data-ttu-id="65255-110">Poniższa lista zawiera właściwości Local Configuration Manager, które można ustawić lub pobrać.</span><span class="sxs-lookup"><span data-stu-id="65255-110">The following lists the Local Configuration Manager properties that you can set or retrieve.</span></span>

- <span data-ttu-id="65255-111">**AllowModuleOverwrite**: Określa, czy nowe konfiguracje pobrane z usługi konfiguracji mogą nadpisać stare w docelowym węźle.</span><span class="sxs-lookup"><span data-stu-id="65255-111">**AllowModuleOverwrite**: Controls whether new configurations downloaded from the configuration service are allowed to overwrite the old ones on the target node.</span></span> <span data-ttu-id="65255-112">Możliwe wartości to True i False.</span><span class="sxs-lookup"><span data-stu-id="65255-112">Possible values are True and False.</span></span>
- <span data-ttu-id="65255-113">**CertificateID**: Odcisk palca certyfikatu używany do zabezpieczania poświadczeń przekazanych w konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="65255-113">**CertificateID**: The thumbprint of a certificate used to secure credentials passed in a configuration.</span></span> <span data-ttu-id="65255-114">Aby uzyskać więcej informacji, zobacz [chcesz zabezpieczyć poświadczenia w Desired State Configuration programu Windows PowerShell?](https://blogs.msdn.microsoft.com/powershell/2014/01/31/want-to-secure-credentials-in-windows-powershell-desired-state-configuration/).</span><span class="sxs-lookup"><span data-stu-id="65255-114">For more information see [Want to secure credentials in Windows PowerShell Desired State Configuration?](https://blogs.msdn.microsoft.com/powershell/2014/01/31/want-to-secure-credentials-in-windows-powershell-desired-state-configuration/).</span></span>
- <span data-ttu-id="65255-115">**ConfigurationID**: Określa identyfikator GUID, który jest używany do pobierania pliku szczególną konfigurację przy użyciu usługi ściągania.</span><span class="sxs-lookup"><span data-stu-id="65255-115">**ConfigurationID**: Indicates a GUID which is used to get a particular configuration file from a pull service.</span></span> <span data-ttu-id="65255-116">Identyfikator GUID gwarantuje, że poprawny plik konfiguracji jest dostępny.</span><span class="sxs-lookup"><span data-stu-id="65255-116">The GUID ensures that the correct configuration file is accessed.</span></span>
- <span data-ttu-id="65255-117">**ConfigurationMode**: Określa, jak programu Local Configuration Manager faktycznie ma zastosowanie do konfiguracji do węzłów docelowych.</span><span class="sxs-lookup"><span data-stu-id="65255-117">**ConfigurationMode**: Specifies how the Local Configuration Manager actually applies the configuration to the target nodes.</span></span> <span data-ttu-id="65255-118">Może upłynąć następujące wartości:</span><span class="sxs-lookup"><span data-stu-id="65255-118">It can take the following values:</span></span>
  - <span data-ttu-id="65255-119">**ApplyOnly**: Po wybraniu tej opcji ma zastosowanie do konfiguracji DSC, a nie robi nic więcej, chyba że nowa konfiguracja zostanie wykryte, albo przez Ciebie wysyłanie nowej konfiguracji bezpośrednio do obiektu docelowego węzła lub jeśli łączysz się usługi ściągania oraz DSC wykryje nową konfigurację po sprawdza przy użyciu usługi ściągania.</span><span class="sxs-lookup"><span data-stu-id="65255-119">**ApplyOnly**: With this option, DSC applies the configuration and does nothing further unless a new configuration is detected, either by you sending a new configuration directly to the target node or if you are connecting to a pull service and DSC discovers a new configuration when it checks with the pull service.</span></span> <span data-ttu-id="65255-120">Jeśli konfiguracja węzła docelowego drifts, nie podjęto żadnej akcji.</span><span class="sxs-lookup"><span data-stu-id="65255-120">If the target node’s configuration drifts, no action is taken.</span></span>
  - <span data-ttu-id="65255-121">**ApplyAndMonitor**: Po wybraniu tej opcji (jest to ustawienie domyślne) DSC stosuje wszystkie nowe konfiguracje, czy wysłane bezpośrednio do węzła docelowego lub odnalezione na usługi ściągania.</span><span class="sxs-lookup"><span data-stu-id="65255-121">**ApplyAndMonitor**: With this option (which is the default), DSC applies any new configurations, whether sent by you directly to the target node or discovered on a pull service.</span></span> <span data-ttu-id="65255-122">Dzięki temu konfiguracji węzła docelowego drifts z pliku konfiguracji, DSC raporty niezgodności w dziennikach.</span><span class="sxs-lookup"><span data-stu-id="65255-122">Thereafter, if the configuration of the target node drifts from the configuration file, DSC reports the discrepancy in logs.</span></span> <span data-ttu-id="65255-123">Aby uzyskać więcej informacji o rejestrowaniu DSC, zobacz [przy użyciu dzienników zdarzeń do diagnozowania błędów w Desired State Configuration](http://blogs.msdn.com/b/powershell/archive/2014/01/03/using-event-logs-to-diagnose-errors-in-desired-state-configuration.aspx).</span><span class="sxs-lookup"><span data-stu-id="65255-123">For more about DSC logging, see [Using Event Logs to Diagnose Errors in Desired State Configuration](http://blogs.msdn.com/b/powershell/archive/2014/01/03/using-event-logs-to-diagnose-errors-in-desired-state-configuration.aspx).</span></span>
  - <span data-ttu-id="65255-124">**ApplyAndAutoCorrect**: Po wybraniu tej opcji wszelkie nowe konfiguracje dotyczy DSC, czy wysłane bezpośrednio do węzła docelowego lub odnalezione na usługę ściągania.</span><span class="sxs-lookup"><span data-stu-id="65255-124">**ApplyAndAutoCorrect**: With this option, DSC applies any new configurations, whether sent by you directly to the target node or discovered on a pull service.</span></span> <span data-ttu-id="65255-125">Jeśli konfiguracja węzła docelowego drifts z pliku konfiguracji, DSC raporty niezgodności w dziennikach, a następnie próbuje dopasować konfiguracji węzła docelowego w celu niezgodne z pliku konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="65255-125">Thereafter, if the configuration of the target node drifts from the configuration file, DSC reports the discrepancy in logs, and then attempts to adjust the target node configuration to bring in compliance with the configuration file.</span></span>
- <span data-ttu-id="65255-126">**ConfigurationModeFrequencyMins**: Reprezentuje częstotliwość (w minutach), w którym stosowanie DSC w tle próbuje zaimplementować bieżącą konfigurację w docelowym węźle.</span><span class="sxs-lookup"><span data-stu-id="65255-126">**ConfigurationModeFrequencyMins**: Represents the frequency (in minutes) at which the background application of DSC attempts to implement the current configuration on the target node.</span></span> <span data-ttu-id="65255-127">Wartość domyślna to 15.</span><span class="sxs-lookup"><span data-stu-id="65255-127">The default value is 15.</span></span> <span data-ttu-id="65255-128">Tę wartość można ustawić w połączeniu z trybów RefreshMode.</span><span class="sxs-lookup"><span data-stu-id="65255-128">This value can be set in conjunction with RefreshMode.</span></span> <span data-ttu-id="65255-129">Gdy trybów RefreshMode ŚCIĄGANIA węzeł docelowy kontaktuje się z usługą konfiguracji z interwałem ustawione przez RefreshFrequencyMins i pobiera bieżącą konfigurację.</span><span class="sxs-lookup"><span data-stu-id="65255-129">When RefreshMode is set to PULL, the target node contacts the configuration service at an interval set by RefreshFrequencyMins and downloads the current configuration.</span></span> <span data-ttu-id="65255-130">Niezależnie od wartości trybów RefreshMode interwałem ustawione przez ConfigurationModeFrequencyMins, aparat spójności ma zastosowanie najnowszą konfigurację, który został pobrany do węzła docelowego.</span><span class="sxs-lookup"><span data-stu-id="65255-130">Regardless of the RefreshMode value, at the interval set by ConfigurationModeFrequencyMins, the consistency engine applies the latest configuration that was downloaded to the target node.</span></span> <span data-ttu-id="65255-131">RefreshFrequencyMins powinien być ustawiony na liczbę całkowitą wielokrotnością ConfigurationModeFrequencyMins.</span><span class="sxs-lookup"><span data-stu-id="65255-131">RefreshFrequencyMins should be set to an integer multiple of ConfigurationModeFrequencyMins.</span></span>
- <span data-ttu-id="65255-132">**Poświadczenie**: Określa poświadczenia (podobnie jak w przypadku Get-Credential) wymagane do dostępu do zasobów zdalnych, takich jak skontaktować się z usługą konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="65255-132">**Credential**: Indicates credentials (as with Get-Credential) required to access remote resources, such as to contact the configuration service.</span></span>
- <span data-ttu-id="65255-133">**DownloadManagerCustomData**: Reprezentuje tablicę, która zawiera dane niestandardowe, które są specyficzne dla Menedżera pobierania.</span><span class="sxs-lookup"><span data-stu-id="65255-133">**DownloadManagerCustomData**: Represents an array that contains custom data specific to the download manager.</span></span>
- <span data-ttu-id="65255-134">**DownloadManagerName**: Wskazuje nazwę konfiguracji i Menedżer pobierania modułu.</span><span class="sxs-lookup"><span data-stu-id="65255-134">**DownloadManagerName**: Indicates the name of the configuration and module download manager.</span></span>
- <span data-ttu-id="65255-135">**RebootNodeIfNeeded**: Ustaw tę opcję na `$true` umożliwia zasobów do ponownego rozruchu przy użyciu węzła `$global:DSCMachineStatus` flagi.</span><span class="sxs-lookup"><span data-stu-id="65255-135">**RebootNodeIfNeeded**: Set this to `$true` to allow resources to reboot the Node using the `$global:DSCMachineStatus` flag.</span></span> <span data-ttu-id="65255-136">W przeciwnym razie trzeba będzie ręcznie wykonać ponowne uruchomienie węzła dla żadnej konfiguracji, który go wymaga.</span><span class="sxs-lookup"><span data-stu-id="65255-136">Otherwise, you will have to manually reboot the node for any configuration that requires it.</span></span> <span data-ttu-id="65255-137">Wartość domyślna to `$false`.</span><span class="sxs-lookup"><span data-stu-id="65255-137">The default value is `$false`.</span></span> <span data-ttu-id="65255-138">Aby użyć tego ustawienia, jeśli warunek jest ponowny rozruch jest wprowadzany przez coś innego niż DSC (np. Instalator Windows), należy połączyć to ustawienie za pomocą [xPendingReboot](https://github.com/powershell/xpendingreboot) modułu.</span><span class="sxs-lookup"><span data-stu-id="65255-138">To use this setting when a reboot condition is enacted by something other than DSC (such as Windows Installer), combine this setting with the [xPendingReboot](https://github.com/powershell/xpendingreboot) module.</span></span>
- <span data-ttu-id="65255-139">**RefreshFrequencyMins**: Używane podczas konfigurowania usługi ściągania.</span><span class="sxs-lookup"><span data-stu-id="65255-139">**RefreshFrequencyMins**: Used when you have set up a pull service.</span></span> <span data-ttu-id="65255-140">Reprezentuje częstotliwość (w minutach), w którym kontaktuje się usługi ściągania, aby pobrać bieżącą konfigurację programu Local Configuration Manager.</span><span class="sxs-lookup"><span data-stu-id="65255-140">Represents the frequency (in minutes) at which the Local Configuration Manager contacts a pull service to download the current configuration.</span></span> <span data-ttu-id="65255-141">Tę wartość można ustawić w połączeniu z ConfigurationModeFrequencyMins.</span><span class="sxs-lookup"><span data-stu-id="65255-141">This value can be set in conjunction with ConfigurationModeFrequencyMins.</span></span> <span data-ttu-id="65255-142">Gdy trybów RefreshMode ŚCIĄGANIA węzeł docelowy kontaktuje się z usługą ściągnięcia z interwałem ustawione przez RefreshFrequencyMins i pobiera bieżącą konfigurację.</span><span class="sxs-lookup"><span data-stu-id="65255-142">When RefreshMode is set to PULL, the target node contacts the pull service at an interval set by RefreshFrequencyMins and downloads the current configuration.</span></span> <span data-ttu-id="65255-143">Ustawione przez ConfigurationModeFrequencyMins interwałem aparatu spójności dotyczy najnowszą konfigurację, który został pobrany do węzła docelowego.</span><span class="sxs-lookup"><span data-stu-id="65255-143">At the interval set by ConfigurationModeFrequencyMins, the consistency engine then applies the latest configuration that was downloaded to the target node.</span></span> <span data-ttu-id="65255-144">Jeśli nie ustawiono RefreshFrequencyMins do liczby całkowitej wielokrotności ConfigurationModeFrequencyMins, system zaokrągli go.</span><span class="sxs-lookup"><span data-stu-id="65255-144">If RefreshFrequencyMins is not set to an integer multiple of ConfigurationModeFrequencyMins, the system will round it up.</span></span> <span data-ttu-id="65255-145">Wartość domyślna to 30.</span><span class="sxs-lookup"><span data-stu-id="65255-145">The default value is 30.</span></span>
- <span data-ttu-id="65255-146">**RefreshMode**: Możliwe wartości to **wypychania** (ustawienie domyślne) i **ściągnięcia**.</span><span class="sxs-lookup"><span data-stu-id="65255-146">**RefreshMode**: Possible values are **Push** (the default) and **Pull**.</span></span> <span data-ttu-id="65255-147">W konfiguracji "wypychania" należy umieścić plik konfiguracji na każdym węźle docelowym przy użyciu dowolnego komputera klienckiego.</span><span class="sxs-lookup"><span data-stu-id="65255-147">In the “push” configuration, you must place a configuration file on each target node, using any client computer.</span></span> <span data-ttu-id="65255-148">W trybie "pull" należy skonfigurować usługę ściągania dla lokalnego programu Configuration Manager skontaktować się i uzyskać dostęp do plików konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="65255-148">In the “pull” mode, you must set up a pull service for Local Configuration Manager to contact and access the configuration files.</span></span>

> [!NOTE]
> <span data-ttu-id="65255-149">Rozpoczyna się LCM **ConfigurationModeFrequencyMins** na podstawie cyklu:</span><span class="sxs-lookup"><span data-stu-id="65255-149">The LCM starts the **ConfigurationModeFrequencyMins** cycle based on:</span></span>
>
> - <span data-ttu-id="65255-150">Nowe metaconfig jest stosowany przy użyciu `Set-DscLocalConfigurationManager`</span><span class="sxs-lookup"><span data-stu-id="65255-150">A new metaconfig is applied using `Set-DscLocalConfigurationManager`</span></span>
> - <span data-ttu-id="65255-151">Ponowne uruchomienie komputera</span><span class="sxs-lookup"><span data-stu-id="65255-151">A machine restart</span></span>
>
> <span data-ttu-id="65255-152">Aby uzyskać dowolny warunek, gdzie proces czasomierza napotyka awarii, który zostanie wykryty w ciągu 30 sekund, a cykl zostanie ponownie uruchomiona.</span><span class="sxs-lookup"><span data-stu-id="65255-152">For any condition where the timer process experiences a crash, that will be detected within 30 seconds and the cycle will be restarted.</span></span>
> <span data-ttu-id="65255-153">Operacja współbieżna może opóźnić cyklu z pracę, jeśli czas trwania tej operacji przekracza częstotliwość cyklu skonfigurowany, następnym czasomierza nie zostanie uruchomiona.</span><span class="sxs-lookup"><span data-stu-id="65255-153">A concurrent operation could delay the cycle from being started, if the duration of this operation exceeds the configured cycle frequency, the next timer will not start.</span></span>
>
> <span data-ttu-id="65255-154">Przykład metaconfig jest skonfigurowany z częstotliwością co 15 min ściągania i ściąganie odbywa się T1.</span><span class="sxs-lookup"><span data-stu-id="65255-154">Example, the metaconfig is configured at a 15 minute pull frequency and a pull occurs at T1.</span></span>  <span data-ttu-id="65255-155">Węzeł nie zakończy pracę dla 16 w ciągu kilku minut.</span><span class="sxs-lookup"><span data-stu-id="65255-155">The Node does not finish work for 16 minutes.</span></span>  <span data-ttu-id="65255-156">Pierwszy cykl 15 minut jest ignorowana, a następnego ściągania nastąpi T1 + 15 + 15.</span><span class="sxs-lookup"><span data-stu-id="65255-156">The first 15 minute cycle is ignored, and next pull will happen at T1+15+15.</span></span>

### <a name="example-of-updating-local-configuration-manager-settings"></a><span data-ttu-id="65255-157">Przykład aktualizowanie ustawień Local Configuration Manager</span><span class="sxs-lookup"><span data-stu-id="65255-157">Example of updating Local Configuration Manager settings</span></span>

<span data-ttu-id="65255-158">Możesz zaktualizować ustawienia Local Configuration Manager z węzłem docelowym, w tym **LocalConfigurationManager** block wewnątrz bloku węzła w skrypcie konfiguracji, jak pokazano w poniższym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="65255-158">You can update the Local Configuration Manager settings of a target node by including a **LocalConfigurationManager** block inside the node block in a configuration script, as shown in the following example.</span></span>

```powershell
Configuration ExampleConfig
{
    Node “Server001”
    {
        LocalConfigurationManager
        {
            ConfigurationID = "646e48cb-3082-4a12-9fd9-f71b9a562d4e"
            ConfigurationModeFrequencyMins = 45
            ConfigurationMode = "ApplyAndAutocorrect"
            RefreshMode = "Pull"
            RefreshFrequencyMins = 90
            DownloadManagerName = "WebDownloadManager"
            DownloadManagerCustomData = (@{ServerUrl="https://$PullService/psdscpullserver.svc"})
            CertificateID = "71AA68562316FE3F73536F1096B85D66289ED60E"
            Credential = $cred
            RebootNodeIfNeeded = $true
            AllowModuleOverwrite = $false
        }
# One or more resource blocks can be added here
    }
}

# The following line invokes the configuration and creates a file called Server001.meta.mof at the specified path
ExampleConfig -OutputPath "c:\users\public\dsc"
```

<span data-ttu-id="65255-159">Uruchomienie skryptu w poprzednim przykładzie generuje plik MOF, który określa i przechowuje odpowiednie ustawienia.</span><span class="sxs-lookup"><span data-stu-id="65255-159">Running the script in the previous example generates a MOF file that specifies and stores the desired settings.</span></span>
<span data-ttu-id="65255-160">Aby zastosować ustawienia, można użyć **Set-DscLocalConfigurationManager** polecenia cmdlet, jak pokazano w poniższym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="65255-160">To apply the settings, you can use the **Set-DscLocalConfigurationManager** cmdlet, as shown in the following example.</span></span>

```powershell
Set-DscLocalConfigurationManager -Path "c:\users\public\dsc"
```

> [!NOTE]
> <span data-ttu-id="65255-161">Dla **ścieżki** parametr należy określić taką samą ścieżkę, który został określony dla **OutputPath** parametru po wywołaniu konfiguracji w poprzednim przykładzie.</span><span class="sxs-lookup"><span data-stu-id="65255-161">For the **Path** parameter, you must specify the same path that you specified for the **OutputPath** parameter when you invoked the configuration in the previous example.</span></span>

<span data-ttu-id="65255-162">Aby wyświetlić bieżące ustawienia Local Configuration Manager, można użyć **Get-DscLocalConfigurationManager** polecenia cmdlet.</span><span class="sxs-lookup"><span data-stu-id="65255-162">To see the current Local Configuration Manager settings, you can use the **Get-DscLocalConfigurationManager** cmdlet.</span></span>
<span data-ttu-id="65255-163">Jeśli wywołujesz tego polecenia cmdlet bez parametrów, domyślnie go otrzyma ustawienia Local Configuration Manager dla węzła, na którym zostanie uruchomiona.</span><span class="sxs-lookup"><span data-stu-id="65255-163">If you invoke this cmdlet with no parameters, by default it will get the Local Configuration Manager settings for the node on which you run it.</span></span>
<span data-ttu-id="65255-164">Aby określić inny węzeł, użyj **CimSession** parametru za pomocą tego polecenia cmdlet.</span><span class="sxs-lookup"><span data-stu-id="65255-164">To specify another node, use the **CimSession** parameter with this cmdlet.</span></span>

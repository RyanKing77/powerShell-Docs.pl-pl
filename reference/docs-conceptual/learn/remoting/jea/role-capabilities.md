---
ms.date: 07/10/2019
keywords: jea, PowerShell, zabezpieczenia
title: Możliwości roli JEA
ms.openlocfilehash: 7191b90e198ffb539da6870a8ddc3e449ad9e8ae
ms.sourcegitcommit: e894ed833cef57967cdaf002f8c883f66864e836
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/25/2019
ms.locfileid: "70017958"
---
# <a name="jea-role-capabilities"></a><span data-ttu-id="495ae-103">Możliwości roli JEA</span><span class="sxs-lookup"><span data-stu-id="495ae-103">JEA Role Capabilities</span></span>

<span data-ttu-id="495ae-104">Podczas tworzenia punktu końcowego JEA należy zdefiniować co najmniej jedną funkcję roli opisującą, co ktoś może wykonać w sesji JEA.</span><span class="sxs-lookup"><span data-stu-id="495ae-104">When creating a JEA endpoint, you need to define one or more role capabilities that describe what someone can do in a JEA session.</span></span> <span data-ttu-id="495ae-105">Funkcja roli to plik danych programu PowerShell z `.psrc` rozszerzeniem, które zawiera listę wszystkich poleceń cmdlet, funkcji, dostawców i zewnętrznych programów, które są dostępne do łączenia użytkowników.</span><span class="sxs-lookup"><span data-stu-id="495ae-105">A role capability is a PowerShell data file with the `.psrc` extension that lists all the cmdlets, functions, providers, and external programs that are made available to connecting users.</span></span>

## <a name="determine-which-commands-to-allow"></a><span data-ttu-id="495ae-106">Określanie poleceń, które mają być dozwolone</span><span class="sxs-lookup"><span data-stu-id="495ae-106">Determine which commands to allow</span></span>

<span data-ttu-id="495ae-107">Pierwszym krokiem tworzenia pliku możliwości roli jest rozważenie, do czego użytkownicy potrzebują dostępu.</span><span class="sxs-lookup"><span data-stu-id="495ae-107">The first step in creating a role capability file is to consider what the users need access to.</span></span> <span data-ttu-id="495ae-108">Proces zbierania wymagań może zająć trochę czasu, ale jest to ważny proces.</span><span class="sxs-lookup"><span data-stu-id="495ae-108">The requirements gathering process can take a while, but it's an important process.</span></span> <span data-ttu-id="495ae-109">Umożliwienie użytkownikom dostępu do zbyt małej liczby poleceń cmdlet i funkcji może uniemożliwić im ich przeprowadzenie.</span><span class="sxs-lookup"><span data-stu-id="495ae-109">Giving users access to too few cmdlets and functions can prevent them from getting their job done.</span></span> <span data-ttu-id="495ae-110">Zezwalanie na dostęp za dużo poleceń cmdlet i funkcji może pozwolić użytkownikom na wykonywanie więcej niż zamierzonych i osłabionych zasobów zakresie zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="495ae-110">Allowing access to too many cmdlets and functions can allow users to do more than you intended and weaken your security stance.</span></span>

<span data-ttu-id="495ae-111">Sposób działania tego procesu zależy od organizacji i celów.</span><span class="sxs-lookup"><span data-stu-id="495ae-111">How you go about this process depends on your organization and goals.</span></span> <span data-ttu-id="495ae-112">Poniższe porady mogą pomóc upewnić się, że jesteś w odpowiedniej ścieżce.</span><span class="sxs-lookup"><span data-stu-id="495ae-112">The following tips can help ensure you're on the right path.</span></span>

1. <span data-ttu-id="495ae-113">**Zidentyfikuj** polecenia używane przez użytkowników w celu uzyskania zadań.</span><span class="sxs-lookup"><span data-stu-id="495ae-113">**Identify** the commands users are using to get their jobs done.</span></span> <span data-ttu-id="495ae-114">Może to wiązać się z badaniem pracowników działu IT, sprawdzaniem skryptów automatyzacji lub analizowaniem i dzienników sesji programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="495ae-114">This may involve surveying IT staff, checking automation scripts, or analyzing PowerShell session transcripts and logs.</span></span>
2. <span data-ttu-id="495ae-115">**Zaktualizuj** użycie narzędzi wiersza polecenia do odpowiedników programu PowerShell, tam gdzie to możliwe, w celu uzyskania najlepszej inspekcji i środowiska dostosowania jea.</span><span class="sxs-lookup"><span data-stu-id="495ae-115">**Update** use of command-line tools to PowerShell equivalents, where possible, for the best auditing and JEA customization experience.</span></span> <span data-ttu-id="495ae-116">Programy zewnętrzne nie mogą być ograniczone jako natywne polecenia cmdlet programu PowerShell i funkcje w programie JEA.</span><span class="sxs-lookup"><span data-stu-id="495ae-116">External programs can't be constrained as granularly as native PowerShell cmdlets and functions in JEA.</span></span>
3. <span data-ttu-id="495ae-117">**Ogranicz** zakres poleceń cmdlet, aby zezwalać tylko na określone wartości parametrów lub parametrów.</span><span class="sxs-lookup"><span data-stu-id="495ae-117">**Restrict** the scope of the cmdlets to only allow specific parameters or parameter values.</span></span> <span data-ttu-id="495ae-118">Jest to szczególnie ważne, jeśli użytkownicy powinni zarządzać tylko częścią systemu.</span><span class="sxs-lookup"><span data-stu-id="495ae-118">This is especially important if users should manage only part of a system.</span></span>
4. <span data-ttu-id="495ae-119">**Utwórz** funkcje niestandardowe, aby zamienić złożone polecenia lub polecenia, które są trudne do ograniczenia w jea.</span><span class="sxs-lookup"><span data-stu-id="495ae-119">**Create** custom functions to replace complex commands or commands that are difficult to constrain in JEA.</span></span> <span data-ttu-id="495ae-120">Prosta funkcja, która otacza złożone polecenie lub stosuje dodatkową logikę walidacji, może oferować dodatkową kontrolę dla administratorów i prostoty użytkowników końcowych.</span><span class="sxs-lookup"><span data-stu-id="495ae-120">A simple function that wraps a complex command or applies additional validation logic can offer additional control for admins and end-user simplicity.</span></span>
5. <span data-ttu-id="495ae-121">**Przetestuj** listę zakresów dozwolonych poleceń użytkownikom lub usług Automation, a następnie dostosuj je w razie potrzeby.</span><span class="sxs-lookup"><span data-stu-id="495ae-121">**Test** the scoped list of allowable commands with your users or automation services, and adjust as necessary.</span></span>

### <a name="examples-of-potentially-dangerous-commands"></a><span data-ttu-id="495ae-122">Przykłady potencjalnie niebezpiecznych poleceń</span><span class="sxs-lookup"><span data-stu-id="495ae-122">Examples of potentially dangerous commands</span></span>

<span data-ttu-id="495ae-123">Ostrożne wybieranie poleceń jest ważne, aby zapewnić, że punkt końcowy JEA nie zezwoli użytkownikowi na podniesienie uprawnień.</span><span class="sxs-lookup"><span data-stu-id="495ae-123">Careful selection of commands is important to ensure the JEA endpoint doesn't allow the user to elevate their permissions.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="495ae-124">Podstawowe informacje wymagane do successCommands użytkownika w sesji JEA są często uruchamiane z podniesionymi uprawnieniami.</span><span class="sxs-lookup"><span data-stu-id="495ae-124">Essential information required for user successCommands in a JEA session are often run with elevated privileges.</span></span>

<span data-ttu-id="495ae-125">Poniższa tabela zawiera przykłady poleceń, które mogą być używane złośliwie, jeśli są dozwolone w stanie nieograniczonym.</span><span class="sxs-lookup"><span data-stu-id="495ae-125">The following table contains examples of commands that can be used maliciously if allowed in an unconstrained state.</span></span> <span data-ttu-id="495ae-126">Nie jest to pełna lista i powinna być używana tylko jako ostrożny punkt wyjścia.</span><span class="sxs-lookup"><span data-stu-id="495ae-126">This isn't an exhaustive list and should only be used as a cautionary starting point.</span></span>

|                                            <span data-ttu-id="495ae-127">Ryzyko</span><span class="sxs-lookup"><span data-stu-id="495ae-127">Risk</span></span>                                            |                                <span data-ttu-id="495ae-128">Przykład</span><span class="sxs-lookup"><span data-stu-id="495ae-128">Example</span></span>                                |                                                                              <span data-ttu-id="495ae-129">Powiązane polecenia</span><span class="sxs-lookup"><span data-stu-id="495ae-129">Related commands</span></span>                                                                              |
| ------------------------------------------------------------------------------------------ | --------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <span data-ttu-id="495ae-130">Przyznawanie uprawnień administratora łączącego użytkownika w celu obejścia JEA</span><span class="sxs-lookup"><span data-stu-id="495ae-130">Granting the connecting user admin privileges to bypass JEA</span></span>                                | `Add-LocalGroupMember -Member 'CONTOSO\jdoe' -Group 'Administrators'` | <span data-ttu-id="495ae-131">`Add-ADGroupMember`, `Add-LocalGroupMember`, `net.exe`, `dsadd.exe`</span><span class="sxs-lookup"><span data-stu-id="495ae-131">`Add-ADGroupMember`, `Add-LocalGroupMember`, `net.exe`, `dsadd.exe`</span></span>                                                                                                        |
| <span data-ttu-id="495ae-132">Uruchamianie dowolnego kodu, takiego jak złośliwe oprogramowanie, luki w zabezpieczeniach lub skrypty niestandardowe w celu obejścia ochrony</span><span class="sxs-lookup"><span data-stu-id="495ae-132">Running arbitrary code, such as malware, exploits, or custom scripts to bypass protections</span></span> | `Start-Process -FilePath '\\san\share\malware.exe'`                   | <span data-ttu-id="495ae-133">`Start-Process`, `New-Service`, `Invoke-Item`, `Invoke-WmiMethod`, `Invoke-CimMethod`, `Invoke-Expression`, `Invoke-Command`, `New-ScheduledTask`, `Register-ScheduledJob`</span><span class="sxs-lookup"><span data-stu-id="495ae-133">`Start-Process`, `New-Service`, `Invoke-Item`, `Invoke-WmiMethod`, `Invoke-CimMethod`, `Invoke-Expression`, `Invoke-Command`, `New-ScheduledTask`, `Register-ScheduledJob`</span></span> |

## <a name="create-a-role-capability-file"></a><span data-ttu-id="495ae-134">Utwórz plik możliwości roli</span><span class="sxs-lookup"><span data-stu-id="495ae-134">Create a role capability file</span></span>

<span data-ttu-id="495ae-135">Nowy plik możliwości roli programu PowerShell można utworzyć za pomocą polecenia cmdlet [New-PSRoleCapabilityFile](/powershell/module/microsoft.powershell.core/new-psrolecapabilityfile?view=powershell-6) .</span><span class="sxs-lookup"><span data-stu-id="495ae-135">You can create a new PowerShell role capability file with the [New-PSRoleCapabilityFile](/powershell/module/microsoft.powershell.core/new-psrolecapabilityfile?view=powershell-6) cmdlet.</span></span>

```powershell
New-PSRoleCapabilityFile -Path .\MyFirstJEARole.psrc
```

<span data-ttu-id="495ae-136">Otrzymany plik możliwości roli powinien być edytowany w celu zezwalania na polecenia wymagane przez rolę.</span><span class="sxs-lookup"><span data-stu-id="495ae-136">The resulting role capability file should be edited to allow the commands required for the role.</span></span> <span data-ttu-id="495ae-137">Dokumentacja pomocy programu PowerShell zawiera kilka przykładów, jak można skonfigurować plik.</span><span class="sxs-lookup"><span data-stu-id="495ae-137">The PowerShell help documentation contains several examples of how you can configure the file.</span></span>

### <a name="allowing-powershell-cmdlets-and-functions"></a><span data-ttu-id="495ae-138">Zezwalanie na polecenia cmdlet i funkcje programu PowerShell</span><span class="sxs-lookup"><span data-stu-id="495ae-138">Allowing PowerShell cmdlets and functions</span></span>

<span data-ttu-id="495ae-139">Aby autoryzować użytkowników do uruchamiania poleceń cmdlet lub funkcji programu PowerShell, Dodaj polecenie cmdlet lub nazwę funkcji do pól VisibleCmdlets lub VisibleFunctions.</span><span class="sxs-lookup"><span data-stu-id="495ae-139">To authorize users to run PowerShell cmdlets or functions, add the cmdlet or function name to the VisibleCmdlets or VisibleFunctions fields.</span></span> <span data-ttu-id="495ae-140">Jeśli nie masz pewności, czy polecenie jest poleceniu cmdlet lub funkcji, możesz uruchomić `Get-Command <name>` i sprawdzić Właściwość **CommandType** w danych wyjściowych.</span><span class="sxs-lookup"><span data-stu-id="495ae-140">If you aren't sure whether a command is a cmdlet or function, you can run `Get-Command <name>` and check the **CommandType** property in the output.</span></span>

```powershell
VisibleCmdlets = 'Restart-Computer', 'Get-NetIPAddress'
```

<span data-ttu-id="495ae-141">Czasami zakres konkretnego polecenia cmdlet lub funkcji jest zbyt szeroki dla potrzeb użytkowników.</span><span class="sxs-lookup"><span data-stu-id="495ae-141">Sometimes the scope of a specific cmdlet or function is too broad for your users' needs.</span></span> <span data-ttu-id="495ae-142">Administrator DNS, na przykład, prawdopodobnie potrzebuje tylko dostępu do ponownego uruchomienia usługi DNS.</span><span class="sxs-lookup"><span data-stu-id="495ae-142">A DNS admin, for example, probably only needs access to restart the DNS service.</span></span> <span data-ttu-id="495ae-143">W środowiskach z wieloma dzierżawcami dzierżawca ma dostęp do samoobsługowego narzędzia do zarządzania.</span><span class="sxs-lookup"><span data-stu-id="495ae-143">In multi-tenant environments, tenants have access to self-service management tools.</span></span> <span data-ttu-id="495ae-144">Dzierżawy powinny być ograniczone do zarządzania własnymi zasobami.</span><span class="sxs-lookup"><span data-stu-id="495ae-144">Tenants should be limited to managing their own resources.</span></span> <span data-ttu-id="495ae-145">W takich przypadkach można ograniczyć parametry, które są udostępniane przez polecenie cmdlet lub funkcję.</span><span class="sxs-lookup"><span data-stu-id="495ae-145">For these cases, you can restrict which parameters are exposed from the cmdlet or function.</span></span>

```powershell
VisibleCmdlets = @{ Name = 'Restart-Computer'; Parameters = @{ Name = 'Name' }}
```

<span data-ttu-id="495ae-146">W bardziej zaawansowanych scenariuszach może być również konieczne ograniczenie wartości, które mogą być używane przez użytkownika z tymi parametrami.</span><span class="sxs-lookup"><span data-stu-id="495ae-146">In more advanced scenarios, you may also need to restrict the values a user may use with these parameters.</span></span> <span data-ttu-id="495ae-147">Możliwości roli umożliwiają zdefiniowanie zestawu wartości lub wzorca wyrażenia regularnego, który określa, jakie dane wejściowe są dozwolone.</span><span class="sxs-lookup"><span data-stu-id="495ae-147">Role capabilities let you define a set of values or a regular expression pattern that determine what input is allowed.</span></span>

```powershell
VisibleCmdlets = @{ Name = 'Restart-Service'; Parameters = @{ Name = 'Name'; ValidateSet = 'Dns', 'Spooler' }},
                 @{ Name = 'Start-Website'; Parameters = @{ Name = 'Name'; ValidatePattern = 'HR_*' }}
```

> [!NOTE]
> <span data-ttu-id="495ae-148">[Typowe parametry programu PowerShell](/powershell/module/microsoft.powershell.core/about/about_commonparameters) są zawsze dozwolone, nawet w przypadku ograniczenia dostępnych parametrów.</span><span class="sxs-lookup"><span data-stu-id="495ae-148">The [common PowerShell parameters](/powershell/module/microsoft.powershell.core/about/about_commonparameters) are always allowed, even if you restrict the available parameters.</span></span>
> <span data-ttu-id="495ae-149">Nie należy jawnie wystawić ich w polu Parameters.</span><span class="sxs-lookup"><span data-stu-id="495ae-149">You should not explicitly list them in the Parameters field.</span></span>

<span data-ttu-id="495ae-150">W poniższej tabeli opisano różne sposoby dostosowywania widocznego polecenia cmdlet lub funkcji.</span><span class="sxs-lookup"><span data-stu-id="495ae-150">The table below describes the various ways you can customize a visible cmdlet or function.</span></span>
<span data-ttu-id="495ae-151">Możesz mieszać i dopasować dowolne z poniższych wartości w polu **VisibleCmdlets** .</span><span class="sxs-lookup"><span data-stu-id="495ae-151">You can mix and match any of the below in the **VisibleCmdlets** field.</span></span>

|                                           <span data-ttu-id="495ae-152">Przykład</span><span class="sxs-lookup"><span data-stu-id="495ae-152">Example</span></span>                                           |                                                             <span data-ttu-id="495ae-153">Przypadek użycia</span><span class="sxs-lookup"><span data-stu-id="495ae-153">Use case</span></span>                                                              |
| ------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------- |
| <span data-ttu-id="495ae-154">`'My-Func'` lub `@{ Name = 'My-Func' }`</span><span class="sxs-lookup"><span data-stu-id="495ae-154">`'My-Func'` or `@{ Name = 'My-Func' }`</span></span>                                                      | <span data-ttu-id="495ae-155">Zezwala użytkownikowi na uruchamianie `My-Func` bez żadnych ograniczeń dotyczących parametrów.</span><span class="sxs-lookup"><span data-stu-id="495ae-155">Allows the user to run `My-Func` without any restrictions on the parameters.</span></span>                                                      |
| `'MyModule\My-Func'`                                                                        | <span data-ttu-id="495ae-156">Zezwala użytkownikowi na uruchamianie `My-Func` z modułu `MyModule` bez żadnych ograniczeń dotyczących parametrów.</span><span class="sxs-lookup"><span data-stu-id="495ae-156">Allows the user to run `My-Func` from the module `MyModule` without any restrictions on the parameters.</span></span>                           |
| `'My-*'`                                                                                    | <span data-ttu-id="495ae-157">Zezwala użytkownikowi na uruchamianie dowolnego polecenia cmdlet lub funkcji przy użyciu zlecenia `My`.</span><span class="sxs-lookup"><span data-stu-id="495ae-157">Allows the user to run any cmdlet or function with the verb `My`.</span></span>                                                                 |
| `'*-Func'`                                                                                  | <span data-ttu-id="495ae-158">Zezwala użytkownikowi na uruchamianie dowolnego polecenia cmdlet lub funkcji z rzeczownikiem `Func`.</span><span class="sxs-lookup"><span data-stu-id="495ae-158">Allows the user to run any cmdlet or function with the noun `Func`.</span></span>                                                               |
| `@{ Name = 'My-Func'; Parameters = @{ Name = 'Param1'}, @{ Name = 'Param2' }}`              | <span data-ttu-id="495ae-159">Zezwala użytkownikowi na uruchamianie `My-Func` `Param1` z parametrami i `Param2` .</span><span class="sxs-lookup"><span data-stu-id="495ae-159">Allows the user to run `My-Func` with the `Param1` and `Param2` parameters.</span></span> <span data-ttu-id="495ae-160">Dowolna wartość może zostać dostarczona do parametrów.</span><span class="sxs-lookup"><span data-stu-id="495ae-160">Any value can be supplied to the parameters.</span></span>          |
| `@{ Name = 'My-Func'; Parameters = @{ Name = 'Param1'; ValidateSet = 'Value1', 'Value2' }}` | <span data-ttu-id="495ae-161">Zezwala użytkownikowi na uruchamianie `My-Func` `Param1` z parametrem.</span><span class="sxs-lookup"><span data-stu-id="495ae-161">Allows the user to run `My-Func` with the `Param1` parameter.</span></span> <span data-ttu-id="495ae-162">Do parametru można podać tylko parametry "wartość1" i "wartość2".</span><span class="sxs-lookup"><span data-stu-id="495ae-162">Only "Value1" and "Value2" can be supplied to the parameter.</span></span>        |
| `@{ Name = 'My-Func'; Parameters = @{ Name = 'Param1'; ValidatePattern = 'contoso.*' }}`    | <span data-ttu-id="495ae-163">Zezwala użytkownikowi na uruchamianie `My-Func` `Param1` z parametrem.</span><span class="sxs-lookup"><span data-stu-id="495ae-163">Allows the user to run `My-Func` with the `Param1` parameter.</span></span> <span data-ttu-id="495ae-164">Wszystkie wartości zaczynające się od "contoso" można dostarczyć do parametru.</span><span class="sxs-lookup"><span data-stu-id="495ae-164">Any value starting with "contoso" can be supplied to the parameter.</span></span> |

> [!WARNING]
> <span data-ttu-id="495ae-165">W celu uzyskania najlepszych praktyk w zakresie zabezpieczeń nie zaleca się używania symboli wieloznacznych podczas definiowania widocznych poleceń cmdlet lub funkcji.</span><span class="sxs-lookup"><span data-stu-id="495ae-165">For best security practices, it is not recommended to use wildcards when defining visible cmdlets or functions.</span></span> <span data-ttu-id="495ae-166">Zamiast tego należy jawnie wyświetlić każde zaufane polecenie, aby upewnić się, że żadne inne polecenia, które współużytkują ten sam schemat nazewnictwa, nie są celowo autoryzowane.</span><span class="sxs-lookup"><span data-stu-id="495ae-166">Instead, you should explicitly list each trusted command to ensure no other commands that share the same naming scheme are unintentionally authorized.</span></span>

<span data-ttu-id="495ae-167">Nie można zastosować zarówno **ValidatePattern** , jak i **ValidateSet** do tego samego polecenia cmdlet lub funkcji.</span><span class="sxs-lookup"><span data-stu-id="495ae-167">You can't apply both a **ValidatePattern** and **ValidateSet** to the same cmdlet or function.</span></span>

<span data-ttu-id="495ae-168">Jeśli to zrobisz, **ValidatePattern** zastępuje **ValidateSet**.</span><span class="sxs-lookup"><span data-stu-id="495ae-168">If you do, the **ValidatePattern** overrides the **ValidateSet**.</span></span>

<span data-ttu-id="495ae-169">Aby uzyskać więcej informacji na temat **ValidatePattern**, zapoznaj się z wpisem " [ *Hej, Scripting Guy!* post](https://devblogs.microsoft.com/scripting/validate-powershell-parameters-before-running-the-script/) i zawartością referencyjną [wyrażeń regularnych programu PowerShell](/powershell/module/microsoft.powershell.core/about/about_regular_expressions) .</span><span class="sxs-lookup"><span data-stu-id="495ae-169">For more information about **ValidatePattern**, check out [this *Hey, Scripting Guy!* post](https://devblogs.microsoft.com/scripting/validate-powershell-parameters-before-running-the-script/) and the [PowerShell Regular Expressions](/powershell/module/microsoft.powershell.core/about/about_regular_expressions) reference content.</span></span>

### <a name="allowing-external-commands-and-powershell-scripts"></a><span data-ttu-id="495ae-170">Zezwalanie na polecenia zewnętrzne i skrypty programu PowerShell</span><span class="sxs-lookup"><span data-stu-id="495ae-170">Allowing external commands and PowerShell scripts</span></span>

<span data-ttu-id="495ae-171">Aby umożliwić użytkownikom uruchamianie plików wykonywalnych i skryptów programu PowerShell (. ps1) w sesji JEA, należy dodać pełną ścieżkę do każdego programu w polu **VisibleExternalCommands** .</span><span class="sxs-lookup"><span data-stu-id="495ae-171">To allow users to run executables and PowerShell scripts (.ps1) in a JEA session, you have to add the full path to each program in the **VisibleExternalCommands** field.</span></span>

```powershell
VisibleExternalCommands = 'C:\Windows\System32\whoami.exe', 'C:\Program Files\Contoso\Scripts\UpdateITSoftware.ps1'
```

<span data-ttu-id="495ae-172">Tam, gdzie to możliwe, aby użyć polecenia cmdlet programu PowerShell lub odpowiedników funkcji dla wszystkich zewnętrznych plików wykonywalnych autoryzowanych od czasu, gdy masz kontrolę nad parametrami dozwolonymi przy użyciu poleceń cmdlet i funkcji programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="495ae-172">Where possible, to use PowerShell cmdlet or function equivalents for any external executables you authorize since you have control over the parameters allowed with PowerShell cmdlets and functions.</span></span>

<span data-ttu-id="495ae-173">Wiele plików wykonywalnych pozwala odczytać bieżący stan, a następnie zmienić go przez podanie różnych parametrów.</span><span class="sxs-lookup"><span data-stu-id="495ae-173">Many executables allow you to read the current state and then change it by providing different parameters.</span></span>

<span data-ttu-id="495ae-174">Rozważmy na przykład rolę administratora serwera plików, który zarządza udziałami sieciowymi hostowanymi w systemie.</span><span class="sxs-lookup"><span data-stu-id="495ae-174">For example, consider the role of a file server admin that manages network shares hosted on a system.</span></span> <span data-ttu-id="495ae-175">Jednym ze sposobów zarządzania udziałami jest użycie `net share`.</span><span class="sxs-lookup"><span data-stu-id="495ae-175">One way of managing shares is to use `net share`.</span></span> <span data-ttu-id="495ae-176">Jednak umożliwienie programu **net. exe** jest niebezpieczne, ponieważ użytkownik może użyć polecenia, aby uzyskać uprawnienia administratora `net group Administrators unprivilegedjeauser /add`w programie.</span><span class="sxs-lookup"><span data-stu-id="495ae-176">However, allowing **net.exe** is dangerous because the user could use the command to gain admin privileges with `net group Administrators unprivilegedjeauser /add`.</span></span> <span data-ttu-id="495ae-177">Bezpieczniejszym rozwiązaniem jest umożliwienie [Get-SmbShare](/powershell/module/smbshare/get-smbshare), która osiąga ten sam wynik, ale ma znacznie bardziej ograniczony zakres.</span><span class="sxs-lookup"><span data-stu-id="495ae-177">A more secure option is to allow [Get-SmbShare](/powershell/module/smbshare/get-smbshare), which achieves the same result but has a much more limited scope.</span></span>

<span data-ttu-id="495ae-178">Podczas udostępniania poleceń zewnętrznych użytkownikom w sesji JEA należy zawsze określić pełną ścieżkę do pliku wykonywalnego.</span><span class="sxs-lookup"><span data-stu-id="495ae-178">When making external commands available to users in a JEA session, always specify the complete path to the executable.</span></span> <span data-ttu-id="495ae-179">Zapobiega to wykonywaniu podobnych i potencjalnie złośliwych programów, które znajdują się w innym miejscu w systemie.</span><span class="sxs-lookup"><span data-stu-id="495ae-179">This prevents the execution of similarly named and potentially malicious programs located elsewhere on the system.</span></span>

### <a name="allowing-access-to-powershell-providers"></a><span data-ttu-id="495ae-180">Zezwalanie na dostęp do dostawców programu PowerShell</span><span class="sxs-lookup"><span data-stu-id="495ae-180">Allowing access to PowerShell providers</span></span>

<span data-ttu-id="495ae-181">Domyślnie żaden dostawca programu PowerShell nie jest dostępny w sesjach JEA.</span><span class="sxs-lookup"><span data-stu-id="495ae-181">By default, no PowerShell providers are available in JEA sessions.</span></span> <span data-ttu-id="495ae-182">Zmniejsza to ryzyko, że informacje poufne i ustawienia konfiguracji są ujawniane użytkownikowi nawiązującemu połączenie.</span><span class="sxs-lookup"><span data-stu-id="495ae-182">This reduces the risk of sensitive information and configuration settings being disclosed to the connecting user.</span></span>

<span data-ttu-id="495ae-183">W razie potrzeby można zezwolić na dostęp do dostawców programu PowerShell przy użyciu `VisibleProviders` polecenia.</span><span class="sxs-lookup"><span data-stu-id="495ae-183">When necessary, you can allow access to the PowerShell providers using the `VisibleProviders` command.</span></span> <span data-ttu-id="495ae-184">Aby uzyskać pełną listę dostawców, uruchom `Get-PSProvider`polecenie.</span><span class="sxs-lookup"><span data-stu-id="495ae-184">For a full list of providers, run `Get-PSProvider`.</span></span>

```powershell
VisibleProviders = 'Registry'
```

<span data-ttu-id="495ae-185">W przypadku prostych zadań, które wymagają dostępu do systemu plików, rejestru, magazynu certyfikatów lub innych wrażliwych dostawców, należy rozważyć zapisanie niestandardowej funkcji, która współpracuje z dostawcą w imieniu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="495ae-185">For simple tasks that require access to the file system, registry, certificate store, or other sensitive providers, consider writing a custom function that works with the provider on the user's behalf.</span></span> <span data-ttu-id="495ae-186">Funkcje, polecenia cmdlet i programy zewnętrzne dostępne w sesji JEA nie podlegają takim samym ograniczeniom jak JEA.</span><span class="sxs-lookup"><span data-stu-id="495ae-186">The functions, cmdlets, and external programs available in a JEA session aren't subject to the same constraints as JEA.</span></span> <span data-ttu-id="495ae-187">Domyślnie mają dostęp do dowolnego dostawcy.</span><span class="sxs-lookup"><span data-stu-id="495ae-187">They can access any provider by default.</span></span> <span data-ttu-id="495ae-188">Należy również rozważyć użycie [dysku użytkownika](session-configurations.md#user-drive) podczas kopiowania plików do lub z punktu końcowego jea.</span><span class="sxs-lookup"><span data-stu-id="495ae-188">Also consider using the [user drive](session-configurations.md#user-drive) when copying files to or from a JEA endpoint is required.</span></span>

### <a name="creating-custom-functions"></a><span data-ttu-id="495ae-189">Tworzenie funkcji niestandardowych</span><span class="sxs-lookup"><span data-stu-id="495ae-189">Creating custom functions</span></span>

<span data-ttu-id="495ae-190">Możesz tworzyć niestandardowe funkcje w pliku możliwości roli, aby uprościć złożone zadania dla użytkowników końcowych.</span><span class="sxs-lookup"><span data-stu-id="495ae-190">You can author custom functions in a role capability file to simplify complex tasks for your end users.</span></span> <span data-ttu-id="495ae-191">Funkcje niestandardowe są również przydatne, gdy wymagana jest zaawansowana logika walidacji dla wartości parametrów polecenia cmdlet.</span><span class="sxs-lookup"><span data-stu-id="495ae-191">Custom functions are also useful when you require advanced validation logic for cmdlet parameter values.</span></span> <span data-ttu-id="495ae-192">Proste funkcje można napisać w polu **FunctionDefinitions** :</span><span class="sxs-lookup"><span data-stu-id="495ae-192">You can write simple functions in the **FunctionDefinitions** field:</span></span>

```powershell
VisibleFunctions = 'Get-TopProcess'

FunctionDefinitions = @{
    Name = 'Get-TopProcess'

    ScriptBlock = {
        param($Count = 10)

        Get-Process | Sort-Object -Property CPU -Descending |
            Microsoft.PowerShell.Utility\Select-Object -First $Count
    }
}
```

> [!IMPORTANT]
> <span data-ttu-id="495ae-193">Nie zapomnij dodać nazwy funkcji niestandardowych do pola **VisibleFunctions** , aby mogły być uruchamiane przez użytkowników jea.</span><span class="sxs-lookup"><span data-stu-id="495ae-193">Don't forget to add the name of your custom functions to the **VisibleFunctions** field so they can be run by the JEA users.</span></span>

<span data-ttu-id="495ae-194">Treść (blok skryptu) funkcji niestandardowych jest uruchamiana w domyślnym trybie języka dla systemu i nie podlega ograniczeniom języka JEA.</span><span class="sxs-lookup"><span data-stu-id="495ae-194">The body (script block) of custom functions runs in the default language mode for the system and isn't subject to JEA's language constraints.</span></span> <span data-ttu-id="495ae-195">Oznacza to, że funkcje mogą uzyskać dostęp do systemu plików i rejestru i uruchamiać polecenia, które nie były widoczne w pliku możliwości roli.</span><span class="sxs-lookup"><span data-stu-id="495ae-195">This means that functions can access the file system and registry, and run commands that weren't made visible in the role capability file.</span></span> <span data-ttu-id="495ae-196">Należy zachować ostrożność, aby uniknąć uruchamiania dowolnego kodu przy użyciu parametrów.</span><span class="sxs-lookup"><span data-stu-id="495ae-196">Take care to avoid running arbitrary code when using parameters.</span></span> <span data-ttu-id="495ae-197">Unikaj bezpośredniego wprowadzania danych przez użytkownika do poleceń `Invoke-Expression`cmdlet, takich jak.</span><span class="sxs-lookup"><span data-stu-id="495ae-197">Avoid piping user input directly into cmdlets like `Invoke-Expression`.</span></span>

<span data-ttu-id="495ae-198">W powyższym przykładzie należy zauważyć, że zamiast skrótu `Microsoft.PowerShell.Utility\Select-Object` `Select-Object`użyto w pełni kwalifikowanej nazwy modułu (FQMN).</span><span class="sxs-lookup"><span data-stu-id="495ae-198">In the above example, notice that the fully qualified module name (FQMN) `Microsoft.PowerShell.Utility\Select-Object` was used instead of the shorthand `Select-Object`.</span></span>
<span data-ttu-id="495ae-199">Funkcje zdefiniowane w plikach możliwości roli są nadal objęte zakresem sesji JEA, które obejmują JEA funkcje serwera proxy, które są tworzone w celu ograniczenia istniejących poleceń.</span><span class="sxs-lookup"><span data-stu-id="495ae-199">Functions defined in role capability files are still subject to the scope of JEA sessions, which includes the proxy functions JEA creates to constrain existing commands.</span></span>

<span data-ttu-id="495ae-200">Domyślnie program `Select-Object` to ograniczone polecenie cmdlet we wszystkich sesjach jea, które nie zezwalają na wybór arbitralnych właściwości obiektów.</span><span class="sxs-lookup"><span data-stu-id="495ae-200">By default, `Select-Object` is a constrained cmdlet in all JEA sessions that doesn't allow the selection of arbitrary properties on objects.</span></span> <span data-ttu-id="495ae-201">Aby użyć nieograniczeń `Select-Object` w funkcjach, należy jawnie zażądać pełnej implementacji przy użyciu FQMN.</span><span class="sxs-lookup"><span data-stu-id="495ae-201">To use the unconstrained `Select-Object` in functions, you must explicitly request the full implementation using the FQMN.</span></span> <span data-ttu-id="495ae-202">Każde ograniczone polecenie cmdlet w sesji JEA ma takie same ograniczenia w przypadku wywołania funkcji.</span><span class="sxs-lookup"><span data-stu-id="495ae-202">Any constrained cmdlet in a JEA session has the same constraints when invoked from a function.</span></span> <span data-ttu-id="495ae-203">Aby uzyskać więcej informacji, zobacz [about_Command_Precedence](/powershell/module/microsoft.powershell.core/about/about_command_precedence).</span><span class="sxs-lookup"><span data-stu-id="495ae-203">For more information, see [about_Command_Precedence](/powershell/module/microsoft.powershell.core/about/about_command_precedence).</span></span>

<span data-ttu-id="495ae-204">Jeśli piszesz kilka funkcji niestandardowych, wygodniejsze jest umieszczenie ich w module skryptu programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="495ae-204">If you're writing several custom functions, it's more convenient to put them in a PowerShell script module.</span></span> <span data-ttu-id="495ae-205">Te funkcje są widoczne w sesji JEA przy użyciu pola **VisibleFunctions** , tak jak w przypadku modułów wbudowanych i innych firm.</span><span class="sxs-lookup"><span data-stu-id="495ae-205">You make those functions visible in the JEA session using the **VisibleFunctions** field like you would with built-in and third-party modules.</span></span>

<span data-ttu-id="495ae-206">Aby ukończenie karty działało prawidłowo w sesjach jea, należy dołączyć wbudowaną funkcję `tabexpansion2` na liście **VisibleFunctions** .</span><span class="sxs-lookup"><span data-stu-id="495ae-206">For tab completion to work properly in JEA sessions you must include the built-in function `tabexpansion2` in the **VisibleFunctions** list.</span></span>

## <a name="place-role-capabilities-in-a-module"></a><span data-ttu-id="495ae-207">Umieść możliwości roli w module</span><span class="sxs-lookup"><span data-stu-id="495ae-207">Place role capabilities in a module</span></span>

<span data-ttu-id="495ae-208">Aby program PowerShell znalazł plik możliwości roli, musi on być przechowywany w folderze **RoleCapabilities** w module programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="495ae-208">In order for PowerShell to find a role capability file, it must be stored in a **RoleCapabilities** folder in a PowerShell module.</span></span> <span data-ttu-id="495ae-209">Moduł może być przechowywany w dowolnym folderze uwzględnionym w `$env:PSModulePath` zmiennej środowiskowej, ale nie powinien być umieszczony w pliku system32 ani w folderze, w którym niezaufany użytkownicy mogą modyfikować pliki.</span><span class="sxs-lookup"><span data-stu-id="495ae-209">The module can be stored in any folder included in the `$env:PSModulePath` environment variable, however you shouldn't place it in System32 or a folder where the untrusted, connecting users could modify the files.</span></span> <span data-ttu-id="495ae-210">Poniżej przedstawiono przykład tworzenia podstawowego modułu skryptu programu PowerShell o nazwie **ContosoJEA** w `$env:ProgramFiles` ścieżce.</span><span class="sxs-lookup"><span data-stu-id="495ae-210">Below is an example of creating a basic PowerShell script module called **ContosoJEA** in the `$env:ProgramFiles` path.</span></span>

```powershell
# Create a folder for the module
$modulePath = Join-Path $env:ProgramFiles "WindowsPowerShell\Modules\ContosoJEA"
New-Item -ItemType Directory -Path $modulePath

# Create an empty script module and module manifest.
# At least one file in the module folder must have the same name as the folder itself.
New-Item -ItemType File -Path (Join-Path $modulePath "ContosoJEAFunctions.psm1")
New-ModuleManifest -Path (Join-Path $modulePath "ContosoJEA.psd1") -RootModule "ContosoJEAFunctions.psm1"

# Create the RoleCapabilities folder and copy in the PSRC file
$rcFolder = Join-Path $modulePath "RoleCapabilities"
New-Item -ItemType Directory $rcFolder
Copy-Item -Path .\MyFirstJEARole.psrc -Destination $rcFolder
```

<span data-ttu-id="495ae-211">Aby uzyskać więcej informacji na temat modułów programu PowerShell, zobacz [Opis modułu programu PowerShell](/powershell/developer/windows-powershell).</span><span class="sxs-lookup"><span data-stu-id="495ae-211">For more information about PowerShell modules, see [Understanding a PowerShell Module](/powershell/developer/windows-powershell).</span></span>

## <a name="updating-role-capabilities"></a><span data-ttu-id="495ae-212">Aktualizowanie możliwości roli</span><span class="sxs-lookup"><span data-stu-id="495ae-212">Updating role capabilities</span></span>

<span data-ttu-id="495ae-213">Można edytować plik możliwości roli, aby zaktualizować ustawienia w dowolnym momencie.</span><span class="sxs-lookup"><span data-stu-id="495ae-213">You can edit a role capability file to update the settings at any time.</span></span> <span data-ttu-id="495ae-214">Wszystkie nowe sesje JEA uruchomione po zaktualizowaniu możliwości roli zostaną odzwierciedlone w zmienionych możliwościach.</span><span class="sxs-lookup"><span data-stu-id="495ae-214">Any new JEA sessions started after the role capability has been updated will reflect the revised capabilities.</span></span>

<span data-ttu-id="495ae-215">Jest to dlatego, że kontrolowanie dostępu do folderu możliwości roli jest tak ważne.</span><span class="sxs-lookup"><span data-stu-id="495ae-215">This is why controlling access to the role capabilities folder is so important.</span></span> <span data-ttu-id="495ae-216">Tylko Administratorzy o dużej zaufaniu powinni mieć możliwość zmiany plików możliwości roli.</span><span class="sxs-lookup"><span data-stu-id="495ae-216">Only highly trusted administrators should be allowed to change role capability files.</span></span> <span data-ttu-id="495ae-217">Jeśli niezaufany użytkownik może zmienić pliki możliwości roli, może łatwo dać sobie dostęp do poleceń cmdlet, które pozwalają im podwyższyć poziom uprawnień.</span><span class="sxs-lookup"><span data-stu-id="495ae-217">If an untrusted user can change role capability files, they can easily give themselves access to cmdlets that allow them to elevate their privileges.</span></span>

<span data-ttu-id="495ae-218">W przypadku administratorów chcących blokować dostęp do możliwości roli upewnij się, że system lokalny ma dostęp do odczytu do plików możliwości roli i zawiera moduły.</span><span class="sxs-lookup"><span data-stu-id="495ae-218">For administrators looking to lock down access to the role capabilities, ensure Local System has read access to the role capability files and containing modules.</span></span>

## <a name="how-role-capabilities-are-merged"></a><span data-ttu-id="495ae-219">Jak są scalane możliwości roli</span><span class="sxs-lookup"><span data-stu-id="495ae-219">How role capabilities are merged</span></span>

<span data-ttu-id="495ae-220">Użytkownicy uzyskują dostęp do wszystkich zgodnych możliwości roli w [pliku konfiguracji sesji](session-configurations.md) po wprowadzeniu sesji jea.</span><span class="sxs-lookup"><span data-stu-id="495ae-220">Users are granted access to all matching role capabilities in the [session configuration file](session-configurations.md) when they enter a JEA session.</span></span> <span data-ttu-id="495ae-221">JEA próbuje dać użytkownikowi najbardziej ograniczając zestaw poleceń dozwolonych przez dowolne role.</span><span class="sxs-lookup"><span data-stu-id="495ae-221">JEA tries to give the user the most permissive set of commands allowed by any of the roles.</span></span>

### <a name="visiblecmdlets-and-visiblefunctions"></a><span data-ttu-id="495ae-222">VisibleCmdlets i VisibleFunctions</span><span class="sxs-lookup"><span data-stu-id="495ae-222">VisibleCmdlets and VisibleFunctions</span></span>

<span data-ttu-id="495ae-223">Najbardziej złożona logika scalania ma wpływ na polecenia cmdlet i funkcje, których parametry i wartości parametrów są ograniczone w JEA.</span><span class="sxs-lookup"><span data-stu-id="495ae-223">The most complex merge logic affects cmdlets and functions, which can have their parameters and parameter values limited in JEA.</span></span>

<span data-ttu-id="495ae-224">Reguły są następujące:</span><span class="sxs-lookup"><span data-stu-id="495ae-224">The rules are as follows:</span></span>

1. <span data-ttu-id="495ae-225">Jeśli polecenie cmdlet jest widoczne tylko w jednej roli, jest widoczne dla użytkownika z odpowiednimi ograniczeniami parametrów.</span><span class="sxs-lookup"><span data-stu-id="495ae-225">If a cmdlet is only made visible in one role, it is visible to the user with any applicable parameter constraints.</span></span>
2. <span data-ttu-id="495ae-226">Jeśli polecenie cmdlet jest widoczne w więcej niż jednej roli, a każda rola ma takie same ograniczenia dotyczące polecenia cmdlet, polecenie cmdlet jest widoczne dla użytkownika z tymi ograniczeniami.</span><span class="sxs-lookup"><span data-stu-id="495ae-226">If a cmdlet is made visible in more than one role, and each role has the same constraints on the cmdlet, the cmdlet is visible to the user with those constraints.</span></span>
3. <span data-ttu-id="495ae-227">Jeśli polecenie cmdlet jest widoczne w więcej niż jednej roli, a każda rola umożliwia korzystanie z innego zestawu parametrów, polecenie cmdlet i wszystkie parametry zdefiniowane w każdej roli są widoczne dla użytkownika.</span><span class="sxs-lookup"><span data-stu-id="495ae-227">If a cmdlet is made visible in more than one role, and each role allows a different set of parameters, the cmdlet and all the parameters defined across every role are visible to the user.</span></span>
   <span data-ttu-id="495ae-228">Jeśli jedna rola nie ma ograniczeń dotyczących parametrów, wszystkie parametry są dozwolone.</span><span class="sxs-lookup"><span data-stu-id="495ae-228">If one role doesn't have constraints on the parameters, all parameters are allowed.</span></span>
4. <span data-ttu-id="495ae-229">Jeśli jedna rola definiuje walidację zestawu lub walidację wzorca dla parametru polecenia cmdlet, a inna rola zezwala na parametr, ale nie ogranicza wartości parametrów, zestaw walidacji lub wzorzec jest ignorowany.</span><span class="sxs-lookup"><span data-stu-id="495ae-229">If one role defines a validate set or validate pattern for a cmdlet parameter, and the other role allows the parameter but does not constrain the parameter values, the validate set or pattern is ignored.</span></span>
5. <span data-ttu-id="495ae-230">Jeśli zestaw walidacji jest zdefiniowany dla tego samego parametru polecenia cmdlet w więcej niż jednej roli, dozwolone są wszystkie wartości z wszystkich zestawów walidacji.</span><span class="sxs-lookup"><span data-stu-id="495ae-230">If a validate set is defined for the same cmdlet parameter in more than one role, all values from all validate sets are allowed.</span></span>
6. <span data-ttu-id="495ae-231">Jeśli wzorzec walidacji jest zdefiniowany dla tego samego parametru polecenia cmdlet w więcej niż jednej roli, dozwolone są wszystkie wartości, które pasują do któregokolwiek z wzorców.</span><span class="sxs-lookup"><span data-stu-id="495ae-231">If a validate pattern is defined for the same cmdlet parameter in more than one role, any values that match any of the patterns are allowed.</span></span>
7. <span data-ttu-id="495ae-232">Jeśli zestaw walidacji jest zdefiniowany w jednej lub kilku rolach, a wzorzec walidacji jest zdefiniowany w innej roli dla tego samego parametru polecenia cmdlet, zestaw walidacji jest ignorowany, a reguła (6) odnosi się do pozostałych wzorców walidacji.</span><span class="sxs-lookup"><span data-stu-id="495ae-232">If a validate set is defined in one or more roles, and a validate pattern is defined in another role for the same cmdlet parameter, the validate set is ignored and rule (6) applies to the remaining validate patterns.</span></span>

<span data-ttu-id="495ae-233">Poniżej przedstawiono przykład sposobu, w jaki role są scalane zgodnie z następującymi regułami:</span><span class="sxs-lookup"><span data-stu-id="495ae-233">Below is an example of how roles are merged according to these rules:</span></span>

```powershell
# Role A Visible Cmdlets
$roleA = @{
    VisibleCmdlets = 'Get-Service',
                     @{ Name = 'Restart-Service';
                        Parameters = @{ Name = 'DisplayName'; ValidateSet = 'DNS Client' } }
}

# Role B Visible Cmdlets
$roleB = @{
    VisibleCmdlets = @{ Name = 'Get-Service';
                        Parameters = @{ Name = 'DisplayName'; ValidatePattern = 'DNS.*' } },
                     @{ Name = 'Restart-Service';
                        Parameters = @{ Name = 'DisplayName'; ValidateSet = 'DNS Server' } }
}

# Resulting permissions for a user who belongs to both role A and B
# - The constraint in role B for the DisplayName parameter on Get-Service
#   is ignored because of rule #4
# - The ValidateSets for Restart-Service are merged because both roles use
#   ValidateSet on the same parameter per rule #5
$mergedAandB = @{
    VisibleCmdlets = 'Get-Service',
                     @{ Name = 'Restart-Service';
                        Parameters = @{ Name = 'DisplayName'; ValidateSet = 'DNS Client', 'DNS Server' } }
}
```

### <a name="visibleexternalcommands-visiblealiases-visibleproviders-scriptstoprocess"></a><span data-ttu-id="495ae-234">VisibleExternalCommands, VisibleAliases, VisibleProviders, ScriptsToProcess</span><span class="sxs-lookup"><span data-stu-id="495ae-234">VisibleExternalCommands, VisibleAliases, VisibleProviders, ScriptsToProcess</span></span>

<span data-ttu-id="495ae-235">Wszystkie inne pola w pliku możliwości roli są dodawane do zbiorczego zestawu dozwolonych poleceń zewnętrznych, aliasów, dostawców i skryptów uruchamiania.</span><span class="sxs-lookup"><span data-stu-id="495ae-235">All other fields in the role capability file are added to a cumulative set of allowable external commands, aliases, providers, and startup scripts.</span></span> <span data-ttu-id="495ae-236">Wszystkie polecenia, aliasy, dostawcy lub skrypty dostępne w jednej funkcji roli są dostępne dla użytkownika JEA.</span><span class="sxs-lookup"><span data-stu-id="495ae-236">Any command, alias, provider, or script available in one role capability is available to the JEA user.</span></span>

<span data-ttu-id="495ae-237">Należy zachować ostrożność, aby mieć pewność, że połączony zestaw dostawców z jednej możliwości roli i poleceń cmdlet/funkcji/poleceń od innego nie zezwoli użytkownikom na niezamierzone dostęp do zasobów systemowych.</span><span class="sxs-lookup"><span data-stu-id="495ae-237">Be careful to ensure that the combined set of providers from one role capability and cmdlets/functions/commands from another don't allow users unintentional access to system resources.</span></span>
<span data-ttu-id="495ae-238">Na przykład, jeśli jedna rola zezwala na `Remove-Item` wykonanie polecenia cmdlet, a `FileSystem` drugi umożliwia dostawcy, istnieje ryzyko, że użytkownik jea usuwa dowolne pliki na komputerze.</span><span class="sxs-lookup"><span data-stu-id="495ae-238">For example, if one role allows the `Remove-Item` cmdlet and another allows the `FileSystem` provider, you are at risk of a JEA user deleting arbitrary files on your computer.</span></span> <span data-ttu-id="495ae-239">Dodatkowe informacje na temat identyfikowania czynnych uprawnień użytkowników można znaleźć w artykule dotyczącym [inspekcji jea](audit-and-report.md) .</span><span class="sxs-lookup"><span data-stu-id="495ae-239">Additional information about identifying users' effective permissions can be found in the [auditing JEA](audit-and-report.md) article.</span></span>

## <a name="next-steps"></a><span data-ttu-id="495ae-240">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="495ae-240">Next steps</span></span>

[<span data-ttu-id="495ae-241">Utwórz plik konfiguracji sesji</span><span class="sxs-lookup"><span data-stu-id="495ae-241">Create a session configuration file</span></span>](session-configurations.md)

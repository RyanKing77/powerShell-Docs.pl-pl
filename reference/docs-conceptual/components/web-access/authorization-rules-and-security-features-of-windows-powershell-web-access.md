---
ms.date: 06/27/2017
keywords: polecenia cmdlet programu PowerShell
title: Reguły autoryzacji i funkcje zabezpieczeń programu Windows PowerShell Web Access
ms.openlocfilehash: 95c61d3a0431cda9dee738d1c9f5ec843c1209f3
ms.sourcegitcommit: 00ff76d7d9414fe585c04740b739b9cf14d711e1
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/14/2018
ms.locfileid: "53405108"
---
# <a name="authorization-rules-and-security-features-of-windows-powershell-web-access"></a><span data-ttu-id="e25da-103">Reguły autoryzacji i funkcje zabezpieczeń programu Windows PowerShell Web Access</span><span class="sxs-lookup"><span data-stu-id="e25da-103">Authorization Rules and Security Features of Windows PowerShell Web Access</span></span>

<span data-ttu-id="e25da-104">Zaktualizowano: 24 czerwca 2013 r.</span><span class="sxs-lookup"><span data-stu-id="e25da-104">Updated: June 24, 2013</span></span>

<span data-ttu-id="e25da-105">Dotyczy: Windows Server 2012 R2, Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="e25da-105">Applies To: Windows Server 2012 R2, Windows Server 2012</span></span>

<span data-ttu-id="e25da-106">Program Windows PowerShell Web Access w systemie Windows Server 2012 R2 i Windows Server 2012 ma z restrykcyjnego modelu zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="e25da-106">Windows PowerShell Web Access in Windows Server 2012 R2 and Windows Server 2012 has a restrictive security model.</span></span> <span data-ttu-id="e25da-107">Użytkownikom należy jawnie udzielić dostępu przed mogą zalogować się do bramy programu Windows PowerShell Web Access i używać konsoli internetowej programu Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e25da-107">Users must explicitly be granted access before they can sign in to the Windows PowerShell Web Access gateway and use the web-based Windows PowerShell console.</span></span>

## <a name="configuring-authorization-rules-and-site-security"></a><span data-ttu-id="e25da-108">Konfiguracja reguł autoryzacji i zabezpieczeń lokacji</span><span class="sxs-lookup"><span data-stu-id="e25da-108">Configuring authorization rules and site security</span></span>

<span data-ttu-id="e25da-109">Po zainstalowaniu programu Windows PowerShell Web Access, a brama jest skonfigurowana, użytkownicy mogą otwierać strony logowania w przeglądarce, ale nie można zalogować do momentu administratora programu Windows PowerShell Web Access jawnego przydzielenia im dostępu.</span><span class="sxs-lookup"><span data-stu-id="e25da-109">After Windows PowerShell Web Access is installed and the gateway is configured, users can open the sign-in page in a browser, but they cannot sign in until the Windows PowerShell Web Access administrator grants users access explicitly.</span></span> <span data-ttu-id="e25da-110">Kontrola dostępu "Windows PowerShell Web Access" odbywa się przy użyciu zestawu poleceń cmdlet Windows PowerShell opisanych w poniższej tabeli.</span><span class="sxs-lookup"><span data-stu-id="e25da-110">'Windows PowerShell Web Access' access control is managed by using the set of Windows PowerShell cmdlets described in the following table.</span></span> <span data-ttu-id="e25da-111">Nie istnieje porównywalny graficzny interfejs użytkownika umożliwiający dodawanie reguł autoryzacji lub zarządzanie nimi.</span><span class="sxs-lookup"><span data-stu-id="e25da-111">There is no comparable GUI for adding or managing authorization rules.</span></span>
<span data-ttu-id="e25da-112">Zobacz [polecenia cmdlet programu Windows PowerShell Web Access](/powershell/module/powershellwebaccess/?view=winserver2012r2-ps).</span><span class="sxs-lookup"><span data-stu-id="e25da-112">See [Windows PowerShell Web Access Cmdlets](/powershell/module/powershellwebaccess/?view=winserver2012r2-ps).</span></span>

<span data-ttu-id="e25da-113">Administratorzy mogą definiować `{0-n}` reguł uwierzytelniania dla programu Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="e25da-113">Administrators can define `{0-n}` authentication rules for Windows PowerShell Web Access.</span></span> <span data-ttu-id="e25da-114">Domyślne zabezpieczenia mają charakter ograniczenia, a nie zezwolenia; zero reguł uwierzytelniania oznacza, że żaden użytkownik nie ma dostępu do żadnej funkcji.</span><span class="sxs-lookup"><span data-stu-id="e25da-114">The default security is restrictive rather than permissive; zero authentication rules means no users have access to anything.</span></span>

<span data-ttu-id="e25da-115">[Polecenia Add-PswaAuthorizationRule](/powershell/module/powershellwebaccess/add-pswaauthorizationrule?view=winserver2012r2-ps) i [Test-PswaAuthorizationRule](/powershell/module/powershellwebaccess/test-pswaauthorizationrule?view=winserver2012r2-ps) w systemie Windows Server 2012 R2 zawiera parametr Credential, która pozwala na dodawanie i testowanie reguł autoryzacji programu Windows PowerShell Web Access z lokalizacji zdalnej komputerze lub w obrębie aktywnej sesji programu Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="e25da-115">[Add-PswaAuthorizationRule](/powershell/module/powershellwebaccess/add-pswaauthorizationrule?view=winserver2012r2-ps) and [Test-PswaAuthorizationRule](/powershell/module/powershellwebaccess/test-pswaauthorizationrule?view=winserver2012r2-ps) in Windows Server 2012 R2 include a Credential parameter that allows you to add and test Windows PowerShell Web Access authorization rules from a remote computer, or from within an active Windows PowerShell Web Access session.</span></span> <span data-ttu-id="e25da-116">Jak z innymi poleceniami cmdlet programu Windows PowerShell, która ma parametr Credential, można określić obiekt PSCredential jako wartość parametru.</span><span class="sxs-lookup"><span data-stu-id="e25da-116">As with other Windows PowerShell cmdlets that have a Credential parameter, you can specify a PSCredential object as the value of the parameter.</span></span> <span data-ttu-id="e25da-117">Aby utworzyć obiekt PSCredential zawierający poświadczenia, które mają być przekazywane do komputera zdalnego, uruchom [Get-Credential](/powershell/module/microsoft.powershell.security/Get-Credential) polecenia cmdlet.</span><span class="sxs-lookup"><span data-stu-id="e25da-117">To create a PSCredential object that contains credentials you want to pass to a remote computer, run the [Get-Credential](/powershell/module/microsoft.powershell.security/Get-Credential) cmdlet.</span></span>

<span data-ttu-id="e25da-118">Reguły uwierzytelniania programu Windows PowerShell Web Access to reguły określające elementy dozwolone.</span><span class="sxs-lookup"><span data-stu-id="e25da-118">Windows PowerShell Web Access authentication rules are whitelist rules.</span></span> <span data-ttu-id="e25da-119">Każda reguła stanowi definicję dozwolonego połączenia między użytkownikami, komputerami docelowymi i określonego Windows PowerShell [konfiguracje sesji](/powershell/module/microsoft.powershell.core/about/about_session_configurations?view=powershell-5.1) (określane również jako punkty końcowe lub _obszary działania_) na wskazanych komputerach docelowych.</span><span class="sxs-lookup"><span data-stu-id="e25da-119">Each rule is a definition of an allowed connection between users, target computers, and particular Windows PowerShell [session configurations](/powershell/module/microsoft.powershell.core/about/about_session_configurations?view=powershell-5.1) (also referred to as endpoints or _runspaces_) on specified target computers.</span></span>
<span data-ttu-id="e25da-120">Aby uzyskać informacje na **obszary działania** zobacz [początku użyj programu PowerShell z obszary działania](https://blogs.technet.microsoft.com/heyscriptingguy/2015/11/26/beginning-use-of-powershell-runspaces-part-1/)</span><span class="sxs-lookup"><span data-stu-id="e25da-120">For an explanation on **runspaces** see [Beginning Use of PowerShell Runspaces](https://blogs.technet.microsoft.com/heyscriptingguy/2015/11/26/beginning-use-of-powershell-runspaces-part-1/)</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e25da-121">Użytkownik otrzyma dostęp, jeśli co najmniej jedna reguła jest prawdziwa.</span><span class="sxs-lookup"><span data-stu-id="e25da-121">A user needs only one rule to be true to get access.</span></span> <span data-ttu-id="e25da-122">Jeśli użytkownik otrzyma dostęp do jednego komputera z pełną obsługą języka lub dostęp tylko do polecenia cmdlet zarządzania zdalnego programu Windows PowerShell, za pomocą konsoli sieci web użytkownik może zalogować się (lub przeskoku) na innych komputerach, które są połączone z pierwszym komputerem docelowym.</span><span class="sxs-lookup"><span data-stu-id="e25da-122">If a user is given access to one computer with either full language access or access only to Windows PowerShell remote management cmdlets, from the web-based console, the user can log on (or hop) to other computers that are connected to the first target computer.</span></span> <span data-ttu-id="e25da-123">Najbezpieczniejszą metodą, aby skonfigurować program Windows PowerShell Web Access jest zezwolić użytkownikom na dostęp tylko do ograniczonych konfiguracji sesji, umożliwiających im realizację określonych zadań, które muszą zwykle wykonać zdalnie.</span><span class="sxs-lookup"><span data-stu-id="e25da-123">The most secure way to configure Windows PowerShell Web Access is to allow users access only to constrained session configurations that allow them to accomplish specific tasks that they normally need to perform remotely.</span></span>

<span data-ttu-id="e25da-124">Polecenia cmdlet, do którego odwołuje się [polecenia cmdlet programu Windows PowerShell Web Access](/powershell/module/powershellwebaccess/?view=winserver2012r2-ps) Zezwalaj, aby utworzyć zestaw reguł dostępu, które są używane do autoryzacji użytkownika w bramie Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="e25da-124">The cmdlets referenced in [Windows PowerShell Web Access Cmdlets](/powershell/module/powershellwebaccess/?view=winserver2012r2-ps) allow to create a set of access rules which are used to authorize a user on the Windows PowerShell Web Access gateway.</span></span> <span data-ttu-id="e25da-125">Reguły te różnią się od list kontroli dostępu na komputerze docelowym i zapewniają dodatkową warstwę zabezpieczeń dla dostępu przez sieć Web.</span><span class="sxs-lookup"><span data-stu-id="e25da-125">The rules are different from the access control lists (ACLs) on the destination computer, and provide an additional layer of security for web access.</span></span> <span data-ttu-id="e25da-126">Następna sekcja zawiera bardziej szczegółowe informacje na temat zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="e25da-126">More details about security are described in the following section.</span></span>

<span data-ttu-id="e25da-127">Jeśli użytkownicy nie przejdą którejkolwiek z poprzednich warstw zabezpieczeń, otrzymają komunikat ogólny "odmowa dostępu" w oknie przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="e25da-127">If users cannot pass any of the preceding security layers, they receive a generic 'access denied' message in their browser windows.</span></span> <span data-ttu-id="e25da-128">Szczegóły zabezpieczeń są rejestrowane na serwerze bramy, ale użytkownicy końcowi nie otrzymują informacji na temat liczby warstw zabezpieczeń, przez które przeszli, ani też warstwy, w której wystąpił błąd logowania lub uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="e25da-128">Although security details are logged on the gateway server, end users are not shown information about how many security layers they passed, or at which layer the sign-in or authentication failure occurred.</span></span>

<span data-ttu-id="e25da-129">Aby uzyskać więcej informacji na temat konfigurowania reguł autoryzacji, zobacz [Konfigurowanie reguł autoryzacji](#configuring-authorization-rules-and-site-security) w tym temacie.</span><span class="sxs-lookup"><span data-stu-id="e25da-129">For more information about configuring authorization rules, see [configuring authorization rules](#configuring-authorization-rules-and-site-security) in this topic.</span></span>

### <a name="security"></a><span data-ttu-id="e25da-130">Bezpieczeństwo</span><span class="sxs-lookup"><span data-stu-id="e25da-130">Security</span></span>

<span data-ttu-id="e25da-131">Model zabezpieczeń Windows PowerShell Web Access znajdują się cztery warstwy między użytkownikiem końcowym konsoli internetowej a komputerem docelowym.</span><span class="sxs-lookup"><span data-stu-id="e25da-131">The Windows PowerShell Web Access security model has four layers between an end user of the web-based console, and a target computer.</span></span> <span data-ttu-id="e25da-132">Windows PowerShell Web Access, Administratorzy mogą dodawać warstwy zabezpieczeń za pomocą dodatkowych czynności konfiguracyjnych, w konsoli Menedżera usług IIS.</span><span class="sxs-lookup"><span data-stu-id="e25da-132">Windows PowerShell Web Access administrators can add security layers through additional configuration in the IIS Manager console.</span></span> <span data-ttu-id="e25da-133">Aby uzyskać więcej informacji na temat zabezpieczania witryn internetowych w konsoli Menedżera usług IIS, zobacz [Konfigurowanie zabezpieczeń serwera sieci Web (IIS7)](https://technet.microsoft.com/library/cc731278).</span><span class="sxs-lookup"><span data-stu-id="e25da-133">For more information about securing websites in the IIS Manager console, see [Configure Web Server Security (IIS7)](https://technet.microsoft.com/library/cc731278).</span></span>

<span data-ttu-id="e25da-134">Aby uzyskać więcej informacji na temat usług IIS najlepsze rozwiązania i zapobieganie atakom typu "odmowa usługi", zobacz [najlepsze rozwiązania do zapobiegania DoS/atakom typu odmowa usługi](https://technet.microsoft.com/library/cc750213).</span><span class="sxs-lookup"><span data-stu-id="e25da-134">For more information about IIS best practices and preventing denial-of-service attacks, see [Best Practices for Preventing DoS/Denial of Service Attacks](https://technet.microsoft.com/library/cc750213).</span></span>
<span data-ttu-id="e25da-135">Administrator można kupić i zainstalować oprogramowanie uwierzytelniania dodatkowego handlu detalicznego.</span><span class="sxs-lookup"><span data-stu-id="e25da-135">An administrator can also buy and install additional retail authentication software.</span></span>

<span data-ttu-id="e25da-136">W poniższej tabeli opisano cztery warstwy zabezpieczeń między użytkownikami końcowymi a komputerami docelowymi.</span><span class="sxs-lookup"><span data-stu-id="e25da-136">The following table describes the four layers of security between end users and target computers.</span></span>

|<span data-ttu-id="e25da-137">Poziom</span><span class="sxs-lookup"><span data-stu-id="e25da-137">Level</span></span>|<span data-ttu-id="e25da-138">Warstwa</span><span class="sxs-lookup"><span data-stu-id="e25da-138">Layer</span></span>|
|-|-|
|<span data-ttu-id="e25da-139">1</span><span class="sxs-lookup"><span data-stu-id="e25da-139">1</span></span>|[<span data-ttu-id="e25da-140">funkcje zabezpieczeń serwera sieci web usług IIS</span><span class="sxs-lookup"><span data-stu-id="e25da-140">iis web server security features</span></span>](#iis-web-server-security-features)|
|<span data-ttu-id="e25da-141">2</span><span class="sxs-lookup"><span data-stu-id="e25da-141">2</span></span>|[<span data-ttu-id="e25da-142">Uwierzytelnianie bramy oparte na formularzach dostęp w sieci web programu powershell systemu Windows</span><span class="sxs-lookup"><span data-stu-id="e25da-142">windows powershell web access forms-based gateway authentication</span></span>](#windows-powershell-web-access-forms-based-gateway-authentication)|
|<span data-ttu-id="e25da-143">3</span><span class="sxs-lookup"><span data-stu-id="e25da-143">3</span></span>|[<span data-ttu-id="e25da-144">reguły autoryzacji dostępu do sieci web programu powershell systemu Windows</span><span class="sxs-lookup"><span data-stu-id="e25da-144">windows powershell web access authorization rules</span></span>](#windows-powershell-web-access-authorization-rules)|
|<span data-ttu-id="e25da-145">4</span><span class="sxs-lookup"><span data-stu-id="e25da-145">4</span></span>|[<span data-ttu-id="e25da-146">docelowe zasady uwierzytelniania i autoryzacji</span><span class="sxs-lookup"><span data-stu-id="e25da-146">target authentication and authorization rules</span></span>](#target-authentication-and-authorization-rules)|

<span data-ttu-id="e25da-147">Szczegółowe informacje na temat poszczególnych warstw można znaleźć w następujących pozycji:</span><span class="sxs-lookup"><span data-stu-id="e25da-147">Detailed information about each layer can be found under the following headings:</span></span>

#### <a name="iis-web-server-security-features"></a><span data-ttu-id="e25da-148">Funkcje zabezpieczeń serwera sieci Web usług IIS</span><span class="sxs-lookup"><span data-stu-id="e25da-148">IIS Web Server security features</span></span>

<span data-ttu-id="e25da-149">Windows PowerShell Web Access użytkownicy muszą zawsze podawać nazwę użytkownika i hasło do uwierzytelniania kont w bramie.</span><span class="sxs-lookup"><span data-stu-id="e25da-149">Windows PowerShell Web Access users must always provide a user name and password to authenticate their accounts on the gateway.</span></span> <span data-ttu-id="e25da-150">Jednak administratorzy programu Windows PowerShell Web Access można również włączyć opcjonalne uwierzytelnianie certyfikatu klienta, lub wyłączyć zobacz [Instalowanie i używanie programu windows powershell web access](install-and-use-windows-powershell-web-access.md) umożliwiające certyfikat testowy i nowszych, jak skonfigurować oryginalnego certyfikatu).</span><span class="sxs-lookup"><span data-stu-id="e25da-150">However, Windows PowerShell Web Access administrators can also turn optional client certificate authentication on or off, see [install and use windows powershell web access](install-and-use-windows-powershell-web-access.md) to enable a test certificate and, later, how to configure a genuine certificate).</span></span>

<span data-ttu-id="e25da-151">Opcjonalna funkcja certyfikatu klienta, będąca częścią konfiguracji serwera sieci Web (IIS), wymaga od użytkowników końcowych posiadania, oprócz nazwy użytkownika i hasła, prawidłowego certyfikatu klienta.</span><span class="sxs-lookup"><span data-stu-id="e25da-151">The optional client certificate feature requires end users to have a valid client certificate, in addition to their user names and passwords, and is part of Web Server (IIS) configuration.</span></span> <span data-ttu-id="e25da-152">Po włączeniu warstwy certyfikatu klienta, strony logowania programu Windows PowerShell Web Access monit o dostarczenie prawidłowego przed wyznaczeniem poświadczeń logowania.</span><span class="sxs-lookup"><span data-stu-id="e25da-152">When the client certificate layer is enabled, the Windows PowerShell Web Access sign-in page prompts users to provide valid certificates before their sign-in credentials are evaluated.</span></span> <span data-ttu-id="e25da-153">Funkcja uwierzytelniania certyfikatu klienta automatycznie sprawdza, czy certyfikat klienta istnieje.</span><span class="sxs-lookup"><span data-stu-id="e25da-153">Client certificate authentication automatically checks for the client certificate.</span></span> <span data-ttu-id="e25da-154">Jeśli certyfikat nie zostanie znaleziony, programu Windows PowerShell Web Access informuje użytkowników, dzięki czemu mogą podać certyfikat.</span><span class="sxs-lookup"><span data-stu-id="e25da-154">If a valid certificate is not found, Windows PowerShell Web Access informs users, so they can provide the certificate.</span></span> <span data-ttu-id="e25da-155">Jeśli zostanie znaleziony prawidłowy certyfikat klienta, programu Windows PowerShell Web Access otwiera stronę logowania dla użytkowników zapewnić ich nazwy użytkownika i hasła.</span><span class="sxs-lookup"><span data-stu-id="e25da-155">If a valid client certificate is found, Windows PowerShell Web Access opens the sign-in page for users to provide their user names and passwords.</span></span>

<span data-ttu-id="e25da-156">Jest jednym z przykładów dodatkowych ustawień zabezpieczeń, które są oferowane przez serwer sieci Web usług IIS.</span><span class="sxs-lookup"><span data-stu-id="e25da-156">This is one example of additional security settings that are offered by IIS Web Server.</span></span> <span data-ttu-id="e25da-157">Aby uzyskać więcej informacji o innych funkcjach zabezpieczeń usług IIS, zobacz [Konfigurowanie zabezpieczeń serwera sieci Web (IIS 7)](https://technet.microsoft.com/library/cc731278).</span><span class="sxs-lookup"><span data-stu-id="e25da-157">For more information about other IIS security features, see [Configure Web Server Security (IIS 7)](https://technet.microsoft.com/library/cc731278).</span></span>

#### <a name="windows-powershell-web-access-forms-based-gateway-authentication"></a><span data-ttu-id="e25da-158">Uwierzytelnianie bramy oparte na formularzach Windows PowerShell Web Access</span><span class="sxs-lookup"><span data-stu-id="e25da-158">Windows PowerShell Web Access forms-based gateway authentication</span></span>

<span data-ttu-id="e25da-159">Strony logowania programu Windows PowerShell Web Access wymaga zestawu poświadczeń (nazwy użytkownika i hasło) i udostępniana opcja podania innych poświadczeń dla komputera docelowego.</span><span class="sxs-lookup"><span data-stu-id="e25da-159">The Windows PowerShell Web Access sign-in page requires a set of credentials (user name and password) and offers users the option of providing different credentials for the target computer.</span></span>
<span data-ttu-id="e25da-160">Jeśli użytkownik nie poda innych poświadczeń, do połączenia z komputerem docelowym zostaną użyte podstawowa nazwa użytkownika i hasło używane do połączenia z bramą.</span><span class="sxs-lookup"><span data-stu-id="e25da-160">If the user does not provide alternate credentials, the primary user name and password that are used to connect to the gateway are also used to connect to the target computer.</span></span>

<span data-ttu-id="e25da-161">Wymagane poświadczenia są uwierzytelniane przez bramę programu Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="e25da-161">The required credentials are authenticated on the Windows PowerShell Web Access gateway.</span></span> <span data-ttu-id="e25da-162">Te poświadczenia muszą odpowiadać prawidłowym kontom użytkowników albo z programu Windows PowerShell Web Access bramy serwera lokalnego lub w usłudze Active Directory.</span><span class="sxs-lookup"><span data-stu-id="e25da-162">These credentials must be valid user accounts on either the local Windows PowerShell Web Access gateway server, or in Active Directory.</span></span>

#### <a name="windows-powershell-web-access-authorization-rules"></a><span data-ttu-id="e25da-163">Reguły autoryzacji programu Windows PowerShell Web Access</span><span class="sxs-lookup"><span data-stu-id="e25da-163">Windows PowerShell Web Access authorization rules</span></span>

<span data-ttu-id="e25da-164">Po uwierzytelnieniu użytkownika na bramie Windows PowerShell Web Access sprawdza reguły autoryzacji, aby sprawdzić, czy użytkownik ma dostęp do żądanego komputera docelowego.</span><span class="sxs-lookup"><span data-stu-id="e25da-164">After a user is authenticated at the gateway, Windows PowerShell Web Access checks authorization rules to verify if the user has access to the requested target computer.</span></span> <span data-ttu-id="e25da-165">Po pomyślnej autoryzacji poświadczenia użytkownika są przekazywane do komputera docelowego.</span><span class="sxs-lookup"><span data-stu-id="e25da-165">After successful authorization, the user's credentials are passed along to the target computer.</span></span>

<span data-ttu-id="e25da-166">Reguły są sprawdzane dopiero po uwierzytelnieniu użytkownika przez bramę, ale przed rozpoczęciem uwierzytelniania użytkownika na komputerze docelowym.</span><span class="sxs-lookup"><span data-stu-id="e25da-166">These rules are evaluated only after a user has been authenticated by the gateway, and before a user can be authenticated on a target computer.</span></span>

#### <a name="target-authentication-and-authorization-rules"></a><span data-ttu-id="e25da-167">Uwierzytelnianie i reguły autoryzacji na komputerze docelowym</span><span class="sxs-lookup"><span data-stu-id="e25da-167">Target authentication and authorization rules</span></span>

<span data-ttu-id="e25da-168">Ostatnią warstwą zabezpieczeń programu Windows PowerShell Web Access jest konfiguracja zabezpieczeń na komputerze docelowym.</span><span class="sxs-lookup"><span data-stu-id="e25da-168">The final layer of security for Windows PowerShell Web Access is the target computer's own security configuration.</span></span> <span data-ttu-id="e25da-169">Użytkownicy muszą mieć odpowiednie uprawnienia dostępu skonfigurowane na komputerze docelowym, a także w regułach autoryzacji programu Windows PowerShell Web Access, aby uruchomić konsoli sieci web programu Windows PowerShell, która ma wpływ na komputerze docelowym za pośrednictwem programu Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="e25da-169">Users must have the appropriate access rights configured on the target computer, and also in the Windows PowerShell Web Access authorization rules, to run a Windows PowerShell web-based console that affects a target computer through Windows PowerShell Web Access.</span></span>

<span data-ttu-id="e25da-170">Ta warstwa oferuje te same mechanizmy zabezpieczeń, które są używane do oceny próby połączenia przypadku, gdy użytkownicy próbują utworzyć sesji zdalnej programu Windows PowerShell na komputerze docelowym z wnętrza programu Windows PowerShell, uruchamiając [Enter-PSSession](/powershell/module/microsoft.powershell.core/Enter-PSSession) lub [New-PSSession](/powershell/module/microsoft.powershell.core/new-pssession) polecenia cmdlet.</span><span class="sxs-lookup"><span data-stu-id="e25da-170">This layer offers the same security mechanisms that would evaluate connection attempts if users tried to create a remote Windows PowerShell session to a target computer from within Windows PowerShell by running the [Enter-PSSession](/powershell/module/microsoft.powershell.core/Enter-PSSession) or [New-PSSession](/powershell/module/microsoft.powershell.core/new-pssession) cmdlets.</span></span>

<span data-ttu-id="e25da-171">Domyślnie program Windows PowerShell Web Access używa podstawowej nazwy użytkownika i hasło do uwierzytelniania, zarówno brama i komputer docelowy.</span><span class="sxs-lookup"><span data-stu-id="e25da-171">By default, Windows PowerShell Web Access uses the primary user name and password for authentication on both the gateway and the target computer.</span></span> <span data-ttu-id="e25da-172">Oparte na sieci web strony logowania, w sekcji **opcjonalne ustawienia połączenia**, udostępniana opcja podania innych poświadczeń dla komputera docelowego, jeśli są one wymagane.</span><span class="sxs-lookup"><span data-stu-id="e25da-172">The web-based sign-in page, in a section titled **Optional connection settings**, offers users the option of providing different credentials for the target computer, if they are required.</span></span> <span data-ttu-id="e25da-173">Jeśli użytkownik nie poda innych poświadczeń, do połączenia z komputerem docelowym zostaną użyte podstawowa nazwa użytkownika i hasło używane do połączenia z bramą.</span><span class="sxs-lookup"><span data-stu-id="e25da-173">If the user does not provide alternate credentials, the primary user name and password that are used to connect to the gateway are also used to connect to the target computer.</span></span>

<span data-ttu-id="e25da-174">Przy użyciu reguł autoryzacji można zezwalać użytkownikom na dostęp do określonej konfiguracji sesji.</span><span class="sxs-lookup"><span data-stu-id="e25da-174">Authorization rules can be used to allow users access to a particular session configuration.</span></span> <span data-ttu-id="e25da-175">Możesz utworzyć _ograniczonych obszarach działania_ lub konfiguracje sesji programu Windows PowerShell Web Access, i zezwolić określonym użytkownikom połączyć tylko określonymi konfiguracjami sesji po zalogowaniu się do programu Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="e25da-175">You can create _restricted runspaces_ or session configurations for Windows PowerShell Web Access, and allow specific users to connect only to specific session configurations when they sign in to Windows PowerShell Web Access.</span></span> <span data-ttu-id="e25da-176">Za pomocą list kontroli dostępu można określić, którzy użytkownicy mają dostęp do określonych punktów końcowych, a następnie dodatkowo ograniczyć dostęp do danego punktu końcowego do określonych użytkowników przy użyciu reguł autoryzacji opisanych w tej sekcji.</span><span class="sxs-lookup"><span data-stu-id="e25da-176">You can use access control lists (ACLs) to determine which users have access to specific endpoints, and further restrict access to the endpoint for a specific set of users by using authorization rules described in this section.</span></span> <span data-ttu-id="e25da-177">Aby uzyskać więcej informacji o ograniczonych obszarach działania, zobacz [tworzenia ograniczonego obszaru działania](https://msdn.microsoft.com/library/dn614668).</span><span class="sxs-lookup"><span data-stu-id="e25da-177">For more information about restricted runspaces, see [Creating a constrained runspace](https://msdn.microsoft.com/library/dn614668).</span></span>

### <a name="configuring-authorization-rules"></a><span data-ttu-id="e25da-178">Konfigurowanie reguł autoryzacji</span><span class="sxs-lookup"><span data-stu-id="e25da-178">Configuring authorization rules</span></span>

<span data-ttu-id="e25da-179">Administratorzy mogą mają tę samą regułę autoryzacji dla użytkowników programu Windows PowerShell Web Access, które jest już zdefiniowany w swoim środowisku, do zarządzania zdalnego programu Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e25da-179">Administrators likely want the same authorization rule for Windows PowerShell Web Access users that is already defined in their environment for Windows PowerShell remote management.</span></span> <span data-ttu-id="e25da-180">W pierwszej procedurze w tej sekcji opisano sposób dodawania bezpiecznej reguły autoryzacji przydzielającej dostęp jednemu użytkownikowi logującemu się w celu zarządzania jednym komputerem w ramach jednej konfiguracji sesji.</span><span class="sxs-lookup"><span data-stu-id="e25da-180">The first procedure in this section describes how to add a secure authorization rule that grants access to one user, signing in to manage one computer, and within a single session configuration.</span></span> <span data-ttu-id="e25da-181">W drugiej procedurze opisano sposób usuwania reguły autoryzacji, która nie jest już potrzebna.</span><span class="sxs-lookup"><span data-stu-id="e25da-181">The second procedure describes how to remove an authorization rule that is no longer needed.</span></span>

<span data-ttu-id="e25da-182">Jeśli planujesz używanie niestandardowych konfiguracji sesji, aby zezwolić określonym użytkownikom do pracy tylko w obrębie ograniczonych obszarach działania w programie Windows PowerShell Web Access, należy utworzyć niestandardowe konfiguracje sesji przed dodaniem reguł autoryzacji, które odwołują się do nich.</span><span class="sxs-lookup"><span data-stu-id="e25da-182">If you plan to use custom session configurations to allow specific users to work only within restricted runspaces in Windows PowerShell Web Access, create your custom session configurations before you add authorization rules that refer to them.</span></span> <span data-ttu-id="e25da-183">Nie można użyć poleceń cmdlet programu Windows PowerShell Web Access, aby utworzyć niestandardowe konfiguracje sesji.</span><span class="sxs-lookup"><span data-stu-id="e25da-183">You cannot use the Windows PowerShell Web Access cmdlets to create custom session configurations.</span></span> <span data-ttu-id="e25da-184">Aby uzyskać więcej informacji na temat tworzenia niestandardowych konfiguracji sesji, zobacz [about_Session_Configuration_Files](/powershell/module/microsoft.powershell.core/about/about_session_configuration_files).</span><span class="sxs-lookup"><span data-stu-id="e25da-184">For more information about creating custom session configurations, see [about_Session_Configuration_Files](/powershell/module/microsoft.powershell.core/about/about_session_configuration_files).</span></span>

<span data-ttu-id="e25da-185">Polecenia cmdlet programu Windows PowerShell Web Access obsługują jeden symbol wieloznaczny, znak gwiazdki ( \* ).</span><span class="sxs-lookup"><span data-stu-id="e25da-185">Windows PowerShell Web Access cmdlets support one wildcard character, an asterisk ( \* ).</span></span> <span data-ttu-id="e25da-186">Symbole wieloznaczne w ciągach nie są obsługiwane; możesz użyć jednej gwiazdki na każdą właściwość (użytkownicy, komputery, sesje konfiguracji).</span><span class="sxs-lookup"><span data-stu-id="e25da-186">Wildcard characters within strings are not supported; use a single asterisk per property (users, computers, or session configurations).</span></span>

> [!NOTE]
> <span data-ttu-id="e25da-187">Zobacz więcej sposobów reguły autoryzacji służy do udzielania dostępu użytkownikom i pomóc w zabezpieczeniu środowiska Windows PowerShell Web Access [inne przykłady scenariuszy reguły autoryzacji](#other-authorization-rule-scenario-examples) w tym temacie.</span><span class="sxs-lookup"><span data-stu-id="e25da-187">For more ways you can use authorization rules to grant access to users and help secure the Windows PowerShell Web Access environment, see [other authorization rule scenario examples](#other-authorization-rule-scenario-examples) in this topic.</span></span>

#### <a name="to-add-a-restrictive-authorization-rule"></a><span data-ttu-id="e25da-188">Aby dodać restrykcyjną regułę autoryzacji</span><span class="sxs-lookup"><span data-stu-id="e25da-188">To add a restrictive authorization rule</span></span>

1. <span data-ttu-id="e25da-189">Wykonaj jedną z następujących czynności, aby otworzyć sesję środowiska Windows PowerShell z podwyższonym poziomem uprawnień użytkownika.</span><span class="sxs-lookup"><span data-stu-id="e25da-189">Do one of the following to open a Windows PowerShell session with elevated user rights.</span></span>

   - <span data-ttu-id="e25da-190">Na pulpicie systemu Windows kliknij prawym przyciskiem myszy **środowiska Windows PowerShell** na pasku zadań, a następnie kliknij przycisk **Uruchom jako Administrator**.</span><span class="sxs-lookup"><span data-stu-id="e25da-190">On the Windows desktop, right-click **Windows PowerShell** on the taskbar, and then click **Run as Administrator**.</span></span>

   - <span data-ttu-id="e25da-191">Na Windows **Start** ekranu, kliknij prawym przyciskiem myszy **programu Windows PowerShell**, a następnie kliknij przycisk **Uruchom jako Administrator**.</span><span class="sxs-lookup"><span data-stu-id="e25da-191">On the Windows **Start** screen, right-click **Windows PowerShell**, and then click **Run as Administrator**.</span></span>

2. <span data-ttu-id="e25da-192">**Krok opcjonalny** umożliwiający ograniczenie dostępu użytkowników za pomocą konfiguracji sesji:</span><span class="sxs-lookup"><span data-stu-id="e25da-192">**Optional step** For restricting user access by using session configurations:</span></span>

   <span data-ttu-id="e25da-193">Sprawdź, czy konfiguracje sesji, do których chcesz użyć, już istnieją w regułach.</span><span class="sxs-lookup"><span data-stu-id="e25da-193">Verify that the session configurations that you want to use, already exist in your rules .</span></span>

   <span data-ttu-id="e25da-194">Jeśli one nie zostały jeszcze utworzone, skorzystaj z instrukcji tworzenia konfiguracji sesji w [about_Session_Configuration_Files](/powershell/module/microsoft.powershell.core/about/about_session_configuration_files).</span><span class="sxs-lookup"><span data-stu-id="e25da-194">If they have not yet been created, use instructions for creating session configurations in [about_Session_Configuration_Files](/powershell/module/microsoft.powershell.core/about/about_session_configuration_files).</span></span>

3. <span data-ttu-id="e25da-195">Ta reguła autoryzacji zezwala określonemu użytkownikowi na dostęp do jednego komputera w sieci, do których zwykle mają dostęp z uprawnieniami do konfiguracji określonej sesji, które są ograniczone do użytkownika "™ s typowe potrzeby skrypty i polecenia cmdlet.</span><span class="sxs-lookup"><span data-stu-id="e25da-195">This authorization rule allows a specific user access to one computer on the network to which they typically have access, with access to a specific session configuration that is scoped to the user'™s typical scripting and cmdlet needs.</span></span> <span data-ttu-id="e25da-196">Wpisz następujące polecenie, a następnie naciśnij klawisz **Enter**.</span><span class="sxs-lookup"><span data-stu-id="e25da-196">Type the following, and then press **Enter**.</span></span>

   ```
   Add-PswaAuthorizationRule -UserName <domain\user | computer\user> `
      -ComputerName <computer_name> -ConfigurationName <session_configuration_name>
   ```

   - <span data-ttu-id="e25da-197">W poniższym przykładzie użytkownik o nazwie _JSmith_ w _Contoso_ domeny ma uprawnienia do zarządzania komputerem _Contoso_214_i korzystać z konfiguracji sesji o nazwie _NewAdminsOnly_.</span><span class="sxs-lookup"><span data-stu-id="e25da-197">In the following example, a user named _JSmith_ in the _Contoso_ domain is granted access to manage the computer _Contoso_214_, and use a session configuration named _NewAdminsOnly_.</span></span>

   ```powershell
   Add-PswaAuthorizationRule -UserName 'Contoso\JSmith' `
      -ComputerName Contoso_214 -ConfigurationName NewAdminsOnly
   ```

4. <span data-ttu-id="e25da-198">Sprawdź, czy reguła została utworzona za pomocą **Get-PswaAuthorizationRule** polecenia cmdlet, lub `Test-PswaAuthorizationRule -UserName <domain\user | computer\user> -ComputerName** <computer_name>`.</span><span class="sxs-lookup"><span data-stu-id="e25da-198">Verify that the rule has been created by running either the **Get-PswaAuthorizationRule** cmdlet, or `Test-PswaAuthorizationRule -UserName <domain\user | computer\user> -ComputerName** <computer_name>`.</span></span>
   <span data-ttu-id="e25da-199">Na przykład `Test-PswaAuthorizationRule -UserName Contoso\\JSmith -ComputerName Contoso_214`.</span><span class="sxs-lookup"><span data-stu-id="e25da-199">For example, `Test-PswaAuthorizationRule -UserName Contoso\\JSmith -ComputerName Contoso_214`.</span></span>

#### <a name="to-remove-an-authorization-rule"></a><span data-ttu-id="e25da-200">Aby usunąć regułę autoryzacji</span><span class="sxs-lookup"><span data-stu-id="e25da-200">To remove an authorization rule</span></span>

1. <span data-ttu-id="e25da-201">Jeśli w sesji programu Windows PowerShell nie jest jeszcze otwarty, zobacz krok 1 [dodać restrykcyjną regułę autoryzacji](#to-add-a-restrictive-authorization-rule) w tej sekcji.</span><span class="sxs-lookup"><span data-stu-id="e25da-201">If a Windows PowerShell session is not already open, see step 1 of [to add a restrictive authorization rule](#to-add-a-restrictive-authorization-rule) in this section.</span></span>

2. <span data-ttu-id="e25da-202">Wpisz następujące polecenie, a następnie naciśnij klawisz **Enter**, gdzie *ID reguły* reprezentuje unikatowy numer identyfikacyjny reguły, która ma zostać usunięty.</span><span class="sxs-lookup"><span data-stu-id="e25da-202">Type the following, and then press **Enter**, where *rule ID* represents the unique ID number of the rule that you want to remove.</span></span>

   ```
   Remove-PswaAuthorizationRule -ID <rule ID>
   ```

   <span data-ttu-id="e25da-203">Jeśli nie znasz numeru identyfikacyjnego, ale znasz przyjazną nazwę reguły, którą chcesz usunąć, możesz pobrać nazwę reguły i przekazać ją w potoku do polecenia cmdlet `Remove-PswaAuthorizationRule`, aby usunąć regułę, zgodnie z tym przykładem:</span><span class="sxs-lookup"><span data-stu-id="e25da-203">Alternatively, if you do not know the ID number, but know the friendly name of the rule you want to remove, you can get the name of the rule, and pipe it to the `Remove-PswaAuthorizationRule` cmdlet to remove the rule, as shown in the following example:</span></span>

   ```
   Get-PswaAuthorizationRule `
      -RuleName <rule-name> | Remove-PswaAuthorizationRule
   ```

> [!NOTE]
> <span data-ttu-id="e25da-204">Nie monit o potwierdzenie chęci usunięcia wskazanej reguły autoryzacji; Reguła zostanie usunięta po naciśnięciu klawisza **Enter**.</span><span class="sxs-lookup"><span data-stu-id="e25da-204">You are not prompted to confirm whether you want to delete the specified authorization rule; the rule is deleted when you press **Enter**.</span></span> <span data-ttu-id="e25da-205">Upewnij się, że chcesz usunąć regułę autoryzacji, zanim uruchomisz polecenie cmdlet `Remove-PswaAuthorizationRule`.</span><span class="sxs-lookup"><span data-stu-id="e25da-205">Be sure that you want to remove the authorization rule before running the `Remove-PswaAuthorizationRule` cmdlet.</span></span>

#### <a name="other-authorization-rule-scenario-examples"></a><span data-ttu-id="e25da-206">Inne przykłady scenariuszy związanych z regułami autoryzacji</span><span class="sxs-lookup"><span data-stu-id="e25da-206">Other authorization rule scenario examples</span></span>

<span data-ttu-id="e25da-207">Każdej sesji programu Windows PowerShell korzysta z konfiguracji sesji; Jeśli nie została wskazana dla sesji, programu Windows PowerShell korzysta z domyślną, wbudowaną konfigurację sesji programu Windows PowerShell, o nazwie Microsoft.PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e25da-207">Every Windows PowerShell session uses a session configuration; if one is not specified for a session, Windows PowerShell uses the default, built-in Windows PowerShell session configuration, called Microsoft.PowerShell.</span></span> <span data-ttu-id="e25da-208">Domyślna konfiguracja sesji obejmuje wszystkie polecenia cmdlet dostępne na danym komputerze.</span><span class="sxs-lookup"><span data-stu-id="e25da-208">The default session configuration includes all cmdlets that are available on a computer.</span></span> <span data-ttu-id="e25da-209">Administratorzy mogą ograniczyć dostęp do wszystkich komputerów, definiując konfigurację sesji z ograniczonym obszarem działania (ograniczonym zakresem poleceń cmdlet i zadań, które mogą wykonywać użytkownicy końcowi).</span><span class="sxs-lookup"><span data-stu-id="e25da-209">Administrators can restrict access to all computers by defining a session configuration with a restricted runspace (a limited range of cmdlets and tasks that their end users could perform).</span></span> <span data-ttu-id="e25da-210">Użytkownik, który uzyskuje dostęp do jednego komputera z pełną obsługą języka lub wyłącznie cmdlet zarządzania zdalnego programu Windows PowerShell można połączyć na innych komputerach, które są połączone z pierwszym komputerem.</span><span class="sxs-lookup"><span data-stu-id="e25da-210">A user who is granted access to one computer with either full language access or only the Windows PowerShell remote management cmdlets can connect to other computers that are connected to the first computer.</span></span> <span data-ttu-id="e25da-211">Definiowanie ograniczonym obszarem działania mogą uniemożliwić użytkownikom uzyskiwanie dostępu do innych komputerów z ich dozwolonych obszarem działania programu Windows PowerShell i zwiększa bezpieczeństwo środowiska Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="e25da-211">Defining a restricted runspace can prevent users from accessing other computers from their allowed Windows PowerShell runspace, and improves the security of your Windows PowerShell Web Access environment.</span></span> <span data-ttu-id="e25da-212">Konfiguracja sesji mogą być dystrybuowane (przy użyciu zasad grupy), do wszystkich komputerów, które Administratorzy planują udostępnić za pośrednictwem programu Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="e25da-212">The session configuration can be distributed (by using Group Policy) to all computers that administrators want to make accessible through Windows PowerShell Web Access.</span></span> <span data-ttu-id="e25da-213">Aby uzyskać więcej informacji na temat konfiguracji sesji, zobacz [informacje o konfiguracjach sesji](https://technet.microsoft.com/library/dd819508.aspx).</span><span class="sxs-lookup"><span data-stu-id="e25da-213">For more information about session configurations, see [about_Session_Configurations](https://technet.microsoft.com/library/dd819508.aspx).</span></span> <span data-ttu-id="e25da-214">Poniżej przedstawiono kilka przykładów tego scenariusza.</span><span class="sxs-lookup"><span data-stu-id="e25da-214">The following are some examples of this scenario.</span></span>

- <span data-ttu-id="e25da-215">Administrator tworzy punkt końcowy o nazwie **Punktkoncowypswa**, z ograniczonym obszarem działania.</span><span class="sxs-lookup"><span data-stu-id="e25da-215">An administrator creates an endpoint, called **PswaEndpoint**, with a restricted runspace.</span></span> <span data-ttu-id="e25da-216">Następnie administrator tworzy regułę, `*,*,PswaEndpoint`i rozpowszechnia punkt końcowy na innych komputerach.</span><span class="sxs-lookup"><span data-stu-id="e25da-216">Then, the administrator creates a rule, `*,*,PswaEndpoint`, and distributes the endpoint to other computers.</span></span> <span data-ttu-id="e25da-217">Ta reguła zezwala wszystkim użytkownikom na dostęp do wszystkich komputerów z punktem końcowym **Punktkoncowypswa**.</span><span class="sxs-lookup"><span data-stu-id="e25da-217">The rule allows all users to access all computers with the endpoint **PswaEndpoint**.</span></span>
  <span data-ttu-id="e25da-218">Jeśli to jedyna reguła autoryzacji zdefiniowana w zestawie reguł, komputery bez tego punktu końcowego będą niedostępne.</span><span class="sxs-lookup"><span data-stu-id="e25da-218">If this is the only authorization rule defined in the rule set, computers without that endpoint would not be accessible.</span></span>

- <span data-ttu-id="e25da-219">Administrator utworzył punkt końcowy z ograniczonym obszarem działania o nazwie **Punktkoncowypswa**i chce ograniczyć dostęp do określonych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="e25da-219">The administrator created an endpoint with a restricted runspace called **PswaEndpoint**,and wants to restrict access to specific users.</span></span> <span data-ttu-id="e25da-220">Administrator tworzy grupę użytkowników o nazwie **pomoc1poziomu**i definiuje następującą regułę: **Pomoc1poziomu,\*, Punktkoncowypswa**.</span><span class="sxs-lookup"><span data-stu-id="e25da-220">The administrator creates a group of users called **Level1Support**, and defines the following rule: **Level1Support,\*,PswaEndpoint**.</span></span> <span data-ttu-id="e25da-221">Reguła zezwala wszystkim użytkownikom w grupie **pomoc1poziomu** dostęp do wszystkich komputerów z **Punktkoncowypswa** konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="e25da-221">The rule grants any users in the group **Level1Support** access to all computers with the **PswaEndpoint** configuration.</span></span> <span data-ttu-id="e25da-222">W podobny sposób można zezwolić na dostęp tylko do określonego zestawu komputerów.</span><span class="sxs-lookup"><span data-stu-id="e25da-222">Similarly, access can be restricted to a specific set of computers.</span></span>

- <span data-ttu-id="e25da-223">Niektórzy administratorzy przyznają określonym użytkownikom szerszy dostęp niż innym.</span><span class="sxs-lookup"><span data-stu-id="e25da-223">Some administrators provide certain users more access than others.</span></span> <span data-ttu-id="e25da-224">Na przykład administrator tworzy dwie grupy użytkowników, **Administratorzy** i **Pomocpodstawowa**.</span><span class="sxs-lookup"><span data-stu-id="e25da-224">For example, an administrator creates two user groups, **Admins** and **BasicSupport**.</span></span> <span data-ttu-id="e25da-225">Administrator tworzy również punkt końcowy z ograniczonym obszarem działania o nazwie **Punktkoncowypswa**i definiuje następujące dwie reguły: **Administratorzy,\*,\***  i **Pomocpodstawowa,\*, Punktkoncowypswa**.</span><span class="sxs-lookup"><span data-stu-id="e25da-225">The administrator also creates an endpoint with a restricted runspace called **PswaEndpoint**, and defines the following two rules: **Admins,\*,\*** and **BasicSupport,\*,PswaEndpoint**.</span></span> <span data-ttu-id="e25da-226">Pierwsza reguła zawiera wszystkich użytkowników w **administratora** grupie dostępu do wszystkich komputerów, a druga reguła zawiera wszystkich użytkowników w **Pomocpodstawowa** grupie dostęp tylko do komputerów z  **Punktkoncowypswa**.</span><span class="sxs-lookup"><span data-stu-id="e25da-226">The first rule provides all users in the **Admin** group access to all computers, and the second rule provides all users in the **BasicSupport** group access only to those computers with **PswaEndpoint**.</span></span>

- <span data-ttu-id="e25da-227">Administrator skonfigurował prywatne środowisko testowe i chce zezwolić wszystkim autoryzowanym użytkownikom sieci na dostęp do wszystkich komputerów w sieci, do których zwykle mają oni dostęp, ze wszystkimi konfiguracjami sieci, do których zwykle mają dostęp.</span><span class="sxs-lookup"><span data-stu-id="e25da-227">An administrator has set up a private test environment, and wants to allow all authorized network users access to all computers on the network to which they typically have access, with access to all session configurations to which they typically have access.</span></span> <span data-ttu-id="e25da-228">Ponieważ jest to prywatne środowisko testowe, administrator tworzy regułę autoryzacji, która nie jest bezpieczna.</span><span class="sxs-lookup"><span data-stu-id="e25da-228">Because this is a private test environment, the administrator creates an authorization rule that is not secure.</span></span> <span data-ttu-id="e25da-229">-Administrator uruchamia polecenie cmdlet `Add-PswaAuthorizationRule * * *`, który używa znaku wieloznacznego **\*** do reprezentowania wszystkich użytkowników, wszystkie komputery i wszystkie konfiguracje.</span><span class="sxs-lookup"><span data-stu-id="e25da-229">- The administrator runs the cmdlet `Add-PswaAuthorizationRule * * *`, which uses the wildcard character **\*** to represent all users, all computers, and all configurations.</span></span> <span data-ttu-id="e25da-230">— Ta reguła jest odpowiednikiem następującego: `Add-PswaAuthorizationRule -UserName * -ComputerName * -ConfigurationName *`.</span><span class="sxs-lookup"><span data-stu-id="e25da-230">- This rule is the equivalent of the following: `Add-PswaAuthorizationRule -UserName * -ComputerName * -ConfigurationName *`.</span></span>

  > [!NOTE]
  > <span data-ttu-id="e25da-231">Ta zasada nie jest zalecane w bezpiecznym środowisku i pomija warstwę reguły autoryzacji zabezpieczeń zapewnianych przez program Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="e25da-231">This rule is not recommended in a secure environment, and bypasses the authorization rule layer of security provided by Windows PowerShell Web Access.</span></span>

- <span data-ttu-id="e25da-232">Administrator musi zezwolić użytkownikom na łączenie się z komputerami docelowymi w środowisku obejmującym zarówno grupy robocze, jak i domeny, w którym komputery grup roboczych są czasami używane do łączenia się z komputerami docelowymi w domenach, a komputery w domenach są czasami używane do łączenia się z komputerami docelowymi w grupach roboczych.</span><span class="sxs-lookup"><span data-stu-id="e25da-232">An administrator must allow users to connect to target computers in an environment that includes both workgroups and domains, where workgroup computers are occasionally used to connect to target computers in domains, and computers in domains are occasionally used to connect to target computers in workgroups.</span></span> <span data-ttu-id="e25da-233">Administrator ma serwer bramy *PswaServer*, w grupie roboczej i komputer docelowy *srv1.contoso.com* znajduje się w domenie.</span><span class="sxs-lookup"><span data-stu-id="e25da-233">The administrator has a gateway server, *PswaServer*, in a workgroup; and target computer *srv1.contoso.com* is in a domain.</span></span> <span data-ttu-id="e25da-234">Użytkownik *Chris* jest autoryzowanym użytkownikiem lokalnym na serwerze bramy grupy roboczej i komputer docelowy.</span><span class="sxs-lookup"><span data-stu-id="e25da-234">User *Chris* is an authorized local user on both the workgroup gateway server and the target computer.</span></span> <span data-ttu-id="e25da-235">Jego nazwa użytkownika na serwerze grupy roboczej jest *chrisLocal*; a jego nazwa użytkownika na komputerze docelowym jest *contoso\\chris*.</span><span class="sxs-lookup"><span data-stu-id="e25da-235">His user name on the workgroup server is *chrisLocal*; and his user name on the target computer is *contoso\\chris*.</span></span> <span data-ttu-id="e25da-236">Aby zezwolić Chrisowi na dostęp do komputera srv1.contoso.com, administrator dodaje następującą regułę.</span><span class="sxs-lookup"><span data-stu-id="e25da-236">To authorize access to srv1.contoso.com for Chris, the administrator adds the following rule.</span></span>

```powershell
Add-PswaAuthorizationRule -userName PswaServer\chrisLocal `
   -computerName srv1.contoso.com -configurationName Microsoft.PowerShell
```

<span data-ttu-id="e25da-237">Reguła z powyższego przykładu powoduje uwierzytelnienie Chrisa na serwerze bramy, a następnie autoryzację jego dostępu do *srv1*.</span><span class="sxs-lookup"><span data-stu-id="e25da-237">The preceding rule example authenticates Chris on the gateway server, and then authorizes his access to *srv1*.</span></span> <span data-ttu-id="e25da-238">Na stronie logowania Chris musi podać drugi zestaw poświadczeń w **opcjonalne ustawienia połączenia** obszaru (*contoso\\chris*).</span><span class="sxs-lookup"><span data-stu-id="e25da-238">On the sign-in page, Chris must provide a second set of credentials in the **Optional connection settings** area (*contoso\\chris*).</span></span> <span data-ttu-id="e25da-239">Serwer bramy zastosuje dodatkowy zestaw poświadczeń w celu uwierzytelnienia użytkownika na komputerze docelowym *srv1.contoso.com*.</span><span class="sxs-lookup"><span data-stu-id="e25da-239">The gateway server uses the additional set of credentials to authenticate him on the target computer, *srv1.contoso.com*.</span></span>

<span data-ttu-id="e25da-240">W powyższym scenariuszu program Windows PowerShell Web Access ustanawia pomyślnie połączenie z komputerem docelowym, tylko wtedy, gdy poniżej zostały pomyślnie i dopuszczeniu przez co najmniej jedną regułę autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="e25da-240">In the preceding scenario, Windows PowerShell Web Access establishes a successful connection to the target computer only after the following have been successful, and allowed by at least one authorization rule.</span></span>

1. <span data-ttu-id="e25da-241">Uwierzytelnianie na serwerze bramy grupy roboczej przez dodanie nazwy użytkownika w formacie *nazwa_serwera*\\*nazwa_użytkownika* reguły autoryzacji</span><span class="sxs-lookup"><span data-stu-id="e25da-241">Authentication on the workgroup gateway server by adding a user name in the format *server_name*\\*user_name* to the authorization rule</span></span>

2. <span data-ttu-id="e25da-242">Uwierzytelnianie na komputerze docelowym, korzystając z poświadczeń wprowadzonych na stronie logowania w **opcjonalne ustawienia połączenia** obszaru</span><span class="sxs-lookup"><span data-stu-id="e25da-242">Authentication on the target computer by using alternate credentials provided on the sign-in page, in the **Optional connection settings** area</span></span>

   > [!NOTE]
   > <span data-ttu-id="e25da-243">Jeśli brama i komputer docelowy znajdują się w różnych grupach roboczych lub domenach, należy ustanowić relację zaufania między oboma komputerami w grupach roboczych, obiema domenami lub grupą roboczą a domeną.</span><span class="sxs-lookup"><span data-stu-id="e25da-243">If gateway and target computers are in different workgroups or domains, a trust relationship must be established between the two workgroup computers, the two domains, or between the workgroup and the domain.</span></span> <span data-ttu-id="e25da-244">Ta relacja nie można skonfigurować za pomocą poleceń cmdlet reguł autoryzacji programu Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="e25da-244">This relationship cannot be configured by using Windows PowerShell Web Access authorization rule cmdlets.</span></span> <span data-ttu-id="e25da-245">Reguły autoryzacji nie definiują relacji zaufania między komputerami, a jedynie autoryzują użytkowników do łączenia się z określonymi komputerami docelowymi i konfiguracjami sesji.</span><span class="sxs-lookup"><span data-stu-id="e25da-245">Authorization rules do not define a trust relationship between computers; they can only authorize users to connect to specific target computers and session configurations.</span></span> <span data-ttu-id="e25da-246">Aby uzyskać więcej informacji na temat sposobu konfigurowania relacji zaufania między domenami, zobacz [Tworzenie domeny i relacje zaufania lasu](https://technet.microsoft.com/library/cc794775.aspx).</span><span class="sxs-lookup"><span data-stu-id="e25da-246">For more information about how to configure a trust relationship between different domains, see [Creating Domain and Forest Trusts](https://technet.microsoft.com/library/cc794775.aspx).</span></span>
   > <span data-ttu-id="e25da-247">Aby uzyskać więcej informacji na temat dodawania komputerów grupy roboczej do listy zaufanych hostów, zobacz [zdalne zarządzanie za pomocą Menedżera serwera](https://technet.microsoft.com/library/dd759202.aspx).</span><span class="sxs-lookup"><span data-stu-id="e25da-247">For more information about how to add workgroup computers to a trusted hosts list, see [Remote Management with Server Manager](https://technet.microsoft.com/library/dd759202.aspx).</span></span>

### <a name="using-a-single-set-of-authorization-rules-for-multiple-sites"></a><span data-ttu-id="e25da-248">Używanie jednego zestawu reguł autoryzacji dla wielu lokacji</span><span class="sxs-lookup"><span data-stu-id="e25da-248">Using a single set of authorization rules for multiple sites</span></span>

<span data-ttu-id="e25da-249">Reguły autoryzacji są przechowywane w pliku XML.</span><span class="sxs-lookup"><span data-stu-id="e25da-249">Authorization rules are stored in an XML file.</span></span> <span data-ttu-id="e25da-250">Domyślnie nazwa ścieżki pliku XML jest `%windir%\Web\PowershellWebAccess\data\AuthorizationRules.xml`.</span><span class="sxs-lookup"><span data-stu-id="e25da-250">By default, the path name of the XML file is `%windir%\Web\PowershellWebAccess\data\AuthorizationRules.xml`.</span></span>

<span data-ttu-id="e25da-251">Ścieżka do pliku XML z regułami autoryzacji jest przechowywana w **powwa.config** pliku, który znajduje się w `%windir%\Web\PowershellWebAccess\data`.</span><span class="sxs-lookup"><span data-stu-id="e25da-251">The path to the authorization rules XML file is stored in the **powwa.config** file, which is found in `%windir%\Web\PowershellWebAccess\data`.</span></span> <span data-ttu-id="e25da-252">Administrator ma może zmienić odwołanie do ścieżki domyślnej w **powwa.config** do preferencji lub potrzeb.</span><span class="sxs-lookup"><span data-stu-id="e25da-252">The administrator has the flexibility to change the reference to the default path in **powwa.config** to suit preferences or requirements.</span></span> <span data-ttu-id="e25da-253">Administratora zmienić lokalizację pliku umożliwia wielu bram Windows PowerShell Web Access, użyj tych samych reguł autoryzacji, jeśli taka konfiguracja jest pożądane.</span><span class="sxs-lookup"><span data-stu-id="e25da-253">Allowing the administrator to change the location of the file lets multiple Windows PowerShell Web Access gateways use the same authorization rules, if such a configuration is desired.</span></span>

## <a name="session-management"></a><span data-ttu-id="e25da-254">Zarządzanie sesjami</span><span class="sxs-lookup"><span data-stu-id="e25da-254">Session management</span></span>

<span data-ttu-id="e25da-255">Domyślnie program Windows PowerShell Web Access ogranicza użytkownikowi trzy sesji w tym samym czasie.</span><span class="sxs-lookup"><span data-stu-id="e25da-255">By default, Windows PowerShell Web Access limits a user to three sessions at one time.</span></span> <span data-ttu-id="e25da-256">Można edytować aplikacji sieci web **web.config** plików w Menedżerze usług IIS w celu obsługi innej liczby sesji na użytkownika.</span><span class="sxs-lookup"><span data-stu-id="e25da-256">You can edit the web application's **web.config** file in IIS Manager to support a different number of sessions per user.</span></span> <span data-ttu-id="e25da-257">Ścieżka do **web.config** plik jest `$Env:Windir\Web\PowerShellWebAccess\wwwroot\Web.config`.</span><span class="sxs-lookup"><span data-stu-id="e25da-257">The path to the **web.config** file is `$Env:Windir\Web\PowerShellWebAccess\wwwroot\Web.config`.</span></span>

<span data-ttu-id="e25da-258">Domyślnie serwer sieci Web usług IIS jest skonfigurowany na ponowne uruchomienie puli aplikacji, jeśli jakichkolwiek zmian ustawień.</span><span class="sxs-lookup"><span data-stu-id="e25da-258">By default, IIS Web Server is configured to restart the application pool if any settings are edited.</span></span> <span data-ttu-id="e25da-259">Na przykład, ponownym uruchomieniu puli aplikacji, jeśli zmiany zostały wprowadzone **web.config** pliku.</span><span class="sxs-lookup"><span data-stu-id="e25da-259">For example, the application pool is restarted if changes are made to the **web.config** file.</span></span> <span data-ttu-id="e25da-260">> ponieważ **programu Windows PowerShell Web Access** używa stanów sesji w pamięci > Użytkownicy zalogowani celu **programu Windows PowerShell Web Access** sesje tracą swoje sesje, po ponownym uruchomieniu puli aplikacji.</span><span class="sxs-lookup"><span data-stu-id="e25da-260">>Because **Windows PowerShell Web Access** uses in-memory session states, >users signed in to **Windows PowerShell Web Access** sessions lose their sessions when the application pool is restarted.</span></span>

### <a name="setting-default-parameters-on-the-sign-in-page"></a><span data-ttu-id="e25da-261">Ustawianie parametrów domyślnych na stronie logowania</span><span class="sxs-lookup"><span data-stu-id="e25da-261">Setting default parameters on the sign-in page</span></span>

<span data-ttu-id="e25da-262">Jeśli brama programu Windows PowerShell Web Access jest uruchomiony w systemie Windows Server 2012 R2, można skonfigurować domyślne wartości ustawień, które są wyświetlane na stronie logowania programu Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="e25da-262">If your Windows PowerShell Web Access gateway is running on Windows Server 2012 R2, you can configure default values for the settings that are displayed on the Windows PowerShell Web Access sign-in page.</span></span> <span data-ttu-id="e25da-263">Możesz skonfigurować wartości w **web.config** pliku, który jest opisany w poprzednim akapicie.</span><span class="sxs-lookup"><span data-stu-id="e25da-263">You can configure values in the **web.config** file that is described in the preceding paragraph.</span></span> <span data-ttu-id="e25da-264">Wartości domyślne ustawień strony logowania znajdują się w **appSettings** sekcji w pliku web.config; Oto przykład **appSettings** sekcji.</span><span class="sxs-lookup"><span data-stu-id="e25da-264">Default values for the sign-in page settings are found in the **appSettings** section of the web.config file; the following is an example of the **appSettings** section.</span></span> <span data-ttu-id="e25da-265">Prawidłowe wartości dla wielu z tych ustawień są takie same jak w przypadku odpowiednich parametrów [New-PSSession](https://technet.microsoft.com/library/hh849717.aspx) polecenia cmdlet programu Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e25da-265">Valid values for many of these settings are the same as those for the corresponding parameters of the [New-PSSession](https://technet.microsoft.com/library/hh849717.aspx) cmdlet in Windows PowerShell.</span></span>

<span data-ttu-id="e25da-266">Na przykład `defaultApplicationName` klucza, jak pokazano w poniższym fragmencie kodu jest wartością **$PSSessionApplicationName** zmiennej preferencji na komputerze docelowym.</span><span class="sxs-lookup"><span data-stu-id="e25da-266">For example, the `defaultApplicationName` key, as shown in the following code block, is the value of the **$PSSessionApplicationName** preference variable on the target computer.</span></span>

```xml
  <appSettings>
      <add key="maxSessionsAllowedPerUser" value="3"/>
      <add key="defaultPortNumber" value="5985"/>
      <add key="defaultSSLPortNumber" value="5986"/>
      <add key="defaultApplicationName" value="WSMAN"/>
      <add key="defaultUseSslSelection" value="0"/>
      <add key="defaultAuthenticationType" value="0"/>
      <add key="defaultAllowRedirection" value="0"/>
      <add key="defaultConfigurationName" value="Microsoft.PowerShell"/>
  </appSettings>
```

### <a name="time-outs-and-unplanned-disconnections"></a><span data-ttu-id="e25da-267">Limity czasu i rozłączenia nieplanowane</span><span class="sxs-lookup"><span data-stu-id="e25da-267">Time-outs and unplanned disconnections</span></span>

<span data-ttu-id="e25da-268">Przekroczono limit czasu sesji programu Windows PowerShell Web Access. W programie Windows PowerShell Web Access uruchomiona w systemie Windows Server 2012 komunikat o limicie czasu jest wyświetlany użytkownikom logował się po 15 minutach nieaktywności sesji.</span><span class="sxs-lookup"><span data-stu-id="e25da-268">Windows PowerShell Web Access sessions time out. In Windows PowerShell Web Access running on Windows Server 2012, A time-out message is displayed to signed-in users after 15 minutes of session inactivity.</span></span> <span data-ttu-id="e25da-269">Jeśli użytkownik nie odpowie w ciągu pięciu minut od wyświetlenia komunikatu o limicie czasu, sesja zostanie zakończona, a użytkownik — wylogowany. Można zmienić limit czasu sesji w ustawieniach witryny internetowej w Menedżerze usług IIS.</span><span class="sxs-lookup"><span data-stu-id="e25da-269">If the user does not respond within five minutes after the time-out message is displayed, the session is ended, and the user is signed out. You can change time-out periods for sessions in the website settings in IIS Manager.</span></span>

<span data-ttu-id="e25da-270">W programie Windows PowerShell Web Access uruchomiona w systemie Windows Server 2012 R2 limit czasu sesji, domyślnie, po upływie 20 minut braku aktywności.</span><span class="sxs-lookup"><span data-stu-id="e25da-270">In Windows PowerShell Web Access running on Windows Server 2012 R2, sessions time out, by default, after 20 minutes of inactivity.</span></span> <span data-ttu-id="e25da-271">Przypadku rozłączenia sesji w konsoli sieci web z powodu błędów sieci lub innych nieplanowane wyłączenie lub błędy, a nie, ponieważ mają one zamknięciem sesji przez sesji programu Windows PowerShell Web Access w dalszym ciągu uruchamiać, nawiązanie połączenia komputerów docelowych, aż do limitu czasu na wygaśnie po stronie klienta.</span><span class="sxs-lookup"><span data-stu-id="e25da-271">If users are disconnected from sessions in the web-based console because of network errors or other unplanned shutdowns or failures, and not because they have closed the sessions themselves, the Windows PowerShell Web Access sessions continue to run, connected to target computers, until the time-out period on the client side lapses.</span></span> <span data-ttu-id="e25da-272">Sesja zostaje rozłączona po upływie domyślnego limitu 20 minut lub innego limitu czasu określonego przez administratora bramy — w zależności od tego, który z tych limitów jest krótszy.</span><span class="sxs-lookup"><span data-stu-id="e25da-272">The session is disconnected after either the default 20 minutes, or after the time-out period specified by the gateway administrator, whichever is shorter.</span></span>

<span data-ttu-id="e25da-273">Jeśli serwer bramy działa system Windows Server 2012 R2, Windows PowerShell Web Access umożliwia użytkownikom ponowne połączenia z zapisanymi sesjami w późniejszym czasie, ale w przypadku rozłączenia sesji błędy sieci, nieplanowane wyłączenie lub inne błędy użytkownik nie może zobaczyć i ponownie zapisać sesje, aż po upływie limitu czasu określonego przez bramę wygasł administratora.</span><span class="sxs-lookup"><span data-stu-id="e25da-273">If the gateway server is running Windows Server 2012 R2, Windows PowerShell Web Access lets users reconnect to saved sessions at a later time, but when network errors, unplanned shutdowns, or other failures disconnect sessions, users cannot see or reconnect to saved sessions until after the time-out period specified by the gateway administrator has lapsed.</span></span>

## <a name="see-also"></a><span data-ttu-id="e25da-274">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="e25da-274">See Also</span></span>

<span data-ttu-id="e25da-275">[Instalowanie i używanie programu Windows PowerShell Web Access](https://technet.microsoft.com/library/hh831611(v=ws.11).aspx)</span><span class="sxs-lookup"><span data-stu-id="e25da-275">[Install and Use Windows PowerShell Web Access](https://technet.microsoft.com/library/hh831611(v=ws.11).aspx)</span></span>

[<span data-ttu-id="e25da-276">about_Session_Configurations</span><span class="sxs-lookup"><span data-stu-id="e25da-276">about_Session_Configurations</span></span>](https://technet.microsoft.com/library/dd819508.aspx)

[<span data-ttu-id="e25da-277">Polecenia cmdlet programu Windows PowerShell Web Access</span><span class="sxs-lookup"><span data-stu-id="e25da-277">Windows PowerShell Web Access Cmdlets</span></span>](/powershell/module/powershellwebaccess/?view=winserver2012r2-ps)

---
ms.date: 06/12/2017
ms.topic: conceptual
keywords: wmf,powershell,setup
contributor: jianyunt, quoctruong
title: Ulepszenia zarządzania pakietami w programie WMF 5.1
ms.openlocfilehash: 30ef59ed9dc0d56636d85cc6e53523a9a73963a4
ms.sourcegitcommit: e7445ba8203da304286c591ff513900ad1c244a4
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/23/2019
ms.locfileid: "62055619"
---
# <a name="improvements-to-package-management-in-wmf-51"></a><span data-ttu-id="cd1c7-103">Ulepszenia zarządzania pakietami w programie WMF 5.1</span><span class="sxs-lookup"><span data-stu-id="cd1c7-103">Improvements to Package Management in WMF 5.1</span></span>

## <a name="improvements-in-packagemanagement"></a><span data-ttu-id="cd1c7-104">Ulepszenia funkcji PackageManagement</span><span class="sxs-lookup"><span data-stu-id="cd1c7-104">Improvements in PackageManagement</span></span>

<span data-ttu-id="cd1c7-105">Poprawki wprowadzone w program WMF 5.1 są następujące:</span><span class="sxs-lookup"><span data-stu-id="cd1c7-105">The following are the fixes made in the WMF 5.1:</span></span>

### <a name="version-alias"></a><span data-ttu-id="cd1c7-106">Alias wersji</span><span class="sxs-lookup"><span data-stu-id="cd1c7-106">Version Alias</span></span>

<span data-ttu-id="cd1c7-107">**Scenariusz**: Jeśli masz wersję 1.0 i 2.0 pakiet, P1, zainstalowanych w systemie, a chcesz odinstalować w wersji 1.0, należy uruchomić następujące polecenie `Uninstall-Package -Name P1 -Version 1.0` i oczekują w wersji 1.0 do odinstalowania po uruchomieniu polecenia cmdlet.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-107">**Scenario**: If you have version 1.0 and 2.0 of a package, P1, installed on your system, and you want to uninstall version 1.0, you would run `Uninstall-Package -Name P1 -Version 1.0` and expect version 1.0 to be uninstalled after running the cmdlet.</span></span> <span data-ttu-id="cd1c7-108">Jednak wynik jest w tej wersji 2.0 zostaje odinstalowana.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-108">However the result is that version 2.0 gets uninstalled.</span></span>

<span data-ttu-id="cd1c7-109">Dzieje się tak dlatego `-Version` parametru jest aliasem `-MinimumVersion` parametru.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-109">This occurs because the `-Version` parameter is an alias of the `-MinimumVersion` parameter.</span></span> <span data-ttu-id="cd1c7-110">Funkcja PackageManagement szuka kwalifikowaną pakietu co najmniej w wersji 1.0, funkcja zwraca najnowszej wersji.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-110">When PackageManagement is looking for a qualified package with the minimum version of 1.0, it returns the latest version.</span></span> <span data-ttu-id="cd1c7-111">To zachowanie jest oczekiwane w warunkach normalnych, ponieważ uważa się, że najnowsza wersja jest zazwyczaj oczekiwany rezultat.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-111">This behavior is expected in normal cases because finding the latest version is usually the desired result.</span></span> <span data-ttu-id="cd1c7-112">Jednak nie ma zastosowania do `Uninstall-Package` przypadek.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-112">However, it should not apply to the `Uninstall-Package` case.</span></span>

<span data-ttu-id="cd1c7-113">**Rozwiązanie**: usunięte `-Version` aliasu w całości PackageManagement (zwane)</span><span class="sxs-lookup"><span data-stu-id="cd1c7-113">**Solution**:removed `-Version` alias entirely in PackageManagement (a.k.a.</span></span> <span data-ttu-id="cd1c7-114">OneGet) i modułu PowerShellGet.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-114">OneGet) and PowerShellGet.</span></span>

### <a name="multiple-prompts-for-bootstrapping-the-nuget-provider"></a><span data-ttu-id="cd1c7-115">Wiele ustawień wyświetla monit dotyczący uruchamianie dostawcy NuGet</span><span class="sxs-lookup"><span data-stu-id="cd1c7-115">Multiple prompts for bootstrapping the NuGet provider</span></span>

<span data-ttu-id="cd1c7-116">**Scenariusz**: Po uruchomieniu `Find-Module` lub `Install-Module` lub inne polecenia cmdlet funkcji PackageManagement na komputerze po raz pierwszy, funkcja PackageManagement próbuje bootstrap dostawcy NuGet.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-116">**Scenario**: When you run `Find-Module` or `Install-Module` or other PackageManagement cmdlets on your computer for the first time, PackageManagement tries to bootstrap the NuGet provider.</span></span> <span data-ttu-id="cd1c7-117">Dzieje się tak, ponieważ dostawca PowerShellGet również używa dostawcy NuGet można pobrać modułów programu PowerShell.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-117">It does this because the PowerShellGet provider also uses the NuGet provider to download PowerShell modules.</span></span> <span data-ttu-id="cd1c7-118">Funkcja PackageManagement następnie monituje użytkownika o zgodę zainstalować dostawcę NuGet.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-118">PackageManagement then prompts the user for permission to install the NuGet provider.</span></span> <span data-ttu-id="cd1c7-119">Po użytkownik wybierze "yes" do uruchomienia, zostanie zainstalowana najnowsza wersja dostawcy NuGet.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-119">After the user selects "yes" for the bootstrapping, the latest version of the NuGet provider will be installed.</span></span>

<span data-ttu-id="cd1c7-120">Jednak w niektórych przypadkach, w przypadku starszej wersji dostawcy NuGet zainstalowany na tym komputerze starszej wersji pakietu NuGet czasami pobiera ładowane najpierw do sesji programu PowerShell (dotyczy to sytuacji wyścigu w funkcji PackageManagement).</span><span class="sxs-lookup"><span data-stu-id="cd1c7-120">However, in some cases, when you have an old version of NuGet provider installed on your computer, the older version of NuGet sometimes gets loaded first into the PowerShell session (that's the race condition in PackageManagement).</span></span> <span data-ttu-id="cd1c7-121">Moduł PowerShellGet wymaga jednak nowszą wersję dostawcy NuGet do pracy, dlatego moduł PowerShellGet prosi PackageManagement ponownie uruchomienie dostawcy NuGet.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-121">However PowerShellGet requires the later version of the NuGet provider to work, so PowerShellGet asks PackageManagement to bootstrap the NuGet provider again.</span></span> <span data-ttu-id="cd1c7-122">Powoduje to wiele monity dotyczące uruchamianie dostawcy NuGet.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-122">This results in multiple prompts for bootstrapping the NuGet provider.</span></span>

<span data-ttu-id="cd1c7-123">**Rozwiązanie**: W WMF5.1 funkcja PackageManagement ładuje najnowszą wersję dostawcy NuGet, aby uniknąć wielu monity dotyczące uruchamianie dostawcy NuGet.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-123">**Solution**: In WMF5.1, PackageManagement loads the latest version of the NuGet provider to avoid multiple prompts for bootstrapping the NuGet provider.</span></span>

<span data-ttu-id="cd1c7-124">Użytkownik może również obejść ten problem, ręcznie usuwając starą wersję dostawcy NuGet (NuGet Anycpu.exe), jeśli istnieje z $env: ProgramFiles\PackageManagement\ProviderAssemblies $env: LOCALAPPDATA\PackageManagement\ProviderAssemblies</span><span class="sxs-lookup"><span data-stu-id="cd1c7-124">You could also work around this issue by manually deleting the old version of the NuGet provider (NuGet-Anycpu.exe) if exists from $env:ProgramFiles\PackageManagement\ProviderAssemblies $env:LOCALAPPDATA\PackageManagement\ProviderAssemblies</span></span>


### <a name="support-for-packagemanagement-on-computers-with-intranet-access-only"></a><span data-ttu-id="cd1c7-125">Obsługa funkcji PackageManagement na komputerach z systemem tylko dostęp do intranetu</span><span class="sxs-lookup"><span data-stu-id="cd1c7-125">Support for PackageManagement on computers with Intranet access only</span></span>

<span data-ttu-id="cd1c7-126">**Scenariusz**: W scenariuszu enterprise osób pracuje w środowisku w przypadku, gdy jest nie dostępu do Internetu, ale intranetu tylko.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-126">**Scenario**: For the enterprise scenario, people are working under an environment where there is no Internet access but Intranet only.</span></span> <span data-ttu-id="cd1c7-127">Funkcja PackageManagement nie obsługują tego przypadku w programie WMF 5.0.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-127">PackageManagement did not support this case in WMF 5.0.</span></span>

<span data-ttu-id="cd1c7-128">**Scenariusz**: W programie WMF 5.0, funkcja PackageManagement nie obsługują komputerów, które mają tylko Intranet (ale nie Internetu) dostępu.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-128">**Scenario**: In WMF 5.0, PackageManagement did not support computers that have only Intranet (but not Internet) access.</span></span>

<span data-ttu-id="cd1c7-129">**Rozwiązanie**: Programu WMF 5.1 należy wykonać następujące kroki, aby umożliwić komputerów w intranecie, użyj funkcji PackageManagement:</span><span class="sxs-lookup"><span data-stu-id="cd1c7-129">**Solution**: In WMF 5.1, you can follow these steps to allow Intranet computers to use PackageManagement:</span></span>

1. <span data-ttu-id="cd1c7-130">Pobieranie dostawcy NuGet za pomocą innego komputera, który ma połączenie z Internetem przy użyciu `Install-PackageProvider -Name NuGet`.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-130">Download the NuGet provider using another computer that has an Internet connection by using `Install-PackageProvider -Name NuGet`.</span></span>

2. <span data-ttu-id="cd1c7-131">Znajdź dostawcę NuGet w obszarze `$env:ProgramFiles\PackageManagement\ProviderAssemblies\nuget` lub `$env:LOCALAPPDATA\PackageManagement\ProviderAssemblies\nuget`.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-131">Find the NuGet provider under either `$env:ProgramFiles\PackageManagement\ProviderAssemblies\nuget`  or  `$env:LOCALAPPDATA\PackageManagement\ProviderAssemblies\nuget`.</span></span>

3. <span data-ttu-id="cd1c7-132">Skopiuj pliki binarne w folderze lub w sieci lokalizacji udziału, komputer w intranecie dostępu, a następnie zainstaluj dostawcę NuGet za pomocą `Install-PackageProvider -Name NuGet -Source <Path to folder>`.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-132">Copy the binaries to a folder or network share location that the Intranet computer can access, and then install the NuGet provider with `Install-PackageProvider -Name NuGet -Source <Path to folder>`.</span></span>


### <a name="event-logging-improvements"></a><span data-ttu-id="cd1c7-133">Ulepszenia rejestrowania zdarzenia</span><span class="sxs-lookup"><span data-stu-id="cd1c7-133">Event logging improvements</span></span>

<span data-ttu-id="cd1c7-134">Podczas instalowania pakietów zmieniasz stan komputera.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-134">When you install packages, you are changing the state of the computer.</span></span> <span data-ttu-id="cd1c7-135">W program WMF 5.1 PackageManagement teraz rejestruje zdarzenia w dzienniku zdarzeń Windows `Install-Package`, `Uninstall-Package`, i `Save-Package` działań.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-135">In WMF 5.1, PackageManagement now logs events to the Windows event log for `Install-Package`, `Uninstall-Package`, and `Save-Package` activities.</span></span> <span data-ttu-id="cd1c7-136">Dziennik zdarzeń jest taka sama, jak w przypadku programu PowerShell, czyli `Microsoft-Windows-PowerShell, Operational`.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-136">The Event log  is the same as for PowerShell, that is, `Microsoft-Windows-PowerShell, Operational`.</span></span>

### <a name="support-for-basic-authentication"></a><span data-ttu-id="cd1c7-137">Obsługa uwierzytelniania podstawowego</span><span class="sxs-lookup"><span data-stu-id="cd1c7-137">Support for basic authentication</span></span>

<span data-ttu-id="cd1c7-138">Program WMF 5.1 PackageManagement obsługuje wyszukiwanie i instalowanie pakietów z repozytorium, który wymaga uwierzytelniania podstawowego.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-138">In WMF 5.1, PackageManagement supports finding and installing packages from a repository that requires basic authentication.</span></span> <span data-ttu-id="cd1c7-139">Możesz podać swoje poświadczenia, aby `Find-Package` i `Install-Package` polecenia cmdlet.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-139">You can supply your credentials to the `Find-Package` and `Install-Package` cmdlets.</span></span> <span data-ttu-id="cd1c7-140">Przykład:</span><span class="sxs-lookup"><span data-stu-id="cd1c7-140">For example:</span></span>

``` PowerShell
Find-Package -Source <SourceWithCredential> -Credential (Get-Credential)
```

### <a name="support-for-using-packagemanagement-behind-a-proxy"></a><span data-ttu-id="cd1c7-141">Obsługa za pomocą modułu PackageManagement za serwerem proxy</span><span class="sxs-lookup"><span data-stu-id="cd1c7-141">Support for using PackageManagement behind a proxy</span></span>

<span data-ttu-id="cd1c7-142">W program WMF 5.1 PackageManagement przyjmuje teraz nowe parametry serwera proxy `-ProxyCredential` i `-Proxy`.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-142">In WMF 5.1, PackageManagement now takes new proxy parameters `-ProxyCredential` and `-Proxy`.</span></span> <span data-ttu-id="cd1c7-143">Korzystając z tych parametrów, można określić adres URL serwera proxy i poświadczeń do polecenia cmdlet funkcji PackageManagement.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-143">Using these parameters, you can specify the proxy URL and credentials to PackageManagement cmdlets.</span></span> <span data-ttu-id="cd1c7-144">Domyślnie są używane ustawienia serwera proxy systemu.</span><span class="sxs-lookup"><span data-stu-id="cd1c7-144">By default, system proxy settings are used.</span></span> <span data-ttu-id="cd1c7-145">Przykład:</span><span class="sxs-lookup"><span data-stu-id="cd1c7-145">For example:</span></span>

``` PowerShell
Find-Package -Source http://www.nuget.org/api/v2/ -Proxy http://www.myproxyserver.com -ProxyCredential (Get-Credential)
```

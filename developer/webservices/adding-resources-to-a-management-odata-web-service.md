---
title: Dodawanie zasobów do zarządzania OData usługi sieci Web | Dokumentacja firmy Microsoft
ms.custom: ''
ms.date: 09/13/2016
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: e620bf6d-76be-47b0-a7a8-f43418f30c60
caps.latest.revision: 6
ms.openlocfilehash: b81a32b867795ae51c3f5308c2f82c31ed2747fa
ms.sourcegitcommit: e7445ba8203da304286c591ff513900ad1c244a4
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/23/2019
ms.locfileid: "62080785"
---
# <a name="adding-resources-to-a-management-odata-web-service"></a><span data-ttu-id="7de5b-102">Dodawanie zasobów do internetowej usługi OData zarządzania</span><span class="sxs-lookup"><span data-stu-id="7de5b-102">Adding Resources to a Management OData Web Service</span></span>

<span data-ttu-id="7de5b-103">W tym przykładzie pokazano, jak można dodać zasobu do istniejącej usługi sieci web OData zarządzania przy użyciu projektanta schematu OData zarządzania.</span><span class="sxs-lookup"><span data-stu-id="7de5b-103">This example demonstrates how to add a resource to an existing Management OData web service by using the Management OData Schema Designer.</span></span> <span data-ttu-id="7de5b-104">[PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) Przykładowa aplikacja tworzy usługi sieci web, która udostępnia zasoby przetwarzania i serwera.</span><span class="sxs-lookup"><span data-stu-id="7de5b-104">The [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) sample creates a web service that exposes the Process and Server resources.</span></span> <span data-ttu-id="7de5b-105">W tym przykładzie dodasz zasób maszynę wirtualną (VM) do usługi sieci web.</span><span class="sxs-lookup"><span data-stu-id="7de5b-105">In this example, you will add a Virtual Machine (VM) resource to the web service.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="7de5b-106">Wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="7de5b-106">Prerequisites</span></span>

<span data-ttu-id="7de5b-107">W tym temacie założono, że pobrane i zainstalowane [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) przykładowy zgodnie z opisem w [Tworzenie usługi sieci Web Windows PowerShell](./creating-a-management-odata-web-service.md), oraz że zostały pobrane i zainstalowane [Projektanta schematu OData zarządzania](https://marketplace.visualstudio.com/items?itemName=jlisc0.ManagementODataSchemaDesigner).</span><span class="sxs-lookup"><span data-stu-id="7de5b-107">This topic assumes that you have downloaded and installed the [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) sample as described in [Creating a Windows PowerShell Web Service](./creating-a-management-odata-web-service.md), and that you have downloaded and installed the [Management OData Schema Designer](https://marketplace.visualstudio.com/items?itemName=jlisc0.ManagementODataSchemaDesigner).</span></span> <span data-ttu-id="7de5b-108">W tym temacie założono również, że masz zainstalowany na komputerze, w którym konfiguruje się punkt końcowy Odata zarządzania moduł funkcji Hyper-V Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="7de5b-108">This topic also assumes that you have the Hyper-V Windows PowerShell module installed on the computer where you set up the Management Odata endpoint.</span></span>

## <a name="adding-vm-as-a-resource-to-the-web-service"></a><span data-ttu-id="7de5b-109">Dodawanie maszyny Wirtualnej jako zasób do usługi sieci Web</span><span class="sxs-lookup"><span data-stu-id="7de5b-109">Adding VM as a Resource to the Web Service</span></span>

<span data-ttu-id="7de5b-110">Pierwszym krokiem jest importowanie schematu z istniejącego punktu końcowego OData zarządzania do projektanta schematu.</span><span class="sxs-lookup"><span data-stu-id="7de5b-110">The first step is to import the schema from the existing Management OData endpoint into the schema designer.</span></span> <span data-ttu-id="7de5b-111">Poniższa procedura opisuje, jak to zrobić.</span><span class="sxs-lookup"><span data-stu-id="7de5b-111">The following procedure describes how to do that.</span></span>

#### <a name="importing-an-existing-schema-into-the-schema-designer"></a><span data-ttu-id="7de5b-112">Importowanie schematu do projektanta schematu</span><span class="sxs-lookup"><span data-stu-id="7de5b-112">Importing an existing schema into the schema designer</span></span>

1. <span data-ttu-id="7de5b-113">Otwórz projektanta schematu OData zarządzania.</span><span class="sxs-lookup"><span data-stu-id="7de5b-113">Open the Management OData Schema Designer.</span></span>

2. <span data-ttu-id="7de5b-114">Z **pliku** menu, wybierz opcję **pliku** ; **Nowe** ; **Pliku**.</span><span class="sxs-lookup"><span data-stu-id="7de5b-114">From the **File** menu, select **File** ; **New** ; **File**.</span></span> <span data-ttu-id="7de5b-115">**Nowy plik** zostanie wyświetlone okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="7de5b-115">The **New File** dialog appears.</span></span>

3. <span data-ttu-id="7de5b-116">Kliknij przycisk **modelu OData zarządzania**, a następnie kliknij przycisk **Otwórz**.</span><span class="sxs-lookup"><span data-stu-id="7de5b-116">Click **Management OData Model**, and then click **Open**.</span></span>

4. <span data-ttu-id="7de5b-117">Kliknij prawym przyciskiem myszy w oknie głównym, a następnie kliknij przycisk **pliku schematu** ; **Importu**.</span><span class="sxs-lookup"><span data-stu-id="7de5b-117">Right-click in the main window, and click **Schema file** ; **Import**.</span></span> <span data-ttu-id="7de5b-118">**Otwórz** zostanie wyświetlone okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="7de5b-118">The **Open** dialog appears.</span></span>

5. <span data-ttu-id="7de5b-119">Przejdź do folderu, w którym konfiguruje się usługę sieci web OData zarządzania [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) próbki.</span><span class="sxs-lookup"><span data-stu-id="7de5b-119">Navigate to the folder where you set up the Management OData web service for the [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) sample.</span></span> <span data-ttu-id="7de5b-120">Jeśli skrypt programu Windows PowerShell, wyposażone w tym przykładzie jest używany do konfigurowania punktu końcowego bez modyfikowania skryptu, wybrany folder jest **C:\inetpub\wwwroot\Modata**.</span><span class="sxs-lookup"><span data-stu-id="7de5b-120">If you used the Windows PowerShell script provided with that sample to set up the endpoint without modifying the script, that folder is **C:\inetpub\wwwroot\Modata**.</span></span> <span data-ttu-id="7de5b-121">Wybierz Schema.mof, a następnie kliknij przycisk **Otwórz**.</span><span class="sxs-lookup"><span data-stu-id="7de5b-121">Select Schema.mof, and click **Open**.</span></span>

   <span data-ttu-id="7de5b-122">W tym momencie otwierania plików Schema.mof i Schema.xml w edytorze tekstów i zwróć uwagę, że zawierają one mapowania dla zasobów przetwarzania i usługi.</span><span class="sxs-lookup"><span data-stu-id="7de5b-122">At this point, open the Schema.mof and Schema.xml files in a text editor, and notice that they contain mappings for the Process and Service resources.</span></span> <span data-ttu-id="7de5b-123">Plik Schema.mof używa [Distributed Management Task Force](https://www.dmtf.org/) standard (DTMF) MOF (Managed Object).</span><span class="sxs-lookup"><span data-stu-id="7de5b-123">The Schema.mof file uses [Distributed Management  Task Force](https://www.dmtf.org/) (DTMF) Managed Object (MOF) standard.</span></span> <span data-ttu-id="7de5b-124">Plik schema.xml używa schematu XML, który jest opisany w [schemat mapowania zasobów](./resource-mapping-schema.md).</span><span class="sxs-lookup"><span data-stu-id="7de5b-124">The schema.xml file uses an XML schema that is described in [Resource Mapping Schema](./resource-mapping-schema.md).</span></span>

   <span data-ttu-id="7de5b-125">Poniższa procedura opisuje sposób importowania poleceń cmdlet funkcji Hyper-V, w modelu schematu.</span><span class="sxs-lookup"><span data-stu-id="7de5b-125">The following procedure describes how to import Hyper-V cmdlets in to the schema model.</span></span>

#### <a name="importing-cmdlets-into-the-schema"></a><span data-ttu-id="7de5b-126">Importowanie poleceń cmdlet do schematu</span><span class="sxs-lookup"><span data-stu-id="7de5b-126">Importing cmdlets into the schema</span></span>

1. <span data-ttu-id="7de5b-127">Kliknij prawym przyciskiem myszy pusty obszar okna Projektanta schematu, a następnie kliknij przycisk **poleceń cmdlet importu**.</span><span class="sxs-lookup"><span data-stu-id="7de5b-127">Right-click on a blank area of the schema designer window, and click **Import Cmdlets**.</span></span> <span data-ttu-id="7de5b-128">**Kreatora importowania poleceń Cmdlet** zostanie wyświetlone okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="7de5b-128">The **Cmdlet Import Wizard** dialog appears.</span></span>

2. <span data-ttu-id="7de5b-129">Upewnij się, że **komputera lokalnego** jest zaznaczone, a następnie kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="7de5b-129">Make sure **Local Computer** is selected, and click **Next**.</span></span>

3. <span data-ttu-id="7de5b-130">Upewnij się, że wybrano zainstalowanych modułów programu Windows PowerShell, a następnie z listy rozwijanej wybierz funkcji Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="7de5b-130">Make sure that Installed Windows PowerShell Modules is selected, and select Hyper-V from the drop-down list.</span></span> <span data-ttu-id="7de5b-131">Kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="7de5b-131">click **Next**.</span></span> <span data-ttu-id="7de5b-132">Kliknij przycisk **Dalej**.</span><span class="sxs-lookup"><span data-stu-id="7de5b-132">Click **Next**.</span></span>

4. <span data-ttu-id="7de5b-133">W **rzeczownik polecenia Cmdlet** listy wybierz **maszyny Wirtualnej**.</span><span class="sxs-lookup"><span data-stu-id="7de5b-133">In the **Cmdlet Noun** list, select **VM**.</span></span> <span data-ttu-id="7de5b-134">Kliknij przycisk **Dalej**.</span><span class="sxs-lookup"><span data-stu-id="7de5b-134">Click **Next**</span></span>

5. <span data-ttu-id="7de5b-135">W tym przykładzie firma Microsoft będzie powiązać tylko polecenia Get i Delete za pomocą poleceń cmdlet.</span><span class="sxs-lookup"><span data-stu-id="7de5b-135">For this example, we will bind only the Get and Delete commands with cmdlets.</span></span> <span data-ttu-id="7de5b-136">Wyczyść **Utwórz** i **aktualizacji** pole wyboru i upewnij się, że **UZYSKAĆ** i **Usuń** są zaznaczone pola wyboru.</span><span class="sxs-lookup"><span data-stu-id="7de5b-136">Clear the **CREATE** and **UPDATE** checkboxes, and make sure the **GET** and **DELETE** checkboxes are checked.</span></span> <span data-ttu-id="7de5b-137">Upewnij się, że `Get-VM` wybrano polecenie cmdlet **UZYSKAĆ**i `Remove-VM` wybrano polecenie cmdlet **Usuń**.</span><span class="sxs-lookup"><span data-stu-id="7de5b-137">Make sure that the `Get-VM` cmdlet is selected for **GET**, and the `Remove-VM` cmdlet is selected for **DELETE**.</span></span>

6. <span data-ttu-id="7de5b-138">Ponieważ metadane dla poleceń cmdlet maszyny Wirtualnej nie określa typ danych wyjściowych, należy uruchomić polecenie cmdlet, aby określić typ danych wyjściowych.</span><span class="sxs-lookup"><span data-stu-id="7de5b-138">Because the metadata for the VM cmdlets does not specify an output type, you will need to run the cmdlet to specify the output type.</span></span> <span data-ttu-id="7de5b-139">Wybierz **Podaj typ danych wyjściowych** i kliknij przycisk **Uruchom polecenie cmdlet**.</span><span class="sxs-lookup"><span data-stu-id="7de5b-139">Select **Provide output type** and click **Run cmdlet**.</span></span> <span data-ttu-id="7de5b-140">**Uruchom polecenie Cmdlet** zostanie wyświetlone okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="7de5b-140">The **Run Cmdlet** dialog appears.</span></span> <span data-ttu-id="7de5b-141">Kliknij pozycję **Run** (Uruchom).</span><span class="sxs-lookup"><span data-stu-id="7de5b-141">Click **Run**.</span></span> <span data-ttu-id="7de5b-142">**Typu CLR** pole jest wypełniane `VirtualMachine` typu.</span><span class="sxs-lookup"><span data-stu-id="7de5b-142">The **CLR Type** box is populated with the `VirtualMachine` type.</span></span> <span data-ttu-id="7de5b-143">Kliknij przycisk **OK**, następnie kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="7de5b-143">Click **OK**, then click **Next**.</span></span>

7. <span data-ttu-id="7de5b-144">Domyślnie wszystkie właściwości obiektu VirtualMachine zaznaczone.</span><span class="sxs-lookup"><span data-stu-id="7de5b-144">By default, all of the properties of the VirtualMachine object are selected.</span></span> <span data-ttu-id="7de5b-145">Możesz wyczyścić wszystkie właściwości, które mają być jako część danych zwracane, gdy żądanie tego zasobu z usługą sieci web.</span><span class="sxs-lookup"><span data-stu-id="7de5b-145">You can clear any properties that you do not want as part of the data returned when you request this resource from the web service.</span></span> <span data-ttu-id="7de5b-146">Kliknij przycisk **Dalej**.</span><span class="sxs-lookup"><span data-stu-id="7de5b-146">Click **Next**.</span></span>

8. <span data-ttu-id="7de5b-147">Należy wybrać co najmniej jedna właściwość ma być używany jako klucz.</span><span class="sxs-lookup"><span data-stu-id="7de5b-147">You must select at least one property to be used as a key.</span></span> <span data-ttu-id="7de5b-148">Wybierz **nazwa** na liście i kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="7de5b-148">Select **Name** in the list, and click **Next**.</span></span>

9. <span data-ttu-id="7de5b-149">Następne okno umożliwia mapowanie właściwości zasobu OData zarządzania właściwości podstawowych poleceń cmdlet.</span><span class="sxs-lookup"><span data-stu-id="7de5b-149">The next window allows you to map properties of the Management OData resource to properties of the underlying cmdlets.</span></span> <span data-ttu-id="7de5b-150">Kreator mapy właściwości o identycznych nazwach domyślnie.</span><span class="sxs-lookup"><span data-stu-id="7de5b-150">The wizard maps properties with identical names by default.</span></span> <span data-ttu-id="7de5b-151">Na przykład `ComputerName` właściwość zasobu jest mapowana na `ComputerName` właściwości polecenia cmdlet.</span><span class="sxs-lookup"><span data-stu-id="7de5b-151">For example, the `ComputerName` property of the resource is mapped to the `ComputerName` property of the cmdlets.</span></span>  <span data-ttu-id="7de5b-152">Dzięki temu można określić `ComputerName` właściwości w żądaniu skierowanym do usługi sieci web i ma wartość, określaną przekazania do `Get-VM` polecenia cmdlet.</span><span class="sxs-lookup"><span data-stu-id="7de5b-152">This allows you to specify the `ComputerName` property in a request to the web service, and have the value you specify be passed to the `Get-VM` cmdlet.</span></span> <span data-ttu-id="7de5b-153">`Id` i `Name` również są mapowane domyślnie.</span><span class="sxs-lookup"><span data-stu-id="7de5b-153">`Id` and `Name` are also mapped by default.</span></span>

   10. <span data-ttu-id="7de5b-154">Kliknij przycisk **dalej**, następnie kliknij przycisk **Zakończ**.</span><span class="sxs-lookup"><span data-stu-id="7de5b-154">Click **Next**, then click **Finish**.</span></span>

       <span data-ttu-id="7de5b-155">Zasób maszyny Wirtualnej, która jest teraz wyświetlany w oknie projektanta schematu.</span><span class="sxs-lookup"><span data-stu-id="7de5b-155">The VM resource now appears in the schema designer window.</span></span> <span data-ttu-id="7de5b-156">Można sprawdzić właściwości i operacje skojarzone z zasobem.</span><span class="sxs-lookup"><span data-stu-id="7de5b-156">You can examine the properties and operations associated with the resource.</span></span> <span data-ttu-id="7de5b-157">Następnie zostaną wyeksportowane pliki schematów zaktualizowane na katalog wirtualny usługi sieci web.</span><span class="sxs-lookup"><span data-stu-id="7de5b-157">Next, you will export the updated schema files into the virtual directory for the web service.</span></span>

#### <a name="exporting-schema-files-from-the-schema-designer"></a><span data-ttu-id="7de5b-158">Eksportowanie plików schematów z projektanta schematu</span><span class="sxs-lookup"><span data-stu-id="7de5b-158">Exporting schema files from the schema designer</span></span>

1. <span data-ttu-id="7de5b-159">Kliknij prawym przyciskiem myszy pusty obszar okna Projektanta schematu, a następnie kliknij przycisk **pliku schematu** ; **Wyeksportować**.</span><span class="sxs-lookup"><span data-stu-id="7de5b-159">Right-click on a blank area of the schema designer window, and click **Schema file** ; **Export**.</span></span> <span data-ttu-id="7de5b-160">**Zapisz jako** zostanie wyświetlone okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="7de5b-160">The **Save As** dialog appears.</span></span>

2. <span data-ttu-id="7de5b-161">Przejdź do katalogu, z którego importowany jest plik MOF.</span><span class="sxs-lookup"><span data-stu-id="7de5b-161">Navigate to the same directory from where you imported the MOF file.</span></span> <span data-ttu-id="7de5b-162">Nadaj plikowi nazwę taka sama jak oryginalny plik MOF (Schema.mof domyślnie), a następnie kliknij przycisk **Zapisz**.</span><span class="sxs-lookup"><span data-stu-id="7de5b-162">Name the file the same as the original MOF file (Schema.mof by default), and click **Save**.</span></span> <span data-ttu-id="7de5b-163">Upewnij się, że chcesz zastąpić istniejący plik.</span><span class="sxs-lookup"><span data-stu-id="7de5b-163">Confirm that you want to overwrite the existing file.</span></span>

   <span data-ttu-id="7de5b-164">Mimo że nie został jawnie określony w **Zapisz jako** okno dialogowe, spowoduje to zastąpienie pliku Schema.mof, jak i Schema.xml w pliku.</span><span class="sxs-lookup"><span data-stu-id="7de5b-164">Although it is not explicitly stated in the **Save As** dialog, this replaces both the Schema.mof and Schema.xml files.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7de5b-165">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="7de5b-165">Next Steps</span></span>

<span data-ttu-id="7de5b-166">Dostęp do nowego zasobu maszyny Wirtualnej z usługą sieci web OData zarządzania, należy zaktualizować plik RbacConfiguration.xml, aby zezwolić na dostęp do modułu funkcji Hyper-V Windows PowerShell, zgodnie z opisem w [autoryzacji opartej na rolach Konfigurowanie](./configuring-role-based-authorization.md), i należy również ponownie uruchomić usługę sieci web.</span><span class="sxs-lookup"><span data-stu-id="7de5b-166">Before you access the new VM resource from the Management OData web service, you must update the RbacConfiguration.xml file to allow access to the Hyper-V Windows PowerShell module as described in [Configuring Role-based Authorization](./configuring-role-based-authorization.md), and you will also need to restart the web service.</span></span>